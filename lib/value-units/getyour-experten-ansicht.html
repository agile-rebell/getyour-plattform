<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Getyour Experte</title>

    <style>
      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
        padding-bottom: 144px;
      }
    </style>

  </head>
  <body>

    <script type="module">
      import { Request } from "/js/Request.js"
      import { Helper } from "/js/Helper.js"
      import { TextField } from "/js/TextField.js"
      import { TextAreaField } from "/js/TextAreaField.js"
      import { FileField } from "/js/FileField.js"
      import { SelectionField } from "/js/SelectionField.js"


      const header = document.createElement("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.justifyContent = "space-between"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/public/getyour-logo.svg"
      logo.alt = "Getyour"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Plattform"
      name.style.padding = "21px 34px"
      name.style.fontSize = "21px"
      name.style.color = "#000"
      name.style.cursor = "pointer"


      name.addEventListener("click", () => {

        Helper.popup(async overlay => {

          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/public/getyour-logo.svg"
          logo.alt = "Getyour"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = `/ ${window.location.pathname.split("/")[1]} /`
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)



          const buttons = document.createElement("div")
          buttons.style.overflow = "auto"
          buttons.style.paddingBottom = "144px"


          {
            const verify = {}
            verify.url = "/verify/roles/closed/3/"
            verify.state = "owner"
            verify.name = window.location.pathname.split("/")[1]
            verify.localStorageId = await Request.localStorageId()
            verify.localStorageEmail = await Request.email()
            verify.referer = document.referrer
            verify.location = window.location.href
            const res = await Request.middleware(verify)

            if (res.status === 200) {

              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => {

                Helper.popup(async overlay => {

                  {
                    const header = document.createElement("div")
                    header.style.position = "fixed"
                    header.style.bottom = "0"
                    header.style.left = "0"
                    header.style.width = "100%"
                    header.style.display = "flex"
                    header.style.justifyContent = "flex-start"
                    header.style.alignItems = "center"
                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                    header.style.background = "white"
                    header.style.cursor = "pointer"
                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                    const logo = document.createElement("img")
                    logo.src = "/public/getyour-logo.svg"
                    logo.alt = "Getyour"
                    logo.style.width = "55px"
                    logo.style.margin = "21px 34px"
                    header.append(logo)
                    const title = document.createElement("div")
                    title.innerHTML = `Plattform hinzufügen`
                    title.style.fontWeight = "bold"
                    title.style.fontSize = "21px"
                    header.append(title)
                    overlay.append(header)
                  }


                  const funnel = document.createElement("div")
                  funnel.style.overflow = "auto"
                  funnel.style.paddingBottom = "144px"


                  const platformNameField = new TextField("platformName", funnel)
                  platformNameField.label.innerHTML = "Name"
                  platformNameField.input.accept = "text/tag"
                  platformNameField.input.maxLength = "21"
                  platformNameField.input.required = true
                  platformNameField.input.placeholder = "meine-plattform"
                  platformNameField.input.addEventListener("input", (event) => {
                    platformNameField.withValidValue()
                  })
                  Helper.setNotValidStyle(platformNameField.input)



                  const platformLogoField = new FileField("platformLogo", funnel)
                  platformLogoField.label.innerHTML = "Logo"
                  platformLogoField.input.accept = "image/jpeg, image/png"
                  platformLogoField.input.required = true
                  platformLogoField.input.addEventListener("input", (event) => {
                    platformLogoField.withValidImage(event.target.files[0])
                  })
                  Helper.setNotValidStyle(platformLogoField.input)

                  const button = document.createElement("div")
                  button.innerHTML = "Hinzufügen"
                  button.style.backgroundColor = "#c02221"
                  button.style.cursor = "pointer"
                  button.style.fontSize = "21px"
                  button.style.borderRadius = "13px"
                  button.style.margin = "13px 34px"
                  button.style.display = "flex"
                  button.style.justifyContent = "center"
                  button.style.alignItems = "center"
                  button.style.height = "89px"
                  button.style.color = "#fff"
                  button.addEventListener("click", async () => {
                    const platformName = await platformNameField.withValidValue()
                    const platformLogoFiles = await platformLogoField.withValidValue()
                    const platformLogo = await platformLogoField.withValidImage(platformLogoFiles[0])


                    const verify = {}
                    verify.url = "/verify/platform/closed/3/"
                    verify.name = platformName
                    verify.localStorageEmail = await Request.email()
                    verify.localStorageId = await Request.localStorageId()
                    verify.location = window.location.href
                    verify.referer = document.referrer
                    const res = await Request.middleware(verify)

                    if (res.status === 200) {
                      alert("Plattform Name existiert bereits.")
                      Helper.setNotValidStyle(platformNameField.input)
                      return
                    }


                    try {
                      Helper.addOverlay()
                      Helper.setWaitCursor()
                      const register = {}
                      register.url = "/register/platform/closed/3/"
                      register.name = platformName
                      register.logo = platformLogo
                      register.localStorageEmail = await Request.email()
                      register.localStorageId = await Request.localStorageId()
                      register.location = window.location.href
                      register.referer = document.referrer
                      await Request.sequence(register)
                      alert("Plattform erfolgreich hinzugefügt..")
                    } catch (error) {
                      alert("Fehler.. Bitte wiederholen.")
                    }
                    window.location.reload()


                  })
                  funnel.append(button)

                  overlay.append(funnel)
                })

              })

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/add-icon.svg"
              icon.alt = "Hinzufügen"
              button.append(icon)

              const title = document.createElement("div")
              title.innerHTML = "Plattform hinzufügen"
              title.style.margin = "21px 34px"
              title.style.fontSize = "21px"
              button.append(title)

              buttons.append(button)

            }

          }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/home.svg"
            icon.alt = "Home"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Startseite"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }



          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/login/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/entry.svg"
            icon.alt = "Login"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Login"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }




          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/nutzervereinbarung/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/handshake.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Nutzervereinbarung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/datenschutz/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/security.svg"
            icon.alt = "Sicherheit"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Datenschutz Richtilinien"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }
          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/impressum/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/company.svg"
            icon.alt = "Unternehmen"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Impressum"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          overlay.append(buttons)
        })


      })


      leftContainer.append(name)
      header.append(leftContainer)
      document.body.append(header)




      {
        const title = document.createElement("h1")
        title.innerHTML = "Plattformen"
        title.style.margin = "21px 34px"
        title.style.fontWeight = "normal"
        document.body.append(title)
      }


      {

        const platformButtonList = document.createElement("div")
        platformButtonList.classList.add("platform-button-list")
        platformButtonList.style.paddingBottom = "144px"
        platformButtonList.style.overflowY = "auto"
        platformButtonList.style.display = "flex"
        platformButtonList.style.justifyContent = "center"
        const loading = document.createElement("img")
        loading.src = "/public/load.svg"
        loading.alt = "Bitte warten.."
        loading.style.width = "55px"
        platformButtonList.append(loading)
        document.body.append(platformButtonList)

        const verify = {}
        verify.url = "/verify/roles/closed/3/"
        verify.state = "owner"
        verify.name = window.location.pathname.split("/")[1]
        verify.localStorageId = await Request.localStorageId()
        verify.localStorageEmail = await Request.email()
        verify.referer = document.referrer
        verify.location = window.location.href
        const res = await Request.middleware(verify)

        if (res.status !== 200) {
          const get = {}
          get.url = "/get/platforms/open/"
          get.name = window.location.pathname.split("/")[1]
          get.location = window.location.href
          get.referer = document.referrer
          const res = await Request.middleware(get)

          if (res.status !== 200) {

            Helper.reset(platformButtonList)
            platformButtonList.style.position = "absolute"
            platformButtonList.style.top = "0"
            platformButtonList.style.left = "0"
            platformButtonList.style.height = "89vh"
            platformButtonList.style.width = "100%"
            platformButtonList.style.display = "flex"
            platformButtonList.style.justifyContent = "center"
            platformButtonList.style.alignItems = "center"
            platformButtonList.style.zIndex = "-1"
            platformButtonList.style.color = "gray"
            platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
            throw new Error("platform not found")

          }

          if (res.status === 200) {
            const platforms = JSON.parse(res.response)

            if (platforms.length === 0) {

              Helper.reset(platformButtonList)
              platformButtonList.style.position = "absolute"
              platformButtonList.style.top = "0"
              platformButtonList.style.left = "0"
              platformButtonList.style.height = "89vh"
              platformButtonList.style.width = "100%"
              platformButtonList.style.display = "flex"
              platformButtonList.style.justifyContent = "center"
              platformButtonList.style.alignItems = "center"
              platformButtonList.style.zIndex = "-1"
              platformButtonList.style.color = "gray"
              platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
              throw new Error("platform not found")

            }



            Helper.reset(platformButtonList)
            platformButtonList.style.overflowY = "auto"
            platformButtonList.style.paddingBottom = "144px"
            for (let i = 0; i < platforms.length; i++) {

              const platform = platforms[i]

              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"

              button.addEventListener("click", () => {

                Helper.popup(async overlay => {

                  const header = document.createElement("div")
                  header.style.position = "fixed"
                  header.style.bottom = "0"
                  header.style.left = "0"
                  header.style.width = "100%"
                  header.style.display = "flex"
                  header.style.justifyContent = "flex-start"
                  header.style.alignItems = "center"
                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                  header.style.background = "white"
                  header.style.cursor = "pointer"
                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                  const logo = document.createElement("img")
                  logo.src = "/public/getyour-logo.svg"
                  logo.alt = "Getyour"
                  logo.style.width = "55px"
                  logo.style.margin = "21px 34px"
                  header.append(logo)
                  const title = document.createElement("div")
                  title.innerHTML = platform.name
                  title.style.fontWeight = "bold"
                  title.style.fontSize = "21px"
                  header.append(title)
                  overlay.append(header)



                  const buttons = document.createElement("div")
                  buttons.style.overflow = "auto"
                  buttons.style.paddingBottom = "144px"


                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"
                    button.addEventListener("click", () => window.location.assign(platform.home))

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/home.svg"
                    icon.alt = "Home"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Startseite"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)

                    buttons.append(button)
                  }

                  overlay.append(buttons)
                })


              })


              {
                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "55px"
                icon.src = platform.logo
                icon.alt = platform.name
                button.append(icon)
              }

              {
                const title = document.createElement("h2")
                title.style.margin = "13px 34px"
                title.style.fontWeight = "normal"
                title.innerHTML = platform.name
                button.append(title)
              }

              platformButtonList.append(button)
            }

          }


        }

        if (res.status === 200) {

          const get = {}
          get.url = "/get/platforms/closed/3/"
          get.name = window.location.pathname.split("/")[1]
          get.localStorageEmail = await Request.email()
          get.localStorageId = await Request.localStorageId()
          get.location = window.location.href
          get.referer = document.referrer
          const res = await Request.middleware(get)

          if (res.status !== 200) {

            Helper.reset(platformButtonList)
            platformButtonList.style.position = "absolute"
            platformButtonList.style.top = "0"
            platformButtonList.style.left = "0"
            platformButtonList.style.height = "89vh"
            platformButtonList.style.width = "100%"
            platformButtonList.style.display = "flex"
            platformButtonList.style.justifyContent = "center"
            platformButtonList.style.alignItems = "center"
            platformButtonList.style.zIndex = "-1"
            platformButtonList.style.color = "gray"
            platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
            throw new Error("platform not found")

          }

          if (res.status === 200) {
            const platforms = JSON.parse(res.response)

            if (platforms.length === 0) {

              Helper.reset(platformButtonList)
              platformButtonList.style.position = "absolute"
              platformButtonList.style.top = "0"
              platformButtonList.style.left = "0"
              platformButtonList.style.height = "89vh"
              platformButtonList.style.width = "100%"
              platformButtonList.style.display = "flex"
              platformButtonList.style.justifyContent = "center"
              platformButtonList.style.alignItems = "center"
              platformButtonList.style.zIndex = "-1"
              platformButtonList.style.color = "gray"
              platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
              throw new Error("platform not found")

            }


            Helper.reset(platformButtonList)
            platformButtonList.style.overflowY = "auto"
            platformButtonList.style.paddingBottom = "144px"
            for (let i = 0; i < platforms.length; i++) {

              const platform = platforms[i]

              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"

              button.addEventListener("click", () => {

                Helper.popup(async overlay => {

                  const header = document.createElement("div")
                  header.style.position = "fixed"
                  header.style.bottom = "0"
                  header.style.left = "0"
                  header.style.width = "100%"
                  header.style.display = "flex"
                  header.style.justifyContent = "flex-start"
                  header.style.alignItems = "center"
                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                  header.style.background = "white"
                  header.style.cursor = "pointer"
                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                  const logo = document.createElement("img")
                  logo.src = platform.logo
                  logo.alt = platform.name
                  logo.style.width = "55px"
                  logo.style.margin = "21px 34px"
                  header.append(logo)
                  const title = document.createElement("div")
                  title.innerHTML = platform.name
                  title.style.fontWeight = "bold"
                  title.style.fontSize = "21px"
                  header.append(title)
                  overlay.append(header)


                  const buttons = document.createElement("div")
                  buttons.style.overflow = "auto"
                  buttons.style.paddingBottom = "144px"


                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"
                    button.addEventListener("click", () => window.location.assign(`${platform.home}toolbox/`))

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/tools-icon-1.svg"
                    icon.alt = "Toolbox"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Toolbox"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)

                    buttons.append(button)
                  }

                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"

                    button.addEventListener("click", () => {

                      Helper.popup(async overlay => {

                        {
                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/public/getyour-logo.svg"
                          logo.alt = "Getyour"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = `Sichtbarkeit`
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)
                        }


                        const funnel = document.createElement("div")
                        funnel.style.overflow = "auto"
                        funnel.style.paddingBottom = "144px"


                        const options = ["Nur für mich", "Für alle"]
                        const platformVisibilityField = new SelectionField("platformVisibility", funnel)
                        platformVisibilityField.label.innerHTML = "Sichtbarkeit"
                        for (let i = 0; i < options.length; i++) {
                          const option = document.createElement("option")
                          option.value = options[i]
                          option.text = options[i]
                          platformVisibilityField.select.append(option)
                        }
                        Helper.setValidStyle(platformVisibilityField.select)


                        const button = document.createElement("div")
                        button.innerHTML = "Speichern"
                        button.style.backgroundColor = "#c02221"
                        button.style.cursor = "pointer"
                        button.style.fontSize = "21px"
                        button.style.borderRadius = "13px"
                        button.style.margin = "13px 34px"
                        button.style.display = "flex"
                        button.style.justifyContent = "center"
                        button.style.alignItems = "center"
                        button.style.height = "89px"
                        button.style.color = "#fff"
                        button.addEventListener("click", async () => {

                          const platformVisibility = (await platformVisibilityField.withValidValue())[0].value

                          let visibility
                          if (platformVisibility === options[0]) {
                            visibility = "closed"
                          }
                          if (platformVisibility === options[1]) {
                            visibility = "open"
                          }

                          try {
                            Helper.addOverlay()
                            Helper.setWaitCursor()
                            const register = {}
                            register.url = "/register/platform/closed/3/"
                            register.type = "visibility"
                            register.visibility = visibility
                            register.name = platform.name
                            register.localStorageEmail = await Request.email()
                            register.localStorageId = await Request.localStorageId()
                            register.location = window.location.href
                            register.referer = document.referrer
                            await Request.sequence(register)
                            alert("Speichern erfolgreich..")
                          } catch (error) {
                            alert("Fehler.. Bitte wiederholen.")
                          }
                          window.location.reload()


                        })
                        funnel.append(button)

                        overlay.append(funnel)
                      })


                    })

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/visibility.svg"
                    icon.alt = "Sichtbarkeit"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Sichtbarkeit"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)

                    buttons.append(button)
                  }

                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"
                    button.addEventListener("click", () => {

                      Helper.popup(async overlay => {

                        const header = document.createElement("div")
                        header.style.position = "fixed"
                        header.style.bottom = "0"
                        header.style.left = "0"
                        header.style.width = "100%"
                        header.style.display = "flex"
                        header.style.justifyContent = "flex-start"
                        header.style.alignItems = "center"
                        header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                        header.style.background = "white"
                        header.style.cursor = "pointer"
                        header.addEventListener("click", () => Helper.removeOverlay(overlay))

                        const logo = document.createElement("img")
                        logo.src = platform.logo
                        logo.alt = platform.name
                        logo.style.width = "55px"
                        logo.style.margin = "21px 34px"
                        header.append(logo)
                        const title = document.createElement("div")
                        title.innerHTML = "Angebote"
                        title.style.fontWeight = "bold"
                        title.style.fontSize = "21px"
                        header.append(title)
                        overlay.append(header)

                        const content = document.createElement("div")
                        content.style.paddingBottom = "144px"
                        content.style.overflow = "auto"
                        content.style.display = "flex"
                        content.style.justifyContent = "center"
                        content.style.alignItems = "center"
                        content.style.height = "89%"
                        const loading = document.createElement("img")
                        loading.src = "/public/load.svg"
                        loading.alt = "Bitte warten.."
                        loading.style.width = "55px"
                        content.append(loading)
                        overlay.append(content)


                        {
                          const get = {}
                          get.url = "/get/offer/closed/3/"
                          get.platformName = platform.name
                          get.localStorageEmail = await Request.email()
                          get.localStorageId = await Request.localStorageId()
                          get.location = window.location.href
                          get.referer = document.referrer
                          const res = await Request.middleware(get)

                          if (res.status !== 200) {
                            alert("Im Moment gibt es keine Angebote zu prüfen.")
                            Helper.removeOverlay(overlay)
                            throw new Error("offer not found")
                          }

                          if (res.status === 200) {
                            const offers = JSON.parse(res.response)
                            console.log(offers);


                            if (offers.length === 0) {
                              alert("Im Moment gibt es keine Angebote zu prüfen.")
                              Helper.removeOverlay(overlay)
                              throw new Error("offer not found")
                            }



                            content.innerHTML = ""
                            content.removeAttribute("style")
                            content.style.overflowY = "auto"
                            content.style.paddingBottom = "144px"
                            for (let i = 0; i < offers.length; i++) {
                              const get = offers[i]

                              const box = document.createElement("div")
                              box.style.backgroundColor = "white"
                              box.style.borderRadius = "13px"
                              box.style.margin = "34px"
                              box.style.padding = "34px"
                              box.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                              box.style.border = "0.3px solid black"

                              const logo = document.createElement("img")
                              logo.src = get.company.logo.dataUrl
                              logo.alt = "Logo"
                              logo.style.width = "55px"
                              box.append(logo)

                              const rightAlign = document.createElement("div")
                              rightAlign.style.textAlign = "right"

                              const companyName = document.createElement("div")
                              companyName.innerHTML = get.company.name
                              companyName.style.fontSize = "21px"
                              rightAlign.append(companyName)

                              const reputation = document.createElement("div")
                              reputation.innerHTML = `Ruf: ${get.reputation}`
                              reputation.style.fontSize = "13px"
                              rightAlign.append(reputation)

                              box.append(rightAlign)

                              const website = document.createElement("div")
                              website.style.display = "flex"
                              website.style.alignItems = "center"

                              const websiteIcon = document.createElement("img")
                              websiteIcon.src = "/felix/shs/public/website-icon.svg"
                              websiteIcon.alt = "Website Icon"

                              const websiteText = document.createElement("a")
                              websiteText.innerHTML = "Website"
                              websiteText.href = get.company.website
                              websiteText.target = "_blank"
                              websiteText.style.textDecoration = "underline"
                              websiteText.style.margin = "8px"
                              websiteText.style.cursor = "pointer"
                              website.append(websiteIcon, websiteText)
                              box.append(website)

                              const product = document.createElement("div")
                              product.innerHTML = get.offer.title
                              product.style.margin = "21px 0"
                              product.style.fontSize = "21px"
                              box.append(product)

                              const description = document.createElement("div")
                              description.innerHTML = get.offer.description
                              description.style.marginTop = "13px"
                              box.append(description)


                              if (get.offer.productPdf !== undefined) {
                                const button = document.createElement("div")
                                button.style.display = "flex"
                                button.style.margin = "21px 0"
                                button.style.alignItems = "center"
                                button.style.cursor = "pointer"
                                button.addEventListener("click", () => {
                                  const a = document.createElement("a")
                                  a.href = get.offer.productPdf.dataUrl
                                  a.target = "_blank"
                                  a.dispatchEvent(new MouseEvent('click'))
                                })

                                const img = document.createElement("img")
                                img.src = "/public/pdf.svg"
                                img.alt = "PDF"
                                img.style.marginRight = "13px"

                                const title = document.createElement("div")
                                title.innerHTML = "Produkt"

                                button.append(img, title)
                                box.append(button)
                              }

                              if (get.offer.companyPdf !== undefined) {
                                const button = document.createElement("div")
                                button.style.display = "flex"
                                button.style.margin = "21px 0"
                                button.style.alignItems = "center"
                                button.style.cursor = "pointer"
                                button.addEventListener("click", () => {
                                  const a = document.createElement("a")
                                  a.href = get.offer.companyPdf.dataUrl
                                  a.target = "_blank"
                                  a.dispatchEvent(new MouseEvent('click'))
                                })

                                const img = document.createElement("img")
                                img.src = "/public/pdf.svg"
                                img.alt = "PDF"
                                img.style.marginRight = "13px"

                                const title = document.createElement("div")
                                title.innerHTML = "Unternehmen"

                                button.append(img, title)
                                box.append(button)
                              }

                              if (get.offer.termsPdf !== undefined) {
                                const button = document.createElement("div")
                                button.style.display = "flex"
                                button.style.margin = "21px 0"
                                button.style.alignItems = "center"
                                button.style.cursor = "pointer"
                                button.addEventListener("click", () => {
                                  const a = document.createElement("a")
                                  a.href = get.offer.termsPdf.dataUrl
                                  a.target = "_blank"
                                  a.dispatchEvent(new MouseEvent('click'))
                                })

                                const img = document.createElement("img")
                                img.src = "/public/pdf.svg"
                                img.alt = "PDF"
                                img.style.marginRight = "13px"

                                const title = document.createElement("div")
                                title.innerHTML = "AGB"

                                button.append(img, title)
                                box.append(button)
                              }





                              const alignContainer = document.createElement("div")
                              alignContainer.style.display = "flex"
                              alignContainer.style.justifyContent = "flex-end"

                              const priceContainer = document.createElement("div")
                              priceContainer.style.width = "300px"
                              priceContainer.style.marginTop = "21px"

                              const priceTitle = document.createElement("div")
                              priceTitle.innerHTML = "Preisübersicht"
                              priceTitle.style.fontSize = "21px"
                              priceTitle.style.margin = "21px 0"
                              priceContainer.append(priceTitle)




                              const netContainer = document.createElement("div")
                              netContainer.style.display = "flex"
                              netContainer.style.justifyContent = "space-between"
                              netContainer.style.margin = "13px 0"

                              const priceNetTitle = document.createElement("div")
                              priceNetTitle.innerHTML = "Nettobetrag"

                              const priceNetAmount = document.createElement("div")
                              let netAmount = 0
                              for (let i = 0; i < get.offer.services.length; i++) {
                                const service = get.offer.services[i]
                                if (service.selected === true) {
                                  netAmount = netAmount + Number(service.price)
                                }
                              }
                              priceNetAmount.innerHTML = `${netAmount.toFixed(2).replace(".", ",")} €`

                              netContainer.append(priceNetTitle, priceNetAmount)

                              priceContainer.append(netContainer)



                              const vatContainer = document.createElement("div")
                              vatContainer.style.display = "flex"
                              vatContainer.style.justifyContent = "space-between"
                              vatContainer.style.margin = "13px 0"


                              const priceVatTitle = document.createElement("div")
                              priceVatTitle.innerHTML = `USt. ${Number(get.offer.vat).toFixed(2).replace(".", ",")} %`

                              const priceVatAmount = document.createElement("div")
                              priceVatAmount.innerHTML = `${(netAmount * (Number(get.offer.vat) / 100)).toFixed(2).replace(".", ",")} €`

                              vatContainer.append(priceVatTitle, priceVatAmount)

                              priceContainer.append(vatContainer)

                              const line = document.createElement("hr")

                              priceContainer.append(line)


                              const grossContainer = document.createElement("div")
                              grossContainer.style.display = "flex"
                              grossContainer.style.justifyContent = "space-between"
                              grossContainer.style.margin = "21px 0"

                              const priceGrossTitle = document.createElement("div")
                              priceGrossTitle.innerHTML = "Gesamt"

                              const priceGrossAmount = document.createElement("div")
                              priceGrossAmount.innerHTML = `${(netAmount * (1 + (Number(get.offer.vat) / 100))).toFixed(2).replace(".", ",")} €`

                              grossContainer.append(priceGrossTitle, priceGrossAmount)

                              priceContainer.append(grossContainer)


                              const button = document.createElement("div")
                              button.innerHTML = "Mehr"
                              button.style.marginTop = "34px"
                              button.style.height = "55px"
                              button.style.backgroundColor = "#f7aa20"
                              button.style.borderRadius = "13px"
                              button.style.display = "flex"
                              button.style.justifyContent = "center"
                              button.style.alignItems = "center"
                              button.style.cursor = "pointer"

                              button.addEventListener("click", () => {

                                Helper.popup(overlay => {
                                  {
                                    const header = document.createElement("div")
                                    header.style.position = "fixed"
                                    header.style.bottom = "0"
                                    header.style.left = "0"
                                    header.style.width = "100%"
                                    header.style.display = "flex"
                                    header.style.justifyContent = "flex-start"
                                    header.style.alignItems = "center"
                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                    header.style.background = "white"
                                    header.style.cursor = "pointer"
                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                    const logo = document.createElement("img")
                                    logo.src = platform.logo
                                    logo.alt = platform.name
                                    logo.style.width = "55px"
                                    logo.style.margin = "21px 34px"
                                    header.append(logo)
                                    const title = document.createElement("div")
                                    title.innerHTML = `Angebot von ${get.company.name}`
                                    title.style.fontWeight = "bold"
                                    title.style.fontSize = "21px"
                                    header.append(title)
                                    overlay.append(header)
                                  }

                                  const buttons = document.createElement("div")
                                  buttons.style.overflowY = "auto"
                                  buttons.style.paddingBottom = "144px"


                                  {
                                    const button = document.createElement("div")
                                    button.style.display = "flex"
                                    button.style.flexWrap = "wrap"
                                    button.style.justifyContent = "space-between"
                                    button.style.alignItems = "center"
                                    button.style.margin = "21px 34px"
                                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                    button.style.borderRadius = "13px"
                                    button.style.border = "0.3px solid black"
                                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                    button.style.cursor = "pointer"
                                    button.addEventListener("click", () => {
                                      const a = document.createElement("a")
                                      a.href = `tel:${get.owner.phone}`
                                      a.dispatchEvent(new MouseEvent('click'))
                                    })

                                    const icon = document.createElement("img")
                                    icon.style.margin = "13px 34px"
                                    icon.style.width = "34px"
                                    icon.src = "/public/phone-out.svg"
                                    icon.alt = "Anrufen"
                                    button.append(icon)

                                    const title = document.createElement("div")
                                    title.innerHTML = "Anrufen"
                                    title.style.margin = "21px 34px"
                                    title.style.fontSize = "21px"
                                    button.append(title)

                                    buttons.append(button)
                                  }

                                  {
                                    const button = document.createElement("div")
                                    button.style.display = "flex"
                                    button.style.flexWrap = "wrap"
                                    button.style.justifyContent = "space-between"
                                    button.style.alignItems = "center"
                                    button.style.margin = "21px 34px"
                                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                    button.style.borderRadius = "13px"
                                    button.style.border = "0.3px solid black"
                                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                    button.style.cursor = "pointer"
                                    button.addEventListener("click", () => {
                                      const a = document.createElement("a")
                                      a.href = `mailto:${get.email}`
                                      a.dispatchEvent(new MouseEvent('click'))
                                    })

                                    const icon = document.createElement("img")
                                    icon.style.margin = "13px 34px"
                                    icon.style.width = "34px"
                                    icon.src = "/public/email-out.svg"
                                    icon.alt = "Anrufen"
                                    button.append(icon)

                                    const title = document.createElement("div")
                                    title.innerHTML = "E-Mail senden"
                                    title.style.margin = "21px 34px"
                                    title.style.fontSize = "21px"
                                    button.append(title)

                                    buttons.append(button)
                                  }

                                  {
                                    const button = document.createElement("div")
                                    button.style.display = "flex"
                                    button.style.flexWrap = "wrap"
                                    button.style.justifyContent = "space-between"
                                    button.style.alignItems = "center"
                                    button.style.margin = "21px 34px"
                                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                    button.style.borderRadius = "13px"
                                    button.style.border = "0.3px solid black"
                                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                    button.style.cursor = "pointer"
                                    button.addEventListener("click", () => {

                                      Helper.popup(async overlay => {

                                        const header = document.createElement("div")
                                        header.style.position = "fixed"
                                        header.style.bottom = "0"
                                        header.style.left = "0"
                                        header.style.width = "100%"
                                        header.style.display = "flex"
                                        header.style.justifyContent = "flex-start"
                                        header.style.alignItems = "center"
                                        header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                        header.style.background = "white"
                                        header.style.zIndex = "1"
                                        header.style.cursor = "pointer"
                                        header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                        const logo = document.createElement("img")
                                        logo.src = platform.logo
                                        logo.alt = platform.name
                                        logo.style.width = "55px"
                                        logo.style.margin = "21px 34px"
                                        header.append(logo)
                                        const title = document.createElement("div")
                                        title.innerHTML = "Angebot prüfen"
                                        title.style.fontWeight = "bold"
                                        title.style.fontSize = "21px"
                                        header.append(title)
                                        overlay.append(header)


                                        const content = document.createElement("div")
                                        content.style.overflowY = "auto"
                                        content.style.paddingBottom = "144px"

                                        {
                                          const title = document.createElement("div")
                                          title.innerHTML = "Besitzerdaten"
                                          title.style.margin = "21px 34px 0 34px"
                                          title.style.fontSize = "21px"
                                          content.append(title)
                                        }

                                        {
                                          const hr = document.createElement("hr")
                                          hr.style.margin = "0 34px"
                                          content.append(hr)
                                        }

                                        {
                                          const owner = document.createElement("div")
                                          owner.style.margin = "21px 34px"
                                          owner.innerHTML = `
                                            ${get.owner.firstname} ${get.owner.lastname}<br/>
                                            ${get.owner.street}<br/>
                                            ${get.owner.zip}<br/>
                                            ${get.owner.state}<br/>
                                            ${get.owner.country}<br/>
                                          `
                                          content.append(owner)
                                        }

                                        {
                                          const title = document.createElement("div")
                                          title.innerHTML = "Unternehmensdaten"
                                          title.style.margin = "21px 34px 0 34px"
                                          title.style.fontSize = "21px"
                                          content.append(title)
                                        }

                                        {
                                          const hr = document.createElement("hr")
                                          hr.style.margin = "0 34px"
                                          content.append(hr)
                                        }

                                        {
                                          const company = document.createElement("div")
                                          company.style.margin = "21px 34px"
                                          company.innerHTML = `
                                            ${get.company.name}<br/>
                                            ${get.company.sector}<br/>
                                            <a href="${get.company.website}" target="_blank">${get.company.website}</a>
                                          `
                                          content.append(company)
                                        }

                                        {
                                          const title = document.createElement("div")
                                          title.innerHTML = "Angebotsdaten"
                                          title.style.margin = "21px 34px 0 34px"
                                          title.style.fontSize = "21px"
                                          content.append(title)
                                        }

                                        {
                                          const hr = document.createElement("hr")
                                          hr.style.margin = "0 34px"
                                          content.append(hr)
                                        }

                                        {
                                          const offer = document.createElement("div")
                                          offer.style.margin = "21px 34px"
                                          offer.innerHTML = `
                                            ${get.offer.tag}<br/>
                                            Rabatt: ${get.offer.discount}<br/>
                                            Steuer: ${Number(get.offer.vat)}<br/>
                                            <a href="${get.offer.productPdf.dataUrl}" target="_blank">${get.offer.productPdf.name}</a><br/>
                                            <a href="${get.offer.companyPdf.dataUrl}" target="_blank">${get.offer.companyPdf.name}</a><br/>
                                            <a href="${get.offer.termsPdf.dataUrl}" target="_blank">${get.offer.termsPdf.name}</a><br/>
                                            Bitte Beachten: ${get.offer.notes}<br/>
                                          `
                                          content.append(offer)
                                        }

                                        {
                                          const title = document.createElement("div")
                                          title.innerHTML = "Dienste"
                                          title.style.margin = "21px 34px 0 34px"
                                          title.style.fontSize = "21px"
                                          content.append(title)
                                        }

                                        {
                                          const hr = document.createElement("hr")
                                          hr.style.margin = "0 34px"
                                          content.append(hr)
                                        }

                                        for (let i = 0; i < get.offer.services.length; i++) {
                                          const service = get.offer.services[i]

                                          const item = document.createElement("div")
                                          item.style.margin = "0 34px"
                                          item.style.height = "34px"
                                          item.style.display = "flex"
                                          item.style.alignItems = "center"
                                          item.style.justifyContent = "space-between"


                                          const name = document.createElement("div")
                                          name.innerHTML = service.name
                                          item.append(name)

                                          const price = document.createElement("div")
                                          price.innerHTML = `${Number(service.price).toFixed(2).replace(".", ",")} €`
                                          item.append(price)

                                          const selected = document.createElement("input")
                                          selected.type = "checkbox"
                                          selected.checked = service.selected
                                          selected.disabled = true
                                          price.append(selected)

                                          content.append(item)
                                        }

                                        {
                                          const title = document.createElement("div")
                                          title.innerHTML = "Status"
                                          title.style.margin = "21px 34px 0 34px"
                                          title.style.fontSize = "21px"
                                          content.append(title)
                                        }

                                        {
                                          const hr = document.createElement("hr")
                                          hr.style.margin = "0 34px"
                                          content.append(hr)
                                        }


                                        const status = document.createElement("div")
                                        if (get.offer.verified !== undefined) {
                                          status.style.margin = "21px 34px"
                                          status.innerHTML = `
                                            Status: ${get.offer.verified.status}<br/>
                                            Grund: ${get.offer.verified.reason}<br/>
                                          `

                                          if (get.offer.verified.reason === "offer changed") {
                                            status.innerHTML = `
                                              Status: ${get.offer.verified.status}<br/>
                                              Grund: Angebot wurde verändert<br/>
                                            `
                                          }

                                          content.append(status)
                                        } else {
                                          status.style.margin = "21px 34px"
                                          status.innerHTML = `
                                            Status: 404<br/>
                                            Grund: Experte muss das Angebot prüfen und freigeben.<br/>
                                          `
                                          content.append(status)
                                        }

                                        const options = ["Nicht OK", "OK"]
                                        const verifiedStatusField = new SelectionField("verifiedStatus", content)
                                        verifiedStatusField.label.innerHTML = "Status"
                                        for (let i = 0; i < options.length; i++) {
                                          const option = document.createElement("option")
                                          option.value = options[i]
                                          option.text = options[i]
                                          verifiedStatusField.select.append(option)
                                        }
                                        Helper.setValidStyle(verifiedStatusField.select)


                                        const verifiedReasonField = new TextAreaField("verifiedReason", content)
                                        verifiedReasonField.label.innerHTML = "Grund"
                                        verifiedReasonField.input.maxLength = "89"
                                        verifiedReasonField.input.style.height = "89px"
                                        verifiedReasonField.input.required = true
                                        verifiedReasonField.input.placeholder = "Es fehlen noch folgende Informationen.."
                                        verifiedReasonField.input.addEventListener("input", (event) => {
                                          verifiedReasonField.withValidValue()
                                        })
                                        Helper.setNotValidStyle(verifiedReasonField.input)


                                        {
                                          const button = document.createElement("div")
                                          button.innerHTML = "Status senden"
                                          button.style.backgroundColor = "#c02221"
                                          button.style.cursor = "pointer"
                                          button.style.fontSize = "21px"
                                          button.style.borderRadius = "13px"
                                          button.style.margin = "13px 34px"
                                          button.style.display = "flex"
                                          button.style.justifyContent = "center"
                                          button.style.alignItems = "center"
                                          button.style.height = "89px"
                                          button.style.color = "#fff"

                                          button.addEventListener("click", async () => {

                                            let status
                                            let reason
                                            try {
                                              status = (await verifiedStatusField.withValidValue())[0].value
                                              if (status === "OK") {
                                                status = 200
                                              }
                                              if (status === "Nicht OK") {
                                                status = 500
                                              }

                                              reason = await verifiedReasonField.withValidValue()
                                            } catch (error) {
                                              alert(`Feld '${error.fieldName}' ist notwendig.`)
                                              document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                                              throw new Error(error)
                                            }


                                            try {
                                              Helper.addOverlay()
                                              Helper.setWaitCursor()
                                              {
                                                const register = {}
                                                register.url = "/register/offer/closed/3/"
                                                register.type = "verified"
                                                register.email = get.email
                                                register.status = status
                                                register.reason = reason
                                                register.localStorageId = await Request.localStorageId()
                                                register.localStorageEmail = await Request.email()
                                                register.location = window.location.href
                                                register.referer = document.referrer
                                                const res = await Request.middleware(register)

                                                if (res.status === 200) {
                                                  alert("Status erfolgreich gesendet..")
                                                }
                                              }
                                            } catch (error) {
                                              alert("Fehler.. Bitte wiederholen.")
                                            }
                                            window.location.reload()
                                          })
                                          content.append(button)
                                        }

                                        overlay.append(content)
                                      })
                                    })

                                    const icon = document.createElement("img")
                                    icon.style.margin = "13px 34px"
                                    icon.style.width = "34px"
                                    icon.src = "/public/verify.svg"
                                    icon.alt = "Prüfen"
                                    button.append(icon)

                                    const title = document.createElement("div")
                                    title.innerHTML = "Angebot prüfen"
                                    title.style.margin = "21px 34px"
                                    title.style.fontSize = "21px"
                                    button.append(title)

                                    buttons.append(button)
                                  }

                                  {
                                    const button = document.createElement("div")
                                    button.style.display = "flex"
                                    button.style.flexWrap = "wrap"
                                    button.style.justifyContent = "space-between"
                                    button.style.alignItems = "center"
                                    button.style.margin = "21px 34px"
                                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                    button.style.borderRadius = "13px"
                                    button.style.border = "0.3px solid black"
                                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                    button.style.cursor = "pointer"
                                    button.addEventListener("click", () => {

                                      Helper.popup(async overlay => {

                                        const header = document.createElement("div")
                                        header.style.position = "fixed"
                                        header.style.bottom = "0"
                                        header.style.left = "0"
                                        header.style.width = "100%"
                                        header.style.display = "flex"
                                        header.style.justifyContent = "space-between"
                                        header.style.alignItems = "center"
                                        header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                        header.style.background = "white"
                                        header.style.zIndex = "1"

                                        const logo = document.createElement("img")
                                        logo.src = platform.logo
                                        logo.alt = platform.name
                                        logo.style.width = "55px"
                                        logo.style.margin = "21px 34px"
                                        logo.style.cursor = "pointer"
                                        logo.addEventListener("click", () => Helper.removeOverlay(overlay))
                                        header.append(logo)

                                        {
                                          const form = document.createElement("div")
                                          form.style.display = "flex"
                                          form.style.justifyContent = "flex-end"
                                          form.style.alignItems = "center"
                                          form.style.marginRight = "34px"
                                          form.style.width = "89%"

                                          const input = document.createElement("input")
                                          input.type = "text"
                                          input.style.width = "100%"
                                          input.style.height = "21px"
                                          input.maxLength = "55"
                                          input.placeholder = "Feedback zum Angebot.."
                                          input.addEventListener("keyup", (event) => {
                                            if (event.key === "Enter") {
                                              document.querySelector(".submit-feedback").dispatchEvent(new MouseEvent("click"))
                                            }
                                          })
                                          form.append(input)

                                          const button = document.createElement("img")
                                          button.classList.add("submit-feedback")
                                          button.src = "/public/send.svg"
                                          button.alt = "Senden"
                                          button.style.width = "34px"
                                          button.style.marginLeft = "13px"
                                          button.style.cursor = "pointer"
                                          button.addEventListener("click", async () => {

                                            try {
                                              const securityOverlay = Helper.addOverlay()
                                              Helper.setWaitCursor()
                                              const register = {}
                                              register.url = "/register/feedback/closed/3/"
                                              register.email = get.email
                                              register.value = input.value
                                              register.localStorageEmail = await Request.email()
                                              register.localStorageId = await Request.localStorageId()
                                              register.location = window.location.href
                                              register.referer = document.referrer
                                              await Request.sequence(register)


                                              const getFeedback = {}
                                              getFeedback.url = "/get/offer/closed/3/"
                                              getFeedback.email = get.email
                                              getFeedback.localStorageEmail = await Request.email()
                                              getFeedback.localStorageId = await Request.localStorageId()
                                              getFeedback.location = window.location.href
                                              getFeedback.referer = document.referrer
                                              const res = await Request.middleware(getFeedback)

                                              if (res.status !== 200) {
                                                const content = document.querySelector(".feedback-list")
                                                content.removeAttribute("style")
                                                content.innerHTML = ""
                                                content.style.display = "flex"
                                                content.style.justifyContent = "center"
                                                content.style.alignItems = "center"
                                                content.style.color = "gray"
                                                content.style.height = "89vh"
                                                content.innerHTML = "Feedbacks konnten nicht geladen werden."
                                                overlay.append(content)
                                                throw new Error("feedback not found")
                                              }

                                              if (res.status === 200) {
                                                const feedbacks = JSON.parse(res.response)

                                                if (feedbacks.length === 0) {
                                                  const content = document.querySelector(".feedback-list")
                                                  content.removeAttribute("style")
                                                  content.innerHTML = ""
                                                  content.style.display = "flex"
                                                  content.style.justifyContent = "center"
                                                  content.style.alignItems = "center"
                                                  content.style.color = "gray"
                                                  content.style.height = "89vh"
                                                  content.innerHTML = "Kein Feedback vorhanden."
                                                  overlay.append(content)
                                                  throw new Error("feedback is empty")
                                                }

                                                const content = document.querySelector(".feedback-list")
                                                content.innerHTML = ""
                                                for (let i = 0; i < feedbacks.length; i++) {
                                                  const feedback = feedbacks[i]
                                                  const p = document.createElement("p")
                                                  p.style.margin = "21px 34px"
                                                  if (feedback.owner === await Request.localStorageId()) {
                                                    p.innerHTML = `-> ${feedback.value}`
                                                  } else {
                                                    p.innerHTML = `<- ${feedback.value}`
                                                  }
                                                  content.append(p)
                                                }
                                                overlay.append(content)
                                              }

                                              Helper.removeOverlay(securityOverlay)

                                            } catch (error) {
                                              alert("Fehler.. Bitte wiederholen.")
                                              window.location.reload()
                                            }


                                          })
                                          form.append(button)

                                          header.append(form)
                                        }


                                        overlay.append(header)

                                        const content = document.createElement("div")
                                        content.classList.add("feedback-list")
                                        content.style.paddingBottom = "144px"
                                        content.style.overflow = "auto"
                                        content.style.display = "flex"
                                        content.style.justifyContent = "center"
                                        content.style.alignItems = "center"
                                        content.style.height = "89%"
                                        const loading = document.createElement("img")
                                        loading.src = "/public/load.svg"
                                        loading.alt = "Bitte warten.."
                                        loading.style.width = "55px"
                                        content.append(loading)
                                        overlay.append(content)

                                        const getFeedback = {}
                                        getFeedback.url = "/get/offer/closed/3/"
                                        getFeedback.email = get.email
                                        getFeedback.localStorageEmail = await Request.email()
                                        getFeedback.localStorageId = await Request.localStorageId()
                                        getFeedback.location = window.location.href
                                        getFeedback.referer = document.referrer
                                        const res = await Request.middleware(getFeedback)

                                        if (res.status !== 200) {
                                          const content = document.querySelector(".feedback-list")
                                          content.removeAttribute("style")
                                          content.innerHTML = ""

                                          content.style.display = "flex"
                                          content.style.justifyContent = "center"
                                          content.style.alignItems = "center"
                                          content.style.color = "gray"
                                          content.style.height = "89vh"
                                          content.innerHTML = "Feedbacks konnten nicht geladen werden."
                                          throw new Error("feedback not found")
                                        }

                                        if (res.status === 200) {
                                          const feedbacks = JSON.parse(res.response)

                                          if (feedbacks.length === 0) {
                                            const content = document.querySelector(".feedback-list")
                                            content.removeAttribute("style")
                                            content.innerHTML = ""

                                            content.style.display = "flex"
                                            content.style.justifyContent = "center"
                                            content.style.alignItems = "center"
                                            content.style.color = "gray"
                                            content.style.height = "89vh"
                                            content.innerHTML = "Kein Feedback vorhanden."
                                            throw new Error("feedback is empty")
                                          }

                                          const content = document.querySelector(".feedback-list")
                                          content.removeAttribute("style")
                                          content.innerHTML = ""

                                          content.style.overflowY = "auto"
                                          content.style.paddingBottom = "144px"
                                          for (let i = 0; i < feedbacks.length; i++) {
                                            const feedback = feedbacks[i]
                                            const p = document.createElement("p")
                                            p.style.margin = "21px 34px"
                                            if (feedback.owner === await Request.localStorageId()) {
                                              p.innerHTML = `-> ${feedback.value}`
                                            } else {
                                              p.innerHTML = `<- ${feedback.value}`
                                            }
                                            content.append(p)
                                          }
                                        }


                                      })
                                    })

                                    const icon = document.createElement("img")
                                    icon.style.margin = "13px 34px"
                                    icon.style.width = "34px"
                                    icon.src = "/public/feedback.svg"
                                    icon.alt = "Feedback"
                                    button.append(icon)

                                    const title = document.createElement("div")
                                    title.innerHTML = "Feedback zum Angebot"
                                    title.style.margin = "21px 34px"
                                    title.style.fontSize = "21px"
                                    button.append(title)

                                    buttons.append(button)
                                  }


                                  overlay.append(buttons)
                                })


                              })


                              priceContainer.append(button)
                              alignContainer.append(priceContainer)
                              box.append(alignContainer)
                              content.append(box)


                            }


                          }



                        }


                      })

                    })

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/offer.svg"
                    icon.alt = "Angebote"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Angebote"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)

                    buttons.append(button)
                  }

                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"

                    button.addEventListener("click", async () => {

                      try {
                        Helper.addOverlay()
                        Helper.setWaitCursor()
                        const confirm = window.confirm("Möchtest du die Plattform wirklich löschen? Alle enthaltenen Dokumente werden ebenfalls gelöscht.")
                        if (confirm === true) {
                          {
                            const del = {}
                            del.url = "/delete/platform/closed/3/"
                            del.name = platform.name
                            del.localStorageId = await Request.localStorageId()
                            del.localStorageEmail = await Request.email()
                            del.location = window.location.href
                            del.referer = document.referrer
                            await Request.sequence(del)
                          }
                          alert("Plattform erfolgreich gelöscht.")
                        }
                      } catch (error) {
                        alert("Fehler.. Bitte wiederholen.")
                      }
                      window.location.reload()


                    })

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/delete.svg"
                    icon.alt = "Löschen"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Löschen"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)

                    buttons.append(button)
                  }


                  overlay.append(buttons)
                })

              })


              {
                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "55px"
                icon.src = platform.logo
                icon.alt = platform.name
                button.append(icon)
              }

              {
                const title = document.createElement("h2")
                title.style.margin = "13px 34px"
                title.style.fontWeight = "normal"
                title.innerHTML = platform.name
                button.append(title)
              }

              platformButtonList.append(button)
            }

          }




        }

      }



    </script>

  </body>
</html>
