<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>SHS Funnel Abfrage Haus</title>

    <style>
      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
      }
    </style>


  </head>
  <body>


    <header></header>


    <h1 class="house-title"></h1>

    <div class="hausBaujahr"></div>
    <div class="hausUmbau"></div>
    <div class="hausEtage"></div>
    <div class="hausFlaeche"></div>
    <div class="hausKabelfuehrungDC"></div>
    <div class="hausVerkabelungDC"></div>
    <div class="hausAussenfasadeGedaemmt"></div>
    <div class="hausDenkmal"></div>
    <div class="hausEnergieVorhanden"></div>
    <div class="hausEnergieSystemEntsorgen"></div>
    <div class="hausLager"></div>
    <div class="hausDacheindeckung"></div>
    <div class="hausUKUeberstand"></div>
    <div class="hausAnderesHausAbstand"></div>
    <div class="hausEntlueftungsrohre"></div>
    <div class="hausBlitzschutzanlage"></div>
    <div class="hausDachaufbauten"></div>


    <h2 class="rafter-spacing-title"></h2>

    <div class="hausAbstandSparren"></div>
    <div class="hausSparrenBreite"></div>
    <div class="hausSparrenHoehe"></div>
    <div class="hausMaterialSparren"></div>


    <h2 class="scaffold-title"></h2>

    <div class="hausGeruestOeffentlich"></div>
    <div class="hausGeruestSelbstGestellt"></div>
    <div class="hausVerankerung"></div>
    <div class="hausGeruestAufstellungNord"></div>
    <div class="hausGeruestAufstellungSued"></div>
    <div class="hausGeruestAufstellungOst"></div>
    <div class="hausGeruestAufstellungWest"></div>


    <h2 class="building-dimensions-title"></h2>

    <div class="hausBreite"></div>
    <div class="hausLaenge"></div>
    <div class="hausGeruestAnzahl"></div>
    <div class="hausGesamtGeruestFlaeche"></div>


    <h2 class="flatroof-title"></h2>

    <div class="hausAttikaVorhanden"></div>
    <div class="hausAttikaBreite"></div>
    <div class="hausAttikaHoehe"></div>
    <div class="hausGradzahlFlachdach"></div>
    <div class="hausFlachdachNeigungBekannt"></div>


    <h2 class="alignment-flatroof-title"></h2>

    <div class="hausFlachdachNordAusrichtung"></div>
    <div class="hausFlachdachOstAusrichtung"></div>
    <div class="hausFlachdachSuedAusrichtung"></div>
    <div class="hausFlachdachWestAusrichtung"></div>


    <h2 class="trapezoid-roof-title"></h2>

    <div class="hausAluStaerke"></div>
    <div class="hausStahlStaerke"></div>
    <div class="hausIstIcopal"></div>


    <h2 class="house-dimensions-title"></h2>

    <div class="hausTraufhoehe"></div>
    <div class="hausDachBreite"></div>
    <div class="hausDachLaenge"></div>
    <div class="hausFirstHoehe"></div>
    <div class="hausDachAusrichtung"></div>
    <div class="hausDachneigung"></div>


    <h2 class="upload-title"></h2>

    <div class="hausFrontBild"></div>
    <div class="hausSuedAnsichtBild"></div>
    <div class="hausGeruestStandortBild"></div>
    <div class="hausOrtgangBild"></div>
    <div class="hausSparrenAnsichtBild"></div>


    <h2 class="brick-title"></h2>

    <div class="hausZiegelBild"></div>
    <div class="hausDeckmassLaenge"></div>
    <div class="hausDeckmassBreite"></div>
    <div class="hausErsatzZiegel"></div>



    <div class="save-and-proceed-button"></div>

    <footer></footer>


    <script type="module">
      import { HeaderField } from "/js/HeaderField.js"
      import { CheckboxField } from "/js/CheckboxField.js"
      import { DivField } from "/js/DivField.js"
      import { FileField } from "/js/FileField.js"
      import { Helper } from "/js/Helper.js"
      import { NumberField } from "/js/NumberField.js"
      import { SelectionField } from "/js/SelectionField.js"
      import { Request } from "/js/Request.js"

      const funnel = JSON.parse(window.localStorage.getItem("shsFunnel"))
      if (
        funnel === null ||
        funnel.value === undefined ||
        funnel.questionIndex < funnel.questions.length - 1
        ) {
        window.location.assign("/felix/shs/qualifizierung/")
        throw new Error("funnel not found")
      }




      const header = document.querySelector("header")
      header.style.display = "flex"
      header.style.flexDirection = "column"
      header.style.justifyContent = "space-between"

      const headerLogo = document.createElement("img")
      headerLogo.src = "/felix/shs/public/shslogo.png"
      headerLogo.alt = "SHS Express Logo"
      headerLogo.style.margin = "8px 34px"
      headerLogo.style.width = "144px"
      headerLogo.style.cursor = "pointer"
      headerLogo.addEventListener("click", () => window.history.back())
      header.append(headerLogo)


      const navContainer = document.createElement("div")
      navContainer.style.display = "flex"
      navContainer.style.justifyContent = "space-evenly"
      navContainer.style.boxShadow = "0 3px 5px rgba(0, 0, 0, 0.13)"

      const button1 = document.createElement("div")
      button1.classList.add("button-1")
      button1.style.display = "flex"
      button1.style.flexDirection = "column"
      button1.style.alignItems = "center"
      button1.style.justifyContent = "center"
      button1.style.width = "89px"
      button1.style.margin = "13px"
      button1.style.cursor = "pointer"
      button1.addEventListener("click", async() => await checkAndProceed("/felix/shs/abfrage-haus/"))

      const title1 = document.createElement("div")
      title1.innerHTML = "Haus"
      button1.append(title1)

      const index1 = document.createElement("div")
      index1.innerHTML = "1"
      index1.style.color = "white"

      const state1 = document.createElement("div")
      state1.style.display = "flex"
      state1.style.justifyContent = "center"
      state1.style.alignItems = "center"
      state1.style.width = "55px"
      state1.style.height = "34px"
      state1.style.margin = "13px 0"
      state1.style.backgroundColor = "#cfd4e2"
      state1.style.backgroundColor = "#11841e"
      button1.append(state1)

      state1.append(index1)

      navContainer.append(button1)


      const button2 = document.createElement("div")
      button2.classList.add("button-1")
      button2.style.display = "flex"
      button2.style.flexDirection = "column"
      button2.style.justifyContent = "center"
      button2.style.alignItems = "center"
      button2.style.width = "89px"
      button2.style.margin = "13px"
      button2.style.cursor = "pointer"
      button2.addEventListener("click", async() => await checkAndProceed("/felix/shs/abfrage-heizung/"))

      const title2 = document.createElement("div")
      title2.innerHTML = "Heizung"
      button2.append(title2)

      const index2 = document.createElement("div")
      index2.innerHTML = "2"

      const state2 = document.createElement("div")
      state2.style.display = "flex"
      state2.style.justifyContent = "center"
      state2.style.alignItems = "center"
      state2.style.width = "55px"
      state2.style.height = "34px"
      state2.style.margin = "13px 0"
      state2.style.backgroundColor = "#cfd4e2"
      button2.append(state2)

      state2.append(index2)

      navContainer.append(button2)



      const button3 = document.createElement("div")
      button3.classList.add("button-1")
      button3.style.display = "flex"
      button3.style.flexDirection = "column"
      button3.style.justifyContent = "center"
      button3.style.alignItems = "center"
      button3.style.width = "89px"
      button3.style.margin = "13px"
      button3.style.cursor = "pointer"
      button3.addEventListener("click", async() => await checkAndProceed("/felix/shs/abfrage-strom/"))

      const title3 = document.createElement("div")
      title3.innerHTML = "Strom"
      button3.append(title3)

      const index3 = document.createElement("div")
      index3.innerHTML = "3"

      const state3 = document.createElement("div")
      state3.style.display = "flex"
      state3.style.justifyContent = "center"
      state3.style.alignItems = "center"
      state3.style.width = "55px"
      state3.style.height = "34px"
      state3.style.margin = "13px 0"
      state3.style.backgroundColor = "#cfd4e2"
      button3.append(state3)

      state3.append(index3)

      navContainer.append(button3)



      const button4 = document.createElement("div")
      button4.classList.add("button-1")
      button4.style.display = "flex"
      button4.style.flexDirection = "column"
      button4.style.justifyContent = "center"
      button4.style.alignItems = "center"
      button4.style.width = "89px"
      button4.style.margin = "13px"
      button4.style.cursor = "pointer"
      button4.addEventListener("click", async() => await checkAndProceed("/felix/shs/abfrage-technisches/"))

      const title4 = document.createElement("div")
      title4.innerHTML = "Technisches"
      button4.append(title4)

      const index4 = document.createElement("div")
      index4.innerHTML = "4"

      const state4 = document.createElement("div")
      state4.style.display = "flex"
      state4.style.justifyContent = "center"
      state4.style.alignItems = "center"
      state4.style.width = "55px"
      state4.style.height = "34px"
      state4.style.margin = "13px 0"
      state4.style.backgroundColor = "#cfd4e2"
      button4.append(state4)

      state4.append(index4)

      navContainer.append(button4)


      header.append(navContainer)

      let observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting === false) {
            navContainer.style.position = "fixed"
            navContainer.style.top = "0"
            navContainer.style.left = "0"
            navContainer.style.zIndex = "1"
            navContainer.style.backgroundColor = "white"
            navContainer.style.width = "100%"
          }

          if (entry.isIntersecting === true) {
            navContainer.style.position = "static"
          }

        })
      }, {threshold: 0})
      observer.observe(headerLogo)





      document.querySelectorAll(".house-title").forEach(title => {
        title.innerHTML = "Angaben zum Haus"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })



      const hausBaujahr = new NumberField("hausBaujahr")
      .withLabel(label => label.innerHTML = "Baujahr")
      .withType(number => {
        number.placeholder = "1922"
        number.required = true
      })
      .onInfoClick((event) => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Das Baujahr eines Hauses kann den Monteuren Aufschluss darüber geben, welche Materialien und Technologien bei der Konstruktion verwendet wurden. Dazu gehören Dinge wie die Dämmung, die Bauweise und die Art der Fenster. Das kann sich darauf auswirken, welche Art von Energiesystem am besten geeignet ist. Zum Beispiel kann ein älteres Haus möglicherweise nicht genug Dämmung haben, um eine Wärmepumpe effektiv zu nutzen. In diesem Fall könnte eine Solarthermie eine bessere Option sein."
          }
        })
      })
      .onInput(async() => {
        hausBaujahr.withStorage(value => {
          funnel.value[hausBaujahr.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausBaujahr.withStorage(value => {
        funnel.value[hausBaujahr.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausUmbau = new NumberField("hausUmbau")
      .withLabel(label => label.innerHTML = "Letzte Renovierung oder Umbau")
      .withType(number => {
        number.placeholder = "1962"
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Den Zeitpunkt des letzten Umbaus eines Hauses ist wichtig zu wissen, weil es Aufschluss darüber gibt, welche Änderungen an der Struktur des Hauses vorgenommen wurden. Insbesondere wenn es um Energiesysteme geht, kann eine Änderung der Struktur des Hauses die Art und Weise beeinflussen, wie die Systeme funktionieren. Zum Beispiel kann die Installation neuer Fenster die Wärmeverteilung des Hauses beeinflussen, was Auswirkungen auf die Effektivität einer Wärmepumpe hat."
          }
        })
      })
      .onInput(async() => {
        hausUmbau.withStorage(value => {
          funnel.value[hausUmbau.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausUmbau.withStorage(value => {
        funnel.value[hausUmbau.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausEtage = new SelectionField("hausEtage")
      .withLabel(label => label.innerHTML = "Bewohnte Etagen")
      .withOptions(["Keller", "Erdgeschoss", "1. Obergeschoss", "Dachgeschoss", "Andere"])
      .withType(select => select.multiple = true)
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die bewohnte Etage eines Hauses gibt an, auf welcher Ebene des Hauses die Bewohner leben. Dies ist wichtig, weil die Wärmeabgabe in verschiedenen Stockwerken des Hauses unterschiedlich sein kann. Wenn die Bewohner hauptsächlich im Erdgeschoss leben, kann eine Solarthermieanlage für die Warmwasserversorgung eine bessere Option sein als eine Wärmepumpe. Wenn sich jedoch die meisten Bewohner in den oberen Stockwerken aufhalten, kann eine Wärmepumpe für die Heizung des Hauses effektiver sein."
          }
        })
      })
      .onInput(() => {
        hausEtage.withStorage(options => {
          funnel.value[hausEtage.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausEtage.withStorage(options => {
        funnel.value[hausEtage.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausFlaeche = new NumberField("hausFlaeche")
      .withLabel(label => label.innerHTML = "Wohnfläche (qm)")
      .withType(number => {
        number.min = "0"
        number.placeholder = "in qm"
        number.required = true
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die gesamte Wohnfläche eines Hauses gibt an, wie groß das Haus ist und wie viel Energie benötigt wird, um es zu beheizen und zu kühlen. Die Größe des Hauses bestimmt auch, wie viele Photovoltaikpaneele installiert werden müssen, um den Energiebedarf zu decken."
          }
        })
      })
      .onInput(async() => {
        hausFlaeche.withStorage(value => {
          funnel.value[hausFlaeche.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlaeche.withStorage(value => {
        funnel.value[hausFlaeche.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausKabelfuehrungDC = new SelectionField("hausKabelfuehrungDC")
      .withLabel(label => label.innerHTML = "DC-Kabelführung durch Dachhaut möglich")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn Sie ein Energiesystem wie Photovoltaik mit Speicher, Wärmepumpen und Solarthermie installieren möchten, müssen Sie möglicherweise ein Kabel durch die Dachhaut führen, um das System mit dem Stromnetz des Hauses zu verbinden. Bei der Installation gibt es verschiedene Faktoren, die berücksichtigt werden müssen, wie die Art des Dachs, die Dicke der Dachhaut und ob es bereits Öffnungen für Kabel gibt."
          }
        })
      })
      .onInput(async() => {
        hausKabelfuehrungDC.withStorage(options => {
          funnel.value[hausKabelfuehrungDC.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausKabelfuehrungDC.withStorage(options => {
        funnel.value[hausKabelfuehrungDC.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausVerkabelungDC = new SelectionField("hausVerkabelungDC")
      .withLabel(label => label.innerHTML = "DC-Kabelführung an Außenfassade möglich")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "In der Regel müssen bei der Installation von Solaranlagen oder Wärmepumpen Kabel und Leitungen verlegt werden, um die verschiedenen Komponenten miteinander zu verbinden. Oftmals ist es notwendig, diese Kabel an der Außenfassade des Gebäudes entlang zu führen, um den kürzesten und einfachsten Weg zur Stromversorgung oder Wärmeübertragung zu gewährleisten. Es gibt jedoch bestimmte Faktoren, die berücksichtigt werden müssen, um sicherzustellen, dass das Kabel sicher an der Außenfassade des Gebäudes befestigt werden kann. Dazu gehört die Art und der Zustand der Außenfassade, sowie lokale Vorschriften und Bestimmungen."
          }
        })
      })
      .onInput(async() => {
        hausVerkabelungDC.withStorage(options => {
          funnel.value[hausVerkabelungDC.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausVerkabelungDC.withStorage(options => {
        funnel.value[hausVerkabelungDC.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausAussenfasadeGedaemmt = new SelectionField("hausAussenfasadeGedaemmt")
      .withLabel(label => label.innerHTML = "Ist die Außenfassade gedämmt")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn eine Außenfassade nicht gedämmt ist, kann dies zu einem höheren Energieverbrauch und höheren Energiekosten führen, da Wärme im Winter schneller entweichen kann und das Gebäude im Sommer schneller aufheizt. Bei einem gut gedämmten Gebäude könnte beispielsweise eine kleinere Heizungs- oder Klimaanlage ausreichen, um den gewünschten Komfort zu erreichen, während bei einem nicht gedämmten Gebäude größere oder zusätzliche Geräte benötigt werden könnten, um den gleichen Effekt zu erzielen."
          }
        })
      })
      .onInput(async() => {
        hausAussenfasadeGedaemmt.withStorage(options => {
          funnel.value[hausAussenfasadeGedaemmt.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAussenfasadeGedaemmt.withStorage(options => {
        funnel.value[hausAussenfasadeGedaemmt.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDenkmal = new SelectionField("hausDenkmal")
      .withLabel(label => label.innerHTML = "Einschränkungen durch Denkmal- oder Ensembleschutz")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn Ihr Haus unter Denkmal- oder Ensembleschutz steht, gibt es möglicherweise Einschränkungen bei der Gestaltung und den Arbeiten am Gebäude. Dies kann auch die Installation von Energiesystemen betreffen. In einigen Fällen müssen die geplanten Arbeiten von einem Denkmalpfleger genehmigt werden. Dies kann bedeuten, dass das geplante Energiesystem spezielle Anforderungen erfüllen muss oder dass die Installation nur an bestimmten Stellen erlaubt ist."
          }
        })
      })
      .onInput(async() => {
        hausDenkmal.withStorage(options => {
          funnel.value[hausDenkmal.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDenkmal.withStorage(options => {
        funnel.value[hausDenkmal.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausEnergieVorhanden = new SelectionField("hausEnergieVorhanden")
      .withLabel(label => label.innerHTML = "Energiesystem vorhanden")
      .withOptions(["Nein", "Ja, ich habe schon eine Photovoltaikanlage", "Ja, ich habe schon eine Wärmepumpe", "Ja, ich habe schon eine Solarthermie", "Ja, ich habe schon ein Stromspeicher"])
      .withType(select => select.multiple = true)
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn bereits ein Energiesystem installiert ist, müssen wir sicherstellen, dass das Stromnetz genügend Kapazität hat, um das neue Energiesystem hinzuzufügen. Es ist auch wichtig zu überprüfen, ob das vorhandene Energiesystem mit dem neuen Energiesystem kompatibel ist. In einigen Fällen ist es möglich, verschiedene Energiesysteme zu kombinieren, aber in anderen Fällen müssen sie getrennt arbeiten. Wenn das vorhandene Energiesystem ersetzt wird, müssen wir es entfernen, bevor das neue System installiert werden kann."
          }
        })
      })
      .onWindowLoad(event => {
        document.querySelectorAll("select[class='hausEnergieVorhanden']").forEach(select => {
          if (select.value === "Nein") document.querySelectorAll("select[class='hausEnergieSystemEntsorgen']").forEach(select => select.disabled = true)
        })
      })
      .onChange(event => {
        if (event.target.value === "Nein") {
          document.querySelectorAll("select[class='hausEnergieSystemEntsorgen']").forEach(select => select.disabled = true)
        }
        if (event.target.value !== "Nein") {
          document.querySelectorAll("select[class='hausEnergieSystemEntsorgen']").forEach(select => select.disabled = false)
        }
      })
      .onInput(async() => {
        hausEnergieVorhanden.withStorage(options => {
          funnel.value[hausEnergieVorhanden.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausEnergieVorhanden.withStorage(options => {
        funnel.value[hausEnergieVorhanden.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })





      const hausEnergieSystemEntsorgen = new SelectionField("hausEnergieSystemEntsorgen")
      .withLabel(label => label.innerHTML = "Soll das alte Energiesystem von uns entsorgt werden")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn das alte System entfernt werden muss, müssen wir sicherstellen, dass dies sicher und umweltgerecht geschieht. Wir müssen auch sicherstellen, dass alle notwendigen Schritte eingeleitet werden, um das alte System abzuschalten."
          }
        })
      })
      .onInput(async() => {
        hausEnergieSystemEntsorgen.withStorage(options => {
          funnel.value[hausEnergieSystemEntsorgen.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausEnergieSystemEntsorgen.withStorage(options => {
        funnel.value[hausEnergieSystemEntsorgen.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausLager = new SelectionField("hausLager")
      .withLabel(label => label.innerHTML = "Lagermöglichkeit vorhanden")
      .withOptions(["Ja", "Nein", "Nicht bei mir zu Hause"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Eine Lagermöglichkeit ist notwendig, um die verschiedenen Komponenten des Systems während der Installation zwischenzulagern. Sie wissen genau, wann die Komponenten geliefert werden und können sicherstellen, dass sie vor Ort sind, wenn sie benötigt werden."
          }
        })
      })
      .onInput(async() => {
        hausLager.withStorage(options => {
          funnel.value[hausLager.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausLager.withStorage(options => {
        funnel.value[hausLager.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDacheindeckung = new SelectionField("hausDacheindeckung")
      .withLabel(label => label.innerHTML = "Die Dacheindeckung ist..")
      .withOptions(["gelegt", "geschraubt", "geklebt", "gebohrt"])
      .withType(select => {
        select.disabled = true
        const q6 = funnel.value.q6
        if (q6 === 4) {
          select.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Einige Montagesysteme erfordern spezielle Befestigungen, die möglicherweise nicht mit allen Arten von Dachziegeln kompatibel sind. Es ist auch wichtig zu berücksichtigen, dass einige Befestigungsmethoden die Dachhaut beschädigen können. Wenn die Ziegel gemauert oder geklebt sind, kann es schwieriger sein, das Energiesystem sicher zu befestigen, ohne die Dachhaut zu beschädigen."
          }
        })
      })
      .onInput(async() => {
        hausDacheindeckung.withStorage(options => {
          funnel.value[hausDacheindeckung.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDacheindeckung.withStorage(options => {
        funnel.value[hausDacheindeckung.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausUKUeberstand = new SelectionField("hausUKUeberstand")
      .withLabel(label => label.innerHTML = "Die Arten der Ausführung für die UK sind mir bekannt")
      .withOptions(["Nein", "Ja"])
      .withRequired(1)
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.background = "rgb(0, 135, 0)"
          header.style.display = "flex"
          header.style.alignItems = "center"
          header.style.padding = "34px"

          const infoIcon = document.createElement("img")
          infoIcon.src = "/public/info-white.svg"
          infoIcon.alt = "Info"

          const infoTitle = document.createElement("div")
          infoTitle.innerHTML = "Wissenswertes"
          infoTitle.style.fontSize = "21px"
          infoTitle.style.margin = "21px"
          infoTitle.style.color = "rgb(234, 234, 234)"

          header.append(infoIcon, infoTitle)
          overlay.append(header)


          const imageContainer = document.createElement("div")
          imageContainer.style.display = "flex"
          imageContainer.style.flexWrap = "wrap"
          imageContainer.style.justifyContent = "center"
          imageContainer.style.margin = "34px"

          {
            const image = document.createElement("img")
            image.src = "/felix/shs/public/ausfuehrunguk.svg"
            image.alt = "Unterkonstruktion Ausführung"
            image.style.width = "100%"
            image.style.maxWidth = "344px"
            imageContainer.append(image)
            overlay.append(imageContainer)
          }

          {
            const image = document.createElement("img")
            image.src = "/felix/shs/public/ausfuehrungukzweite.svg"
            image.alt = "Unterkonstruktion Ausführung"
            image.style.width = "100%"
            image.style.maxWidth = "344px"
            imageContainer.append(image)
            overlay.append(imageContainer)
          }

          const textContainer = document.createElement("div")
          textContainer.style.margin = "34px"

          const text = document.createElement("p")
          text.style.fontSize = "21px"
          text.style.lineHeight = "1.4"
          text.innerHTML = "Wenn die Unterkonstruktion beispielsweise aus Holz besteht, muss sichergestellt werden, dass es stabil genug ist, um das Gewicht der Energiesysteme zu tragen. Auch die Befestigungsmethoden müssen entsprechend ausgewählt werden. Bei einer Stahlbetonkonstruktion sind andere Befestigungsmethoden erforderlich als bei einer Holzkonstruktion."
          textContainer.append(text)
          overlay.append(textContainer)


          const buttonContainer = document.createElement("div")
          buttonContainer.style.display = "flex"
          buttonContainer.style.justifyContent = "space-between"
          buttonContainer.style.margin = "34px"

          const helpfulButton = document.createElement("div")
          helpfulButton.innerHTML = "👍"
          helpfulButton.style.background = "rgb(45,201,55)"
          helpfulButton.style.display = "flex"
          helpfulButton.style.justifyContent = "center"
          helpfulButton.style.alignItems = "center"
          helpfulButton.style.height = "55px"
          helpfulButton.style.width = "89px"
          helpfulButton.style.color = "white"
          helpfulButton.style.borderRadius = "8px"
          helpfulButton.style.fontSize = "21px"
          helpfulButton.style.cursor = "pointer"
          helpfulButton.addEventListener("click", () => overlay.remove())

          const notHelpfulButton = document.createElement("div")
          notHelpfulButton.innerHTML = "👎"
          notHelpfulButton.style.display = "flex"
          notHelpfulButton.style.justifyContent = "center"
          notHelpfulButton.style.alignItems = "center"
          notHelpfulButton.style.width = "89px"
          notHelpfulButton.style.height = "55px"
          notHelpfulButton.style.background = "rgb(204,50,50)"
          notHelpfulButton.style.borderRadius = "8px"
          notHelpfulButton.style.fontSize = "21px"
          notHelpfulButton.style.cursor = "pointer"
          notHelpfulButton.addEventListener("click", () => overlay.remove())

          buttonContainer.append(notHelpfulButton, helpfulButton)



          overlay.append(buttonContainer)
          overlay.style.overflow = "auto"


        })



      })
      .onInput(async() => {
        hausUKUeberstand.withStorage(options => {
          funnel.value[hausUKUeberstand.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausUKUeberstand.withStorage(options => {
        funnel.value[hausUKUeberstand.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausAnderesHausAbstand = new SelectionField("hausAnderesHausAbstand")
      .withLabel(label => label.innerHTML = "Mir sind die Vorgaben der Landesbauordnung hinsichtlich Nachbargrundstück bekannt")
      .withOptions(["Nein", "Ja"])
      .withRequired(1)
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Landesbauordnung regelt in Deutschland die Vorschriften für den Bau von Gebäuden und Anlagen. Diese Vorschriften umfassen auch Regelungen zum Schutz der Nachbarschaft und des öffentlichen Raums. Wenn das geplante System in der Nähe der Grundstücksgrenze des Nachbarn installiert wird, müssen die Abstandsflächen und Grenzabstände eingehalten werden, um mögliche Konflikte zu vermeiden. Mehr Informationen finden Sie bei ihrer Landesbauordnung."
          }
        })
      })
      .onInput(async() => {
        hausAnderesHausAbstand.withStorage(options => {
          funnel.value[hausAnderesHausAbstand.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAnderesHausAbstand.withStorage(options => {
        funnel.value[hausAnderesHausAbstand.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausEntlueftungsrohre = new SelectionField("hausEntlueftungsrohre")
      .withLabel(label => label.innerHTML = "Be-/ Entlüftungsrohre vorhanden")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn Be- und Entlüftungsrohre vorhanden sind, muss der Bauprofi diese in seine Planung einbeziehen und möglicherweise entsprechende Anpassungen vornehmen."
          }
        })
      })
      .onInput(async() => {
        hausEntlueftungsrohre.withStorage(options => {
          funnel.value[hausEntlueftungsrohre.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausEntlueftungsrohre.withStorage(options => {
        funnel.value[hausEntlueftungsrohre.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausBlitzschutzanlage = new SelectionField("hausBlitzschutzanlage")
      .withLabel(label => label.innerHTML = "Blitzschutzanlage vorhanden")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn das Gebäude eine Blitzschutzanlage hat, müssen wir bei der Installation des Energiesystems sicherstellen, dass wir keine Komponenten in der Nähe der Ableitungen oder des Blitzschutzsystems platzieren, da dies zu Störungen oder Schäden führen kann. Es kann auch erforderlich sein, zusätzliche Schutzmaßnahmen zu ergreifen, um das Energiesystem vor Überspannungsschäden zu schützen."
          }
        })
      })
      .onInput(async() => {
        hausBlitzschutzanlage.withStorage(options => {
          funnel.value[hausBlitzschutzanlage.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausBlitzschutzanlage.withStorage(options => {
        funnel.value[hausBlitzschutzanlage.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausDachaufbauten = new SelectionField("hausDachaufbauten")
      .withLabel(label => label.innerHTML = "Sind “Dachaufbauten” angebracht")
      .withOptions(["Nein", "SAT Antennen", "Blitzableiter", "Schneefanggitter", "Dachfenster", "Dachgauben", "Freileitung", "Andere"])
      .withType(select => select.multiple = true)
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Um eine akkurate Planung und Platzierung von Energiesystemen zu gewährleisten und sicherzustellen,ist es wichtig zu wissen, ob Dachaufbauten wie Schneefanggitter oder Satellitenschüsseln vorhanden sind, sodass alle Komponenten optimal und sicher funktionieren können."
          }
        })
      })
      .onInput(async() => {
        hausDachaufbauten.withStorage(options => {
          funnel.value[hausDachaufbauten.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDachaufbauten.withStorage(options => {
        funnel.value[hausDachaufbauten.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      document.querySelectorAll(".rafter-spacing-title").forEach(title => {
        title.innerHTML = "Sparrenabstand"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausAbstandSparren = new NumberField("hausAbstandSparren")
      .withLabel(label => label.innerHTML = "Abstand (a) in cm")
      .withType(number => {
        number.min = 0
        number.placeholder = "in cm"
        number.required = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.disabled = true
          number.required = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/sparrenabstand.svg"
            img.alt = "Sparrenabstand"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Der Sparrenabstand bezieht sich auf den Abstand zwischen den Dachsparren, die das Dach des Hauses tragen. Dieser Abstand kann je nach Haus unterschiedlich sein und kann sich auf die Größe und Anordnung der Solarpanels, des Speichers und anderer Komponenten des Energiesystems auswirken. Wenn der Sparrenabstand zu groß ist, kann dies bedeuten, dass weniger Solarpanels auf dem Dach installiert werden können oder dass größere Panels benötigt werden, um die gleiche Menge an Energie zu erzeugen. Wenn der Sparrenabstand zu klein ist, kann dies die Installation von Solarmodulen und anderen Komponenten erschweren oder sogar verhindern."
          }
        })
      })
      .onInput(async() => {
        hausAbstandSparren.withStorage(value => {
          funnel.value[hausAbstandSparren.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAbstandSparren.withStorage(value => {
        funnel.value[hausAbstandSparren.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausSparrenBreite = new NumberField("hausSparrenBreite")
      .withLabel(label => label.innerHTML = "Breite (b) in cm")
      .withType(number => {
        number.min = 0
        number.placeholder = "in cm"
        number.required = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.disabled = true
          number.required = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/sparrenabstand.svg"
            img.alt = "Sparrenabstand"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Der Sparrenabstand bezieht sich auf den Abstand zwischen den Dachsparren, die das Dach des Hauses tragen. Dieser Abstand kann je nach Haus unterschiedlich sein und kann sich auf die Größe und Anordnung der Solarpanels, des Speichers und anderer Komponenten des Energiesystems auswirken. Wenn der Sparrenabstand zu groß ist, kann dies bedeuten, dass weniger Solarpanels auf dem Dach installiert werden können oder dass größere Panels benötigt werden, um die gleiche Menge an Energie zu erzeugen. Wenn der Sparrenabstand zu klein ist, kann dies die Installation von Solarmodulen und anderen Komponenten erschweren oder sogar verhindern."
          }
        })
      })
      .onInput(async() => {
        hausSparrenBreite.withStorage(value => {
          funnel.value[hausSparrenBreite.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausSparrenBreite.withStorage(value => {
        funnel.value[hausSparrenBreite.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausSparrenHoehe = new NumberField("hausSparrenHoehe")
      .withLabel(label => label.innerHTML = "Höhe (c) in cm")
      .withType(number => {
        number.min = 0
        number.placeholder = "in cm"
        number.required = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.disabled = true
          number.required = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/sparrenabstand.svg"
            img.alt = "Sparrenabstand"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Der Sparrenabstand bezieht sich auf den Abstand zwischen den Dachsparren, die das Dach des Hauses tragen. Dieser Abstand kann je nach Haus unterschiedlich sein und kann sich auf die Größe und Anordnung der Solarpanels, des Speichers und anderer Komponenten des Energiesystems auswirken. Wenn der Sparrenabstand zu groß ist, kann dies bedeuten, dass weniger Solarpanels auf dem Dach installiert werden können oder dass größere Panels benötigt werden, um die gleiche Menge an Energie zu erzeugen. Wenn der Sparrenabstand zu klein ist, kann dies die Installation von Solarmodulen und anderen Komponenten erschweren oder sogar verhindern."
          }
        })
      })
      .onInput(async() => {
        hausSparrenHoehe.withStorage(value => {
          funnel.value[hausSparrenHoehe.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausSparrenHoehe.withStorage(value => {
        funnel.value[hausSparrenHoehe.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausMaterialSparren = new SelectionField("hausMaterialSparren")
      .withLabel(label => label.innerHTML = "Material der Sparren")
      .withType(select => {
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          select.disabled = true
        }
      })
      .withOptions(["Holz", "Metall", "Sonstiges"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Anforderungen an die Befestigung von Photovoltaikanlagen auf Holzdächern können unterschiedlich sein, je nachdem, ob die Sparren aus Vollholz oder Sperrholz bestehen. Außerdem können bestimmte Materialien wie Stahl oder Beton zusätzliche Verstärkungen erfordern, um das zusätzliche Gewicht des Energiesystems tragen zu können."
          }
        })
      })
      .onInput(async() => {
        hausMaterialSparren.withStorage(options => {
          funnel.value[hausMaterialSparren.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausMaterialSparren.withStorage(options => {
        funnel.value[hausMaterialSparren.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })




      document.querySelectorAll(".scaffold-title").forEach(title => {
        title.innerHTML = "Gerüstaufstellung"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausGeruestOeffentlich = new SelectionField("hausGeruestOeffentlich")
      .withLabel(label => label.innerHTML = "Muss das Gerüst auf öffentlichen Gehweg gestellt werden")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn das Gerüst auf öffentlichem Grund, beispielsweise auf einem Gehweg oder einer Straße, aufgestellt werden soll, muss dies bei der Planung des Energiesystems berücksichtigt werden. Hierbei gibt es verschiedene rechtliche Vorschriften, die einzuhalten sind, und eventuell müssen Genehmigungen beantragt werden."
          }
        })
      })
      .onInput(async() => {
        hausGeruestOeffentlich.withStorage(options => {
          funnel.value[hausGeruestOeffentlich.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestOeffentlich.withStorage(options => {
        funnel.value[hausGeruestOeffentlich.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGeruestSelbstGestellt = new SelectionField("hausGeruestSelbstGestellt")
      .withLabel(label => label.innerHTML = "Das Montageteam stellt das Gerüst")
      .withOptions(["Nein", "Ja"])
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn der Kunde das Gerüst selbst stellt, müssen der Zeitpunkt und die Art des Gerüsts berücksichtigt werden. Das Gerüst muss sicher sein und den Anforderungen der Arbeitssicherheit entsprechen. Außerdem muss das Gerüst möglicherweise entfernt werden, bevor das Energiesystem installiert werden kann. Daher ist es wichtig, frühzeitig zu klären, wer für das Gerüst verantwortlich ist und welche Auswirkungen dies auf die Planung des Energiesystems hat."
          }
        })
      })
      .onInput(async() => {
        hausGeruestSelbstGestellt.withStorage(options => {
          funnel.value[hausGeruestSelbstGestellt.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestSelbstGestellt.withStorage(options => {
        funnel.value[hausGeruestSelbstGestellt.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausVerankerung = new CheckboxField("hausVerankerung")
      .withLabel(label => label.innerHTML = "Mir ist bekannt, dass ab einer Traufhöhe von vier Metern eine Verankerung notwendig sein könnte")
      .withType(checkbox => checkbox.required = true)
      .withAfterCheckbox(after => after.innerHTML = "Ja, das ist mir bekannt.")
      .onInput(async() => {
        hausVerankerung.withStorage(value => {
          funnel.value[hausVerankerung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausVerankerung.withStorage(value => {
        funnel.value[hausVerankerung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGeruestAufstellungNord = new CheckboxField("hausGeruestAufstellungNord")
      .withLabel(label => label.innerHTML = "Aufstellung")
      .withAfterCheckbox(after => after.innerHTML = "Nordausrichtung")
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/aufstellunggeruestnord.svg"
            img.alt = "Gerüstaufstellung Norden"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          }
        })
      })
      .onInput(async() => {
        hausGeruestAufstellungNord.withStorage(value => {
          funnel.value[hausGeruestAufstellungNord.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestAufstellungNord.withStorage(value => {
        funnel.value[hausGeruestAufstellungNord.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGeruestAufstellungSued = new CheckboxField("hausGeruestAufstellungSued")
      .withLabel(label => label.innerHTML = "Aufstellung")
      .withAfterCheckbox(after => after.innerHTML = "Südausrichtung")
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/aufstellunggeruestsued.svg"
            img.alt = "Gerüstaufstellung Süden"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          }
        })
      })
      .onInput(async() => {
        hausGeruestAufstellungSued.withStorage(value => {
          funnel.value[hausGeruestAufstellungSued.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestAufstellungSued.withStorage(value => {
        funnel.value[hausGeruestAufstellungSued.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGeruestAufstellungOst = new CheckboxField("hausGeruestAufstellungOst")
      .withLabel(label => label.innerHTML = "Aufstellung")
      .withAfterCheckbox(after => after.innerHTML = "Ostausrichtung")
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/aufstellunggeruestostwest.svg"
            img.alt = "Gerüstaufstellung Osten"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          }
        })
      })
      .onInput(async() => {
        hausGeruestAufstellungOst.withStorage(value => {
          funnel.value[hausGeruestAufstellungOst.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestAufstellungOst.withStorage(value => {
        funnel.value[hausGeruestAufstellungOst.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGeruestAufstellungWest = new CheckboxField("hausGeruestAufstellungWest")
      .withLabel(label => label.innerHTML = "Aufstellung")
      .withAfterCheckbox(after => after.innerHTML = "Westausrichtung")
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/aufstellunggeruestostwest.svg"
            img.alt = "Gerüstaufstellung Westen"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          }
        })
      })
      .onInput(async() => {
        hausGeruestAufstellungWest.withStorage(value => {
          funnel.value[hausGeruestAufstellungWest.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestAufstellungWest.withStorage(value => {
        funnel.value[hausGeruestAufstellungWest.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      document.querySelectorAll(".building-dimensions-title").forEach(title => {
        title.innerHTML = "Gebäudeabmessungen"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })

      const hausBreite = new NumberField("hausBreite")
      .withLabel(label => label.innerHTML = "Breite (a+b) in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/breitedeshauses.svg"
            img.alt = "Breite des Hauses"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Größe des Hauses beeinflusst die Größe des benötigten Energiesystems. Je größer das Haus, desto mehr Energie wird benötigt, um es zu beheizen, zu kühlen und mit Strom zu versorgen."
          }
        })
      })
      .onInput(async() => {
        hausBreite.withStorage(value => {
          funnel.value[hausBreite.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausBreite.withStorage(value => {
        funnel.value[hausBreite.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausLaenge = new NumberField("hausLaenge")
      .withLabel(label => label.innerHTML = "Länge (a+b) in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/breitedeshauses.svg"
            img.alt = "Länge des Hauses"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Größe des Hauses beeinflusst die Größe des benötigten Energiesystems. Je größer das Haus, desto mehr Energie wird benötigt, um es zu beheizen, zu kühlen und mit Strom zu versorgen."
          }
        })
      })
      .onInput(async() => {
        hausLaenge.withStorage(value => {
          funnel.value[hausLaenge.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausLaenge.withStorage(value => {
        funnel.value[hausLaenge.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausGeruestAnzahl = new NumberField("hausGeruestAnzahl")
      .withLabel(label => label.innerHTML = "Gerüstanzahl")
      .withType(number => {
        number.min = 0
        number.placeholder = "1"
        number.required = true
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wie viel Gerüste werden für den Aufbau des Energiesystems benötigt. Üblich ist ein Gerüst für jede Dachseite, auf der ein Modul geplant ist."
          }
        })
      })
      .onInput(async() => {
        hausGeruestAnzahl.withStorage(value => {
          funnel.value[hausGeruestAnzahl.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestAnzahl.withStorage(value => {
        funnel.value[hausGeruestAnzahl.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausGesamtGeruestFlaeche = new NumberField("hausGesamtGeruestFlaeche")
      .withLabel(label => label.innerHTML = "Gesamtgerüstfläche (Länge x Höhe) in Quadratmeter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m^2"
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Größe dieses Gerüsts hängt von der Größe des Dachs und der Größe der Energiesysteme ab, die Sie installieren möchten."
          }
        })
      })
      .onInput(async() => {
        hausGesamtGeruestFlaeche.withStorage(value => {
          funnel.value[hausGesamtGeruestFlaeche.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGesamtGeruestFlaeche.withStorage(value => {
        funnel.value[hausGesamtGeruestFlaeche.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      document.querySelectorAll(".flatroof-title").forEach(title => {
        title.innerHTML = "Flachdach"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausAttikaVorhanden = new SelectionField("hausAttikaVorhanden")
      .withLabel(label => label.innerHTML = "Attika vorhanden")
      .withOptions(["Nein", "Ja"])
      .withType(select => {
        select.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          select.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn eine Attika vorhanden ist, hat das Dach eine höhere Absturzsicherung und das Anbringen von Solarpaneelen oder anderen Geräten wird einfacher. Wenn keine Attika vorhanden ist, müssen spezielle Sicherheitsvorkehrungen getroffen werden, um Abstürze zu verhindern. Dies kann den Einsatz von zusätzlichen Halterungen oder Barrieren erfordern, um sicherzustellen, dass das System sicher installiert wird."
          }
        })
      })
      .onInput(async() => {
        hausAttikaVorhanden.withStorage(options => {
          funnel.value[hausAttikaVorhanden.name] = options
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAttikaVorhanden.withStorage(options => {
        funnel.value[hausAttikaVorhanden.name] = options
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausAttikaBreite = new NumberField("hausAttikaBreite")
      .withLabel(label => label.innerHTML = "Breite (a) in cm")
      .withType(number => {
        number.min = 0
        number.placeholder = "in cm"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.required = true
          number.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/attikaflachdach.svg"
            img.alt = "Attika Flachdach"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn die Attika zu schmal ist, kann es sein, dass die Solarmodule nicht auf das Dach passen oder dass die Solarmodule nicht in ausreichendem Abstand von der Attika installiert werden können. Das kann dazu führen, dass die Solarmodule nicht optimal positioniert werden können, um genug Sonnenlicht zu bekommen und somit weniger Energie produzieren."
          }
        })
      })
      .onInput(async() => {
        hausAttikaBreite.withStorage(value => {
          funnel.value[hausAttikaBreite.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAttikaBreite.withStorage(value => {
        funnel.value[hausAttikaBreite.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausAttikaHoehe = new NumberField("hausAttikaHoehe")
      .withLabel(label => label.innerHTML = "Höhe (b) in cm")
      .withType(number => {
        number.min = 0
        number.placeholder = "in cm"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.required = true
          number.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/attikaflachdach.svg"
            img.alt = "Attika Flachdach"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn die Attika zu schmal ist, kann es sein, dass die Solarmodule nicht auf das Dach passen oder dass die Solarmodule nicht in ausreichendem Abstand von der Attika installiert werden können. Das kann dazu führen, dass die Solarmodule nicht optimal positioniert werden können, um genug Sonnenlicht zu bekommen und somit weniger Energie produzieren."
          }
        })
      })
      .onInput(async() => {
        hausAttikaHoehe.withStorage(value => {
          funnel.value[hausAttikaHoehe.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAttikaHoehe.withStorage(value => {
        funnel.value[hausAttikaHoehe.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausGradzahlFlachdach = new NumberField("hausGradzahlFlachdach")
      .withLabel(label => label.innerHTML = "Gradzahl Flachdach in Meter")
      .withType(number => {
        number.min = 0
        number.max = 100
        number.placeholder = "in m"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          number.required = true
          number.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Wenn das Dach sehr flach ist, könnte es auch notwendig sein, spezielle Halterungen oder Schienen zu verwenden, um die Paneele in einem optimalen Winkel zur Sonne zu positionieren."
          }
        })
      })
      .onInput(async() => {
        hausGradzahlFlachdach.withStorage(value => {
          funnel.value[hausGradzahlFlachdach.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGradzahlFlachdach.withStorage(value => {
        funnel.value[hausGradzahlFlachdach.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausFlachdachNeigungBekannt = new CheckboxField("hausFlachdachNeigungBekannt")
      .withIcon(icon => icon.remove())
      .withLabel(label => label.innerHTML = "Mir ist bekannt dass, bei einem Flachdach mit einer Neigung von mehr als 4 Grad eine Aufständerung mit Ballastierung nicht möglich ist. Daher ist nur eine Befestigung mit Dachdurchdringung möglich.")
      .withAfterCheckbox(after => after.innerHTML = "Ja, das ist mir bekannt.")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          checkbox.required = true
          checkbox.disabled = false
        }
      })
      .onInput(async() => {
        hausFlachdachNeigungBekannt.withStorage(value => {
          funnel.value[hausFlachdachNeigungBekannt.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlachdachNeigungBekannt.withStorage(value => {
        funnel.value[hausFlachdachNeigungBekannt.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      document.querySelectorAll(".alignment-flatroof-title").forEach(title => {
        title.innerHTML = "Ausrichtung Flachdach"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })

      const hausFlachdachNordAusrichtung = new CheckboxField("hausFlachdachNordAusrichtung")
      .withLabel(label => label.innerHTML = "Nordseite")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          checkbox.disabled = false
        }
      })
      .onChange(exceptNord)
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ausrichtungflachdachnordost.svg"
            img.alt = "Flachdachausrichtung Norden"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(async() => {
        hausFlachdachNordAusrichtung.withStorage(value => {
          funnel.value[hausFlachdachNordAusrichtung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlachdachNordAusrichtung.withStorage(value => {
        funnel.value[hausFlachdachNordAusrichtung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausFlachdachOstAusrichtung = new CheckboxField("hausFlachdachOstAusrichtung")
      .withLabel(label => label.innerHTML = "Ostseite")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          checkbox.disabled = false
        }
      })
      .onChange(exceptOst)
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ausrichtungflachdachnordost.svg"
            img.alt = "Flachdachausrichtung Osten"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(async() => {
        hausFlachdachOstAusrichtung.withStorage(value => {
          funnel.value[hausFlachdachOstAusrichtung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlachdachOstAusrichtung.withStorage(value => {
        funnel.value[hausFlachdachOstAusrichtung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausFlachdachSuedAusrichtung = new CheckboxField("hausFlachdachSuedAusrichtung")
      .withLabel(label => label.innerHTML = "Südseite")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          checkbox.disabled = false
        }
      })
      .onChange(exceptSued)
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ausrichtungflachdachsuedwest.svg"
            img.alt = "Flachdachausrichtung Süden"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(async() => {
        hausFlachdachSuedAusrichtung.withStorage(value => {
          funnel.value[hausFlachdachSuedAusrichtung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlachdachSuedAusrichtung.withStorage(value => {
        funnel.value[hausFlachdachSuedAusrichtung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausFlachdachWestAusrichtung = new CheckboxField("hausFlachdachWestAusrichtung")
      .withLabel(label => label.innerHTML = "Westseite")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        if (q5 === 2 || q5 === 4) {
          checkbox.disabled = false
        }
      })
      .onChange(exceptWest)
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ausrichtungflachdachsuedwest.svg"
            img.alt = "Flachdachausrichtung Westen"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(async() => {
        hausFlachdachWestAusrichtung.withStorage(value => {
          funnel.value[hausFlachdachWestAusrichtung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFlachdachWestAusrichtung.withStorage(value => {
        funnel.value[hausFlachdachWestAusrichtung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const nordCheckbox = "input[class='hausFlachdachNordAusrichtung']"
      const ostCheckbox = "input[class='hausFlachdachOstAusrichtung']"
      const suedCheckbox = "input[class='hausFlachdachSuedAusrichtung']"
      const westCheckbox = "input[class='hausFlachdachWestAusrichtung']"

      function exceptNord(event) {
        if (event.target.checked) {
          document.querySelectorAll(ostCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(suedCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(westCheckbox).forEach(box => box.checked = false)
        }
      }

      function exceptOst(event) {
        if (event.target.checked) {
          document.querySelectorAll(nordCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(suedCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(westCheckbox).forEach(box => box.checked = false)
        }
      }

      function exceptSued(event) {
        if (event.target.checked) {
          document.querySelectorAll(nordCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(ostCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(westCheckbox).forEach(box => box.checked = false)
        }
      }

      function exceptWest(event) {
        if (event.target.checked) {
          document.querySelectorAll(nordCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(suedCheckbox).forEach(box => box.checked = false)
          document.querySelectorAll(ostCheckbox).forEach(box => box.checked = false)
        }
      }



      document.querySelectorAll(".trapezoid-roof-title").forEach(title => {
        title.innerHTML = "Trapezdach"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausAluStaerke = new NumberField("hausAluStaerke")
      .withLabel(label => label.innerHTML = "Stärke meines Aluminiumdaches")
      .withType(number => {
        number.min = 0
        number.placeholder = "in mm"
        number.disabled = true
        const q5 = funnel.value.q5
        const q6 = funnel.value.q6
        if (q5 === 2 && (q6 === 1 || q6 === 2)) {
          number.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Trapezdächer aus Aluminium sind aufgrund ihrer Langlebigkeit und Witterungsbeständigkeit eine beliebte Wahl. Es ist jedoch wichtig zu wissen, wie stark das Dach ist, da dies Auswirkungen auf die Montage der Photovoltaikanlage und die Verankerung der Befestigungssysteme haben kann. Wenn das Dach nicht stark genug ist, kann es beschädigt werden oder es kann zu Problemen kommen, wenn wir die Solarpaneele anbringen."
          }
        })
      })
      .onInput(async() => {
        hausAluStaerke.withStorage(value => {
          funnel.value[hausAluStaerke.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausAluStaerke.withStorage(value => {
        funnel.value[hausAluStaerke.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausStahlStaerke = new NumberField("hausStahlStaerke")
      .withLabel(label => label.innerHTML = "Stärke meines Stahldaches")
      .withType(number => {
        number.min = 0
        number.placeholder = "in mm"
        number.disabled = true
        const q5 = funnel.value.q5
        const q6 = funnel.value.q6
        if (q5 === 2 && (q6 === 1 || q6 === 2)) {
          number.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Es ist sehr wichtig, die Stärke des Trapezdachs zu kennen, bevor man mit der Planung und Installation des Energiesystems beginnt, um sicherzustellen, dass das Dach stabil genug ist, um die Anlagen zu tragen."
          }
        })
      })
      .onInput(async() => {
        hausStahlStaerke.withStorage(value => {
          funnel.value[hausStahlStaerke.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausStahlStaerke.withStorage(value => {
        funnel.value[hausStahlStaerke.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausIstIcopal = new CheckboxField("hausIstIcopal")
      .withIcon(icon => icon.remove())
      .withLabel(label => label.innerHTML = "Wenn Dacheindeckung vom Hersteller “Icopal”, dann nicht baubar.")
      .withAfterCheckbox(after => after.innerHTML = "Ja, das ist mir bekannt.")
      .withType(checkbox => {
        checkbox.disabled = true
        const q5 = funnel.value.q5
        const q6 = funnel.value.q6
        if (q5 === 2 && (q6 === 1 || q6 === 2)) {
          checkbox.disabled = false
          checkbox.required = true
        }
      })
      .onInput(async() => {
        hausIstIcopal.withStorage(value => {
          funnel.value[hausIstIcopal.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausIstIcopal.withStorage(value => {
        funnel.value[hausIstIcopal.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      document.querySelectorAll(".house-dimensions-title").forEach(title => {
        title.innerHTML = "Hausmaße"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausTraufhoehe = new NumberField("hausTraufhoehe")
      .withLabel(label => label.innerHTML = "Traufhöhe in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          number.disabled = false
          number.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/hausmasse.svg"
            img.alt = "Hausmaße Traufhöhe"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Nur wenn man die genauen Maße des Hauses kennt, ist es möglich ein System zu entwerfen, das optimal auf Ihre Bedürfnisse abgestimmt ist und das volle Potenzial der verfügbaren Sonnenenergie ausschöpft."
          }
        })
      })
      .onInput(async() => {
        hausTraufhoehe.withStorage(value => {
          funnel.value[hausTraufhoehe.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausTraufhoehe.withStorage(value => {
        funnel.value[hausTraufhoehe.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausDachBreite = new NumberField("hausDachBreite")
      .withLabel(label => label.innerHTML = "Dachbreite in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          number.disabled = false
          number.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/hausmasse.svg"
            img.alt = "Hausmaße Dachbreite"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Nur wenn man die genauen Maße des Hauses kennt, ist es möglich ein System zu entwerfen, das optimal auf Ihre Bedürfnisse abgestimmt ist und das volle Potenzial der verfügbaren Sonnenenergie ausschöpft."
          }
        })
      })
      .onInput(async() => {
        hausDachBreite.withStorage(value => {
          funnel.value[hausDachBreite.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDachBreite.withStorage(value => {
        funnel.value[hausDachBreite.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDachLaenge = new NumberField("hausDachLaenge")
      .withLabel(label => label.innerHTML = "Dachlänge in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          number.disabled = false
          number.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/hausmasse.svg"
            img.alt = "Hausmaße Dachlänge"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Nur wenn man die genauen Maße des Hauses kennt, ist es möglich ein System zu entwerfen, das optimal auf Ihre Bedürfnisse abgestimmt ist und das volle Potenzial der verfügbaren Sonnenenergie ausschöpft."
          }
        })
      })
      .onInput(async() => {
        hausDachLaenge.withStorage(value => {
          funnel.value[hausDachLaenge.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDachLaenge.withStorage(value => {
        funnel.value[hausDachLaenge.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausFirstHoehe = new NumberField("hausFirstHoehe")
      .withLabel(label => label.innerHTML = "Firsthöhe in Meter")
      .withType(number => {
        number.min = 0
        number.placeholder = "in m"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          number.disabled = false
          number.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/hausmasse.svg"
            img.alt = "Hausmaße Firsthöhe"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Nur wenn man die genauen Maße des Hauses kennt, ist es möglich ein System zu entwerfen, das optimal auf Ihre Bedürfnisse abgestimmt ist und das volle Potenzial der verfügbaren Sonnenenergie ausschöpft."
          }
        })
      })
      .onInput(async() => {
        hausFirstHoehe.withStorage(value => {
          funnel.value[hausFirstHoehe.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFirstHoehe.withStorage(value => {
        funnel.value[hausFirstHoehe.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDachAusrichtung = new SelectionField("hausDachAusrichtung")
      .withLabel(label => label.innerHTML = "Dachausrichtung")
      .withOptions(["Süd", "Nord", "Nord-Ost", "Ost", "Süd-Ost", "Süd-West", "West", "Nord-West"])
      .withType(select => {
        select.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          select.disabled = false
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die genaue Ausrichtung deines Dachs kann auch beeinflussen, wie viele Panels du benötigst, um genügend Energie für dein Zuhause zu erzeugen. Wenn dein Dach beispielsweise nach Osten oder Westen ausgerichtet ist, wirst du möglicherweise mehr Panels benötigen, um die gleiche Menge an Energie zu erzeugen, als wenn dein Dach in Richtung Süden ausgerichtet wäre."
          }
        })
      })
      .onInput(async() => {
        hausDachAusrichtung.withStorage(value => {
          funnel.value[hausDachAusrichtung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDachAusrichtung.withStorage(value => {
        funnel.value[hausDachAusrichtung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDachneigung = new NumberField("hausDachneigung")
      .withLabel(label => label.innerHTML = "Dachneigung in Grad")
      .withType(number => {
        number.min = -360
        number.max = 360
        number.placeholder = "in Grad"
        number.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          number.disabled = false
          number.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Die Gradzahl gibt uns Auskunft darüber, wie steil das Dach ist. Warum ist das wichtig? Es ist wichtig, weil die meisten Solarmodule und Solarthermie- Kollektoren in einem bestimmten Winkel montiert werden müssen, um die maximale Sonnenenergie zu erhalten. Wenn das Dach zu flach ist, kann es sein, dass das Modul oder der Kollektor nicht in der optimalen Position montiert werden kann. Wenn das Dach zu steil ist, kann es schwierig oder gefährlich sein, die Solarmodule oder Solarthermie-Kollektoren zu montieren. Zusätzlich gibt die Gradzahl uns auch einen Hinweis auf die Windlast, die das Dach aushalten muss. Wenn das Dach sehr flach ist, ist es anfälliger für Windkräfte, was Auswirkungen auf die Größe und Art des Montagesystems haben kann."
          }
        })
      })
      .onInput(async() => {
        hausDachneigung.withStorage(value => {
          funnel.value[hausDachneigung.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDachneigung.withStorage(value => {
        funnel.value[hausDachneigung.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      document.querySelectorAll(".upload-title").forEach(title => {
        title.innerHTML = "Bilderupload"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })


      const hausFrontBild = new FileField("hausFrontBild")
      .withLabel(label => label.innerHTML = "Frontansicht")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
          file.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/frontansicht.svg"
            img.alt = "Haus Frontansicht"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausFrontBild.withStorage(async value => {

          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausFrontBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausFrontBild.withStorage(async value => {



        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausFrontBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausFrontBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }
      })



      const hausSuedAnsichtBild = new FileField("hausSuedAnsichtBild")
      .withLabel(label => label.innerHTML = "Südansicht")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/suedansicht.svg"
            img.alt = "Haus Südansicht"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausSuedAnsichtBild.withStorage(async value => {


          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausSuedAnsichtBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausSuedAnsichtBild.withStorage(async value => {


        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausSuedAnsichtBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausSuedAnsichtBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }
      })


      const hausGeruestStandortBild = new FileField("hausGeruestStandortBild")
      .withLabel(label => label.innerHTML = "Gerüststandort")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
          file.required = true
          file.multiple = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/geruesttandort.svg"
            img.alt = "Haus Gerüststandort"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausGeruestStandortBild.withStorage(async value => {

          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausGeruestStandortBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausGeruestStandortBild.withStorage(async value => {


        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausGeruestStandortBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausGeruestStandortBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }
      })


      const hausOrtgangBild = new FileField("hausOrtgangBild")
      .withLabel(label => label.innerHTML = "Ortgang")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
          file.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ortgang.svg"
            img.alt = "Haus Ortgang"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausOrtgangBild.withStorage(async value => {



          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausOrtgangBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausOrtgangBild.withStorage(async value => {



        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausOrtgangBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausOrtgangBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }
      })



      const hausSparrenAnsichtBild = new FileField("hausSparrenAnsichtBild")
      .withLabel(label => label.innerHTML = "Sparrenansicht")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
          file.required = true
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/sparrenansicht.svg"
            img.alt = "Haus Sparrenansicht"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausSparrenAnsichtBild.withStorage(async value => {


          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausSparrenAnsichtBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausSparrenAnsichtBild.withStorage(async value => {


        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausSparrenAnsichtBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausSparrenAnsichtBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }
      })



      document.querySelectorAll(".brick-title").forEach(title => {
        title.innerHTML = "Ziegel"
        title.style.margin = "144px 34px 34px 34px"
        title.style.fontWeight = "normal"
      })

      const hausZiegelBild = new FileField("hausZiegelBild")
      .withLabel(label => label.innerHTML = "Bild des Ziegels")
      .withType(file => {
        file.disabled = true
        const q5 = funnel.value.q5
        if (q5 !== 2) {
          file.disabled = false
          file.accept = "image/jpeg, image/png"
        }
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withImage: (img) => {
            img.src = "/felix/shs/public/ziegelbild.svg"
            img.alt = "Haus Ziegel"
            img.style.width = "100%"
            img.style.maxWidth = "344px"
          },
        })
      })
      .onInput(() => {
        hausZiegelBild.withStorage(async value => {

          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groß.")
              Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel.value[hausZiegelBild.name] = array
            window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
          }
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausZiegelBild.withStorage(async value => {


        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groß.")
            Helper.setNotValidStyle(document.querySelector(hausZiegelBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel.value[hausZiegelBild.name] = array
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        }

      })



      const hausDeckmassLaenge = new NumberField("hausDeckmassLaenge")
      .withLabel(label => label.innerHTML = "Ziegeldeckmaß Länge in mm")
      .withType(number => {
        number.min = "0"
        number.placeholder = "in mm"
        number.required = true
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Mit dem Ziegeldeckmaß kann das Layout der Solarpaneele optimieren werden, um sicherzustellen, dass du die bestmögliche Leistung erzielst. Wenn die Paneele beispielsweise nicht richtig positioniert sind, können Schatten von Bäumen oder anderen Gebäuden die Leistung beeinträchtigen. Außerdem ermöglicht das Wissen um das Ziegeldeckmaß die genaue Berechnung der Anzahl der benötigten Solarpaneele. So wird vermieden, dass zu viele oder zu wenige Panels installiert werden und das System entweder überdimensioniert oder unterdimensioniert ist."
          }
        })
      })
      .onInput(async() => {
        hausDeckmassLaenge.withStorage(value => {
          funnel.value[hausDeckmassLaenge.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDeckmassLaenge.withStorage(value => {
        funnel.value[hausDeckmassLaenge.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })



      const hausDeckmassBreite = new NumberField("hausDeckmassBreite")
      .withLabel(label => label.innerHTML = "Ziegeldeckmaß Breite in mm")
      .withType(number => {
        number.min = "0"
        number.placeholder = "in mm"
        number.required = true
      })
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Mit dem Ziegeldeckmaß kann das Layout der Solarpaneele optimieren werden, um sicherzustellen, dass du die bestmögliche Leistung erzielst. Wenn die Paneele beispielsweise nicht richtig positioniert sind, können Schatten von Bäumen oder anderen Gebäuden die Leistung beeinträchtigen. Außerdem ermöglicht das Wissen um das Ziegeldeckmaß die genaue Berechnung der Anzahl der benötigten Solarpaneele. So wird vermieden, dass zu viele oder zu wenige Panels installiert werden und das System entweder überdimensioniert oder unterdimensioniert ist."
          }
        })
      })
      .onInput(async() => {
        hausDeckmassBreite.withStorage(value => {
          funnel.value[hausDeckmassBreite.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausDeckmassBreite.withStorage(value => {
        funnel.value[hausDeckmassBreite.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const hausErsatzZiegel = new SelectionField("hausErsatzZiegel")
      .withLabel(label => label.innerHTML = "Ersatzziegel vorhanden")
      .withOptions(["Nein", "Ja"])
      .withRequired(1)
      .onInfoClick(() => {
        Helper.popupInfo({
          withText: (p) => {
            p.style.fontSize = "21px"
            p.style.lineHeight = "1.4"
            p.innerHTML = "Manchmal müssen beim Installieren von Solarpanelen oder anderen Energiesystemen auf dem Dach einige Ziegel entfernt werden, um die Kabel durchzuführen oder andere Anpassungen vorzunehmen. Wenn das Montageteam diese Ziegel ohne Ersatz entfernt und das Dachsystem nicht mehr perfekt abgedichtet werden kann, kann dies zu Wassereintritt und Schäden am Dach führen. Daher ist es wichtig zu wissen, ob der Kunde noch Ersatzziegel hat, damit im Falle von Beschädigungen oder Fehlern während der Installation schnell und effektiv repariert werden kann."
          }
        })
      })
      .onInput(async() => {
        hausErsatzZiegel.withStorage(value => {
          funnel.value[hausErsatzZiegel.name] = value
          window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel.value[name])
      hausErsatzZiegel.withStorage(value => {
        funnel.value[hausErsatzZiegel.name] = value
        window.localStorage.setItem("shsFunnel", JSON.stringify(funnel))
      })


      const fields = [
        hausBaujahr,
        hausUmbau,
        hausEtage,
        hausFlaeche,
        hausKabelfuehrungDC,
        hausVerkabelungDC,
        hausAussenfasadeGedaemmt,
        hausDenkmal,
        hausEnergieVorhanden,
        hausEnergieSystemEntsorgen,
        hausLager,
        hausDacheindeckung,
        hausUKUeberstand,
        hausAnderesHausAbstand,
        hausEntlueftungsrohre,
        hausBlitzschutzanlage,
        hausDachaufbauten,
        hausAbstandSparren,
        hausSparrenBreite,
        hausSparrenHoehe,
        hausMaterialSparren,
        hausGeruestOeffentlich,
        hausGeruestSelbstGestellt,
        hausVerankerung,
        hausGeruestAufstellungNord,
        hausGeruestAufstellungSued,
        hausGeruestAufstellungOst,
        hausGeruestAufstellungWest,
        hausBreite,
        hausLaenge,
        hausGeruestAnzahl,
        hausGesamtGeruestFlaeche,
        hausAttikaVorhanden,
        hausAttikaBreite,
        hausAttikaHoehe,
        hausGradzahlFlachdach,
        hausFlachdachNeigungBekannt,
        hausFlachdachNordAusrichtung,
        hausFlachdachOstAusrichtung,
        hausFlachdachSuedAusrichtung,
        hausFlachdachWestAusrichtung,
        hausAluStaerke,
        hausStahlStaerke,
        hausIstIcopal,
        hausTraufhoehe,
        hausDachBreite,
        hausDachLaenge,
        hausFirstHoehe,
        hausDachAusrichtung,
        hausDachneigung,
        hausFrontBild,
        hausSuedAnsichtBild,
        hausGeruestStandortBild,
        hausOrtgangBild,
        hausSparrenAnsichtBild,
        hausZiegelBild,
        hausDeckmassLaenge,
        hausDeckmassBreite,
        hausErsatzZiegel,
      ]


      const speichernundweiterbutton = new DivField("save-and-proceed-button")
      .withType(div => {
        div.innerHTML = "Speichern und weiter"
        div.style.fontSize = "21px"
        div.style.margin = "144px 34px"
        div.style.backgroundColor = "#f7aa20"
        div.style.borderRadius = "13px"
        div.style.height = "89px"
        div.style.display = "flex"
        div.style.justifyContent = "center"
        div.style.alignItems = "center"
        div.addEventListener("mouseover", () => div.style.backgroundColor = "#f19d08")
        div.addEventListener("mouseout", () => div.style.backgroundColor = "#f7aa20")
      })
      .onClick(async () => await checkAndProceed("/felix/shs/abfrage-heizung/"))

      Helper.createSHSFooter()

      async function checkAndProceed(path) {
        for (let i = 0; i < fields.length; i++) {
          await fields[i].withValidValue()
        }
        window.location.assign(path)
      }


    </script>

  </body>
</html>
