<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Getyour Experte</title>

    <style>
      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
        padding-bottom: 144px;
        overscroll-behavior: none;
      }
    </style>

  </head>
  <body>

    <script type="module">
      import { Request } from "/js/Request.js"
      import { Helper } from "/js/Helper.js"
      import { TextField } from "/js/TextField.js"
      import { TelField } from "/js/TelField.js"
      import { TextAreaField } from "/js/TextAreaField.js"
      import { FileField } from "/js/FileField.js"
      import { SelectionField } from "/js/SelectionField.js"

      {
        const header = document.createElement("header")
        header.style.position = "fixed"
        header.style.bottom = "0"
        header.style.left = "0"
        header.style.backgroundColor = "white"
        header.style.width = "100%"
        header.style.display = "flex"
        header.style.flexWrap = "wrap"
        header.style.alignItems = "center"
        header.style.justifyContent = "space-between"
        header.style.zIndex = "1"
        header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

        const leftContainer = document.createElement("div")
        leftContainer.style.display = "flex"
        leftContainer.style.alignItems = "center"
        leftContainer.style.flexWrap = "wrap"

        const logo = document.createElement("img")
        logo.src = "/public/getyour-logo.svg"
        logo.alt = "Getyour"
        logo.style.width = "55px"
        logo.style.margin = "21px 0 21px 34px"
        logo.style.cursor = "pointer"
        logo.addEventListener("click", () => window.history.back())
        leftContainer.append(logo)

        const name = document.createElement("div")
        name.innerHTML = "Experte"
        name.style.padding = "21px 34px"
        name.style.fontSize = "21px"
        name.style.color = "#000"
        name.style.cursor = "pointer"

        name.addEventListener("click", () => {

          Helper.popup(async overlay => {

            {
              const header = document.createElement("div")
              header.style.position = "fixed"
              header.style.bottom = "0"
              header.style.left = "0"
              header.style.width = "100%"
              header.style.display = "flex"
              header.style.justifyContent = "flex-start"
              header.style.alignItems = "center"
              header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
              header.style.background = "white"
              header.style.zIndex = "1"
              header.style.cursor = "pointer"
              header.addEventListener("click", () => Helper.removeOverlay(overlay))

              const logo = document.createElement("img")
              logo.src = "/public/getyour-logo.svg"
              logo.alt = "Getyour"
              logo.style.width = "55px"
              logo.style.margin = "21px 34px"
              header.append(logo)
              const title = document.createElement("div")
              title.innerHTML = `/ ${window.location.pathname.split("/")[1]} /`
              title.style.fontWeight = "bold"
              title.style.fontSize = "21px"
              header.append(title)
              overlay.append(header)
            }

            {
              const buttons = document.createElement("div")
              buttons.style.overflow = "auto"
              buttons.style.paddingBottom = "144px"
              buttons.style.overscrollBehavior = "none"
              overlay.append(buttons)

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.justifyContent = "center"
                const loading = document.createElement("img")
                loading.src = "/public/load.svg"
                loading.alt = "Bitte warten.."
                loading.style.width = "55px"
                button.append(loading)
                buttons.append(button)

                const verify = {}
                verify.url = "/verify/expert/closed/3/"
                verify.event = "direct"
                verify.expert = window.location.pathname.split("/")[1]
                verify.localStorageId = await Request.localStorageId()
                verify.localStorageEmail = await Request.email()
                verify.referer = document.referrer
                verify.location = window.location.href
                const res = await Request.middleware(verify)

                if (res.status !== 200) button.remove()

                if (res.status === 200) {

                  {
                    Helper.reset(button)
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"
                    button.addEventListener("click", () => {

                      Helper.popup(async overlay => {

                        {
                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.zIndex = "1"
                          header.style.cursor = "pointer"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/public/getyour-logo.svg"
                          logo.alt = "Logo"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = `Besitzerdaten`
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)
                        }

                        {
                          const ownerList = document.createElement("div")
                          ownerList.style.display = "flex"
                          ownerList.style.justifyContent = "center"
                          ownerList.style.alignItems = "center"
                          ownerList.style.height = "55vh"
                          const loading = document.createElement("img")
                          loading.src = "/public/load.svg"
                          loading.alt = "Bitte warten.."
                          loading.style.width = "55px"
                          ownerList.append(loading)
                          overlay.append(ownerList)

                          const get = {}
                          get.url = "/get/owner/closed/2/"
                          get.localStorageEmail = await Request.email()
                          get.localStorageId = await Request.localStorageId()
                          get.location = window.location.href
                          get.referer = document.referrer
                          const res = await Request.middleware(get)

                          Helper.reset(ownerList)
                          ownerList.style.overflowY = "auto"
                          ownerList.style.paddingBottom = "144px"
                          ownerList.style.overscrollBehavior = "none"

                          const firstnameField = new TextField("firstname", ownerList)
                          firstnameField.value(name => window.localStorage.getItem(name))
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.firstname !== undefined) {
                              firstnameField.value(name => owner.firstname)
                            }
                          }
                          firstnameField.label.innerHTML = "Vorname"
                          firstnameField.input.placeholder = "Huan"
                          firstnameField.input.required = true
                          firstnameField.input.maxLength = "34"
                          firstnameField.input.addEventListener("input", () => {
                            const value = firstnameField.validValue()
                            window.localStorage.setItem(firstnameField.name, value)
                          })
                          firstnameField.verifyValue()

                          const lastnameField = new TextField("lastname", ownerList)
                          lastnameField.value(name => window.localStorage.getItem(name))
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.lastname !== undefined) {
                              lastnameField.value(name => owner.lastname)
                            }
                          }
                          lastnameField.label.innerHTML = "Nachname"
                          lastnameField.input.placeholder = "Solo"
                          lastnameField.input.required = true
                          lastnameField.input.maxLength = "34"
                          lastnameField.input.addEventListener("input", () => {
                            const value = lastnameField.validValue()
                            window.localStorage.setItem(lastnameField.name, value)
                          })
                          lastnameField.verifyValue()

                          const streetField = new TextField("street", ownerList)
                          streetField.value(name => window.localStorage.getItem(name))
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.street !== undefined) {
                              streetField.value(name => owner.street)
                            }
                          }
                          streetField.label.innerHTML = "Straße und Hausnummer"
                          streetField.input.required = true
                          streetField.input.placeholder = "Wiesentalstr. 21"
                          streetField.input.maxLength = "34"
                          streetField.input.addEventListener("input", () => {
                            const value = streetField.validValue()
                            window.localStorage.setItem(streetField.name, value)
                          })
                          streetField.verifyValue()

                          const zipField = new TextField("zip", ownerList)
                          zipField.value(name => window.localStorage.getItem(name))
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.zip !== undefined) {
                              zipField.value(name => owner.zip)
                            }
                          }
                          zipField.label.innerHTML = "Postleitzahl und Ort"
                          zipField.input.placeholder = "70184 Stuttgart"
                          zipField.input.required = true
                          zipField.input.maxLength = "34"
                          zipField.input.addEventListener("input", () => {
                            const value = zipField.validValue()
                            window.localStorage.setItem(zipField.name, value)
                          })
                          zipField.verifyValue()

                          const stateField = new SelectionField("state", ownerList)
                          stateField.value(name => [window.localStorage.getItem(name)])
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.state !== undefined) {
                              stateField.value(name => [owner.state])
                            }
                          }
                          stateField.label.innerHTML = "Bundesland oder Kanton"
                          stateField.withOptionSelected(option => window.localStorage.setItem(stateField.name, option.value))
                          stateField.verifyValue()

                          const countryField = new SelectionField("country", ownerList)
                          countryField.value(name => [window.localStorage.getItem(name)])
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.country !== undefined) {
                              countryField.value(name => [owner.country])
                            }
                          }
                          countryField.label.innerHTML = "Land"
                          countryField.options(["Deutschland", "Österreich", "Schweiz"])
                          countryField.select.addEventListener("input", (event) => {
                            countryField.withOptionSelected(option => {
                              stateField.addStatesByCountry(option.value)
                              window.localStorage.setItem(countryField.name, option.value)
                            })
                          })
                          countryField.withOptionSelected(option => {
                            stateField.addStatesByCountry(option.value)
                            window.localStorage.setItem(countryField.name, option.value)
                          })
                          countryField.verifyValue()

                          const phoneField = new TelField("phone", ownerList)
                          phoneField.value(name => window.localStorage.getItem(name))
                          if (res.status === 200) {
                            const owner = JSON.parse(res.response)
                            if (owner.phone !== undefined) {
                              phoneField.value(name => owner.phone)
                            }
                          }
                          phoneField.label.innerHTML = "Telefon"
                          phoneField.input.required = true
                          phoneField.input.maxLength = "21"
                          phoneField.input.accept = "text/phone"
                          phoneField.input.placeholder = "+49.."
                          phoneField.input.addEventListener("input", () => {
                            const value = phoneField.validValue()
                            window.localStorage.setItem(phoneField.name, value)
                          })
                          phoneField.verifyValue()

                          const submitButton = document.createElement("div")
                          submitButton.innerHTML = "Speichern"
                          submitButton.style.fontSize = "21px"
                          submitButton.style.margin = "21px 34px"
                          submitButton.style.backgroundColor = "#f7aa20"
                          submitButton.style.borderRadius = "13px"
                          submitButton.style.height = "89px"
                          submitButton.style.display = "flex"
                          submitButton.style.justifyContent = "center"
                          submitButton.style.alignItems = "center"
                          submitButton.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                          submitButton.style.cursor = "pointer"
                          submitButton.addEventListener("click", async () => {

                            let firstname
                            let lastname
                            let street
                            let zip
                            let state
                            let country
                            let phone
                            try {
                              firstname = firstnameField.validValue()
                              lastname = lastnameField.validValue()
                              street = streetField.validValue()
                              zip = zipField.validValue()
                              state = stateField.validValue()[0].value
                              country = countryField.validValue()[0].value
                              phone = phoneField.validValue()
                            } catch (error) {
                              alert(error.message)
                              error.field.scrollIntoView({behavior: 'smooth'})
                              throw error
                            }


                            Helper.addOverlay()
                            Helper.setWaitCursor()
                            try {

                              const register = {}
                              register.url = "/register/owner/closed/3/"
                              register.firstname = firstname
                              register.lastname = lastname
                              register.street = street
                              register.zip = zip
                              register.country = country
                              register.state = state
                              register.phone = phone
                              register.location = window.location.href
                              register.referer = document.referrer
                              register.localStorageEmail = await Request.email()
                              register.localStorageId = await Request.localStorageId()
                              await Request.sequence(register)

                              alert("Speichern erfolgreich..")
                            } catch (error) {
                              alert("Fehler.. Bitte wiederholen.")
                            }
                            window.location.reload()
                          })
                          ownerList.append(submitButton)
                        }



                      })
                    })

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "34px"
                    icon.src = "/public/owner.svg"
                    icon.alt = "Besitzer"
                    button.append(icon)

                    const title = document.createElement("div")
                    title.innerHTML = "Besitzerdaten"
                    title.style.margin = "21px 34px"
                    title.style.fontSize = "21px"
                    button.append(title)
                  }

                  {
                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.justifyContent = "center"
                    const loading = document.createElement("img")
                    loading.src = "/public/load.svg"
                    loading.alt = "Bitte warten.."
                    loading.style.width = "55px"
                    button.append(loading)
                    buttons.append(button)

                    const verify = {}
                    verify.url = "/verify/owner/closed/3/"
                    verify.location = window.location.href
                    verify.referer = document.referrer
                    verify.localStorageEmail = await Request.email()
                    verify.localStorageId = await Request.localStorageId()
                    const res = await Request.middleware(verify)

                    if (res.status !== 200) button.remove()

                    if (res.status === 200) {
                      Helper.reset(button)
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"

                      button.addEventListener("click", () => {

                        Helper.popup(async overlay => {

                          {
                            const header = document.createElement("div")
                            header.style.position = "fixed"
                            header.style.bottom = "0"
                            header.style.left = "0"
                            header.style.width = "100%"
                            header.style.display = "flex"
                            header.style.justifyContent = "flex-start"
                            header.style.alignItems = "center"
                            header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                            header.style.background = "white"
                            header.style.zIndex = "1"
                            header.style.cursor = "pointer"
                            header.addEventListener("click", () => Helper.removeOverlay(overlay))

                            const logo = document.createElement("img")
                            logo.src = "/public/getyour-logo.svg"
                            logo.alt = "Getyour"
                            logo.style.width = "55px"
                            logo.style.margin = "21px 34px"
                            header.append(logo)
                            const title = document.createElement("div")
                            title.innerHTML = `Neue Plattform`
                            title.style.fontWeight = "bold"
                            title.style.fontSize = "21px"
                            header.append(title)
                            overlay.append(header)
                          }

                          {
                            const funnel = document.createElement("div")
                            funnel.style.overflow = "auto"
                            funnel.style.paddingBottom = "144px"
                            funnel.style.overscrollBehavior = "none"

                            const platformNameField = new TextField("platformName", funnel)
                            platformNameField.label.innerHTML = "Name"
                            platformNameField.input.accept = "text/tag"
                            platformNameField.input.maxLength = "21"
                            platformNameField.input.required = true
                            platformNameField.input.placeholder = "meine-plattform"
                            platformNameField.input.addEventListener("input", (event) => {
                              platformNameField.verifyValue()
                            })
                            Helper.setNotValidStyle(platformNameField.input)

                            const logoSelectField = new SelectionField("logoSelect", funnel)
                            logoSelectField.label.textContent = "Logo Option"
                            logoSelectField.options(["Datei hochladen", "login.svg"])
                            logoSelectField.select.addEventListener("input", (event) => {
                              const selected = logoSelectField.validValue()[0].value

                              if (selected === "login.svg") {
                                logoSelectField.icon.style.display = "block"
                                logoSelectField.icon.src = "/public/login.svg"
                              } else {
                                logoSelectField.icon.style.display = "none"
                              }

                              if (selected !== "Datei hochladen") {
                                platformLogoField.input.disabled = true
                                platformLogoField.input.required = false
                                platformLogoField.input.accept = undefined
                                platformLogoField.verifyValue()
                              }

                              if (selected === "Datei hochladen") {
                                platformLogoField.input.disabled = false
                                platformLogoField.input.required = true
                                platformLogoField.input.accept = "image/jpeg, image/png"
                                platformLogoField.verifyValue()
                              }

                            })
                            logoSelectField.verifyValue()

                            const platformLogoField = new FileField("platformLogo", funnel)
                            platformLogoField.label.innerHTML = "Logo"
                            platformLogoField.input.accept = "image/jpeg, image/png"
                            platformLogoField.input.required = true
                            platformLogoField.input.addEventListener("input", async (event) => {
                              await platformLogoField.validImage(event.target.files[0])
                            })
                            Helper.setNotValidStyle(platformLogoField.input)

                            const button = document.createElement("div")
                            button.innerHTML = "Jetzt hinzufügen"
                            button.style.backgroundColor = "#f7aa20"
                            button.style.cursor = "pointer"
                            button.style.fontSize = "21px"
                            button.style.borderRadius = "13px"
                            button.style.margin = "13px 34px"
                            button.style.display = "flex"
                            button.style.justifyContent = "center"
                            button.style.alignItems = "center"
                            button.style.height = "89px"
                            button.style.color = "#000"
                            button.addEventListener("click", async () => {
                              const selected = logoSelectField.validValue()[0].value

                              const platformName = platformNameField.validValue()

                              let platformLogo
                              if (selected === "Datei hochladen") {
                                platformLogo = await platformLogoField.validImage(platformLogoField.input.files[0])
                              } else {
                                platformLogo = new URL(logoSelectField.icon.src).pathname
                              }
                              if (platformLogo === undefined) throw new Error("logo is undefined")

                              const verify = {}
                              verify.url = "/verify/platform/closed/3/"
                              verify.platform = platformName
                              verify.localStorageEmail = await Request.email()
                              verify.localStorageId = await Request.localStorageId()
                              verify.location = window.location.href
                              verify.referer = document.referrer
                              const res = await Request.middleware(verify)

                              if (res.status === 200) {
                                alert("Plattform existiert bereits.")
                                Helper.setNotValidStyle(platformNameField.input)
                                return
                              }

                              try {
                                Helper.addOverlay()
                                Helper.setWaitCursor()
                                const register = {}
                                register.url = "/register/platform/closed/3/"
                                register.type = "new"
                                register.platform = platformName
                                register.logo = platformLogo
                                register.localStorageEmail = await Request.email()
                                register.localStorageId = await Request.localStorageId()
                                register.location = window.location.href
                                register.referer = document.referrer
                                await Request.sequence(register)
                                alert("Plattform erfolgreich hinzugefügt..")
                              } catch (error) {
                                alert("Fehler.. Bitte wiederholen.")
                              }
                              window.location.reload()


                            })
                            funnel.append(button)
                            overlay.append(funnel)
                          }

                        })
                      })

                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/add-icon.svg"
                      icon.alt = "Hinzufügen"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Neue Plattform"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)
                      buttons.append(button)
                    }
                  }

                }

              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => window.location.assign("/"))

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/home.svg"
                icon.alt = "Home"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Startseite"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => window.location.assign("/getyour/pana/login/"))

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/entry.svg"
                icon.alt = "Login"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Login"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => window.location.assign("/getyour/pana/nutzervereinbarung/"))

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/handshake.svg"
                icon.alt = "Nutzervereinbarung"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Nutzervereinbarung"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => window.location.assign("/getyour/pana/datenschutz/"))

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/security.svg"
                icon.alt = "Sicherheit"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Datenschutz Richtilinien"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/company.svg"
                icon.alt = "Unternehmen"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Impressum"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"


                button.addEventListener("click", () => {

                  Helper.popup(overlay => {

                    {
                      const header = document.createElement("div")
                      header.style.position = "fixed"
                      header.style.bottom = "0"
                      header.style.left = "0"
                      header.style.width = "100%"
                      header.style.display = "flex"
                      header.style.justifyContent = "flex-start"
                      header.style.alignItems = "center"
                      header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                      header.style.background = "white"
                      header.style.zIndex = "1"
                      header.style.cursor = "pointer"
                      header.addEventListener("click", () => Helper.removeOverlay(overlay))

                      const logo = document.createElement("img")
                      logo.src = "/public/getyour-logo.svg"
                      logo.alt = "Logo"
                      logo.style.width = "55px"
                      logo.style.margin = "21px 34px"
                      header.append(logo)
                      const title = document.createElement("div")
                      title.innerHTML = `Konflikte`
                      title.style.fontWeight = "bold"
                      title.style.fontSize = "21px"
                      header.append(title)
                      overlay.append(header)
                    }

                    {
                      const buttons = document.createElement("div")
                      buttons.style.overflowY = "auto"
                      buttons.style.overscrollBehavior = "none"
                      buttons.style.paddingBottom = "144px"
                      overlay.append(buttons)

                      {
                        const infoBox = document.createElement("div")

                        infoBox.style.display = "flex"

                        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                          infoBox.style.color = Helper.colors.matte.black
                          infoBox.style.backgroundColor = Helper.colors.matte.celadon
                          infoBox.style.border = `2px solid ${Helper.colors.matte.forest}`
                        } else {
                          infoBox.style.color = Helper.colors.matte.black
                          infoBox.style.backgroundColor = Helper.colors.matte.celadon
                          infoBox.style.border = `2px solid ${Helper.colors.matte.forest}`
                        }

                        infoBox.style.fontSize = "13px"
                        infoBox.style.margin = "21px 34px"
                        infoBox.style.padding = "21px"
                        infoBox.style.borderRadius = "13px"

                        const icon = Helper.iconPicker("smiling-bear")
                        icon.style.width = "144px"
                        icon.style.fill = Helper.colors.matte.black
                        icon.style.marginRight = "8px"
                        infoBox.append(icon)

                        const message = document.createElement("div")
                        message.style.fontSize = "13px"

                        message.innerHTML = `
                          <p>In unserer Gemeinschaft legen wir großen Wert auf Offenheit, Transparenz und ein harmonisches Miteinander. Wir möchten betonen, dass es vollkommen in Ordnung ist, Konflikte zu melden, und wir ermutigen dies sogar ausdrücklich. Konflikte sind ein natürlicher Bestandteil des menschlichen Zusammenlebens und können uns dabei helfen, Missverständnisse aufzuklären, Probleme zu lösen und eine positive Veränderung herbeizuführen.</p>
                        `

                        infoBox.append(message)

                        buttons.append(infoBox)
                      }

                      {
                        const button = document.createElement("div")
                        button.style.display = "flex"
                        button.style.flexWrap = "wrap"
                        button.style.justifyContent = "space-between"
                        button.style.alignItems = "center"
                        button.style.margin = "21px 34px"
                        button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                        button.style.borderRadius = "13px"
                        button.style.border = "0.3px solid black"
                        button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                        button.style.cursor = "pointer"
                        // button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))

                        const icon = document.createElement("img")
                        icon.style.margin = "13px 34px"
                        icon.style.width = "34px"
                        icon.src = "/public/add.svg"
                        icon.alt = "Hinzufügen"
                        button.append(icon)

                        const title = document.createElement("div")
                        title.innerHTML = "Neuen Konflikt melden"
                        title.style.margin = "21px 34px"
                        title.style.fontSize = "21px"
                        button.append(title)

                        buttons.append(button)
                      }

                      {
                        const button = document.createElement("div")
                        button.style.display = "flex"
                        button.style.flexWrap = "wrap"
                        button.style.justifyContent = "space-between"
                        button.style.alignItems = "center"
                        button.style.margin = "21px 34px"
                        button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                        button.style.borderRadius = "13px"
                        button.style.border = "0.3px solid black"
                        button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                        button.style.cursor = "pointer"
                        // button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))



                        /// icon picker
                        const icon = document.createElement("img")
                        icon.style.margin = "13px 34px"
                        icon.style.width = "34px"
                        icon.src = "/public/open.svg"
                        icon.alt = "Offen"
                        button.append(icon)

                        const title = document.createElement("div")
                        title.innerHTML = "Offene Konflikte"
                        title.style.margin = "21px 34px"
                        title.style.fontSize = "21px"
                        button.append(title)

                        buttons.append(button)
                      }

                      {
                        const button = document.createElement("div")
                        button.style.display = "flex"
                        button.style.flexWrap = "wrap"
                        button.style.justifyContent = "space-between"
                        button.style.alignItems = "center"
                        button.style.margin = "21px 34px"
                        button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                        button.style.borderRadius = "13px"
                        button.style.border = "0.3px solid black"
                        button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                        button.style.cursor = "pointer"
                        // button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))

                        const icon = document.createElement("img")
                        icon.style.margin = "13px 34px"
                        icon.style.width = "34px"
                        icon.src = "/public/solved.svg"
                        icon.alt = "Gelöst"
                        button.append(icon)

                        const title = document.createElement("div")
                        title.innerHTML = "Gelöste Konflikte"
                        title.style.margin = "21px 34px"
                        title.style.fontSize = "21px"
                        button.append(title)

                        buttons.append(button)
                      }

                    }

                  })

                })

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/conflict.svg"
                icon.alt = "Konflikt"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Konflikte"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

            }

          })

        })

        leftContainer.append(name)
        header.append(leftContainer)
        document.body.append(header)
      }

      {
        const title = document.createElement("h1")
        title.innerHTML = "Plattformen"
        title.style.margin = "21px 34px"
        title.style.fontWeight = "normal"
        document.body.append(title)
      }

      {
        const platformButtonList = document.createElement("div")
        platformButtonList.classList.add("platform-button-list")
        platformButtonList.style.paddingBottom = "144px"
        platformButtonList.style.overscrollBehavior = "none"

        platformButtonList.style.overflowY = "auto"
        platformButtonList.style.display = "flex"
        platformButtonList.style.justifyContent = "center"
        const loading = document.createElement("img")
        loading.src = "/public/load.svg"
        loading.alt = "Bitte warten.."
        loading.style.width = "55px"
        platformButtonList.append(loading)
        document.body.append(platformButtonList)

        if (window.localStorage.getItem("localStorageId") === null) {
          if (window.localStorage.getItem("email") === null) {

            const get = {}
            get.url = "/get/platforms/open/"
            get.expert = window.location.pathname.split("/")[1]
            get.location = window.location.href
            get.referer = document.referrer
            const res = await Request.middleware(get)

            if (res.status !== 200) {

              Helper.reset(platformButtonList)
              platformButtonList.style.position = "absolute"
              platformButtonList.style.top = "0"
              platformButtonList.style.left = "0"
              platformButtonList.style.height = "89vh"
              platformButtonList.style.width = "100%"
              platformButtonList.style.display = "flex"
              platformButtonList.style.justifyContent = "center"
              platformButtonList.style.alignItems = "center"
              platformButtonList.style.zIndex = "-1"
              platformButtonList.style.color = "gray"
              platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
              throw new Error("platform not found")

            }

            if (res.status === 200) {
              const platforms = JSON.parse(res.response)

              if (platforms.length === 0) {

                Helper.reset(platformButtonList)
                platformButtonList.style.position = "absolute"
                platformButtonList.style.top = "0"
                platformButtonList.style.left = "0"
                platformButtonList.style.height = "89vh"
                platformButtonList.style.width = "100%"
                platformButtonList.style.display = "flex"
                platformButtonList.style.justifyContent = "center"
                platformButtonList.style.alignItems = "center"
                platformButtonList.style.zIndex = "-1"
                platformButtonList.style.color = "gray"
                platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
                throw new Error("platform not found")

              }

              Helper.reset(platformButtonList)
              platformButtonList.style.overflowY = "auto"
              platformButtonList.style.paddingBottom = "144px"
              platformButtonList.style.overscrollBehavior = "none"

              for (let i = 0; i < platforms.length; i++) {

                const platform = platforms[i]

                {
                  const button = document.createElement("div")
                  button.style.display = "flex"
                  button.style.flexWrap = "wrap"
                  button.style.justifyContent = "space-between"
                  button.style.alignItems = "center"
                  button.style.margin = "21px 34px"
                  button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                  button.style.borderRadius = "13px"
                  button.style.border = "0.3px solid black"
                  button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                  button.style.cursor = "pointer"

                  button.addEventListener("click", () => {

                    Helper.popup(async overlay => {

                      {
                        const header = document.createElement("div")
                        header.style.position = "fixed"
                        header.style.bottom = "0"
                        header.style.left = "0"
                        header.style.width = "100%"
                        header.style.display = "flex"
                        header.style.justifyContent = "flex-start"
                        header.style.alignItems = "center"
                        header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                        header.style.background = "white"
                        header.style.zIndex = "1"
                        header.style.cursor = "pointer"
                        header.addEventListener("click", () => Helper.removeOverlay(overlay))

                        const logo = document.createElement("img")
                        logo.src = platform.logo
                        logo.alt = "Logo"
                        logo.style.width = "55px"
                        logo.style.margin = "21px 34px"
                        header.append(logo)
                        const title = document.createElement("div")
                        title.innerHTML = platform.name
                        title.style.fontWeight = "bold"
                        title.style.fontSize = "21px"
                        header.append(title)
                        overlay.append(header)
                      }

                      {
                        const buttons = document.createElement("div")
                        buttons.style.overflow = "auto"
                        buttons.style.paddingBottom = "144px"
                        buttons.style.overscrollBehavior = "none"

                        for (let i = 0; i < platform.values.length; i++) {
                          const value = platform.values[i]

                          const button = document.createElement("div")
                          button.style.display = "flex"
                          button.style.flexWrap = "wrap"
                          button.style.justifyContent = "space-between"
                          button.style.alignItems = "center"
                          button.style.margin = "21px 34px"
                          button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                          button.style.borderRadius = "13px"
                          button.style.border = "0.3px solid black"
                          button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                          button.style.cursor = "pointer"
                          button.addEventListener("click", () => window.location.assign(value.path))

                          const icon = document.createElement("img")
                          icon.style.margin = "13px 34px"
                          icon.style.width = "34px"
                          icon.src = value.logo
                          icon.alt = "Icon"
                          button.append(icon)

                          const title = document.createElement("div")
                          title.innerHTML = value.alias
                          title.style.margin = "21px 34px"
                          title.style.fontSize = "21px"
                          button.append(title)

                          buttons.append(button)
                        }

                        overlay.append(buttons)
                      }

                    })


                  })

                  const icon = document.createElement("img")
                  icon.style.margin = "13px 34px"
                  icon.style.width = "55px"
                  icon.src = platform.logo
                  icon.alt = platform.name
                  button.append(icon)

                  const title = document.createElement("h2")
                  title.style.margin = "13px 34px"
                  title.style.fontWeight = "normal"
                  title.innerHTML = platform.name
                  button.append(title)

                  platformButtonList.append(button)
                }

              }

            }

          }
        }

        if (window.localStorage.getItem("localStorageId") !== null) {
          if (window.localStorage.getItem("email") !== null) {

            {
              const verify = {}
              verify.url = "/verify/expert/closed/3/"
              verify.event = "jwt"
              verify.expert = window.location.pathname.split("/")[1]
              verify.localStorageId = await Request.localStorageId()
              verify.localStorageEmail = await Request.email()
              verify.referer = document.referrer
              verify.location = window.location.href
              const res = await Request.middleware(verify)

              if (res.status !== 200) {

                alert("Ihre Session ist aus Sicherheitsgründen abgelaufen. Sie müssen sich erneut anmelden.")
                window.location.assign("/getyour/pana/login/")

              }

              if (res.status === 200) {

                const get = {}
                get.url = "/get/platforms/closed/3/"
                get.expert = window.location.pathname.split("/")[1]
                get.localStorageEmail = await Request.email()
                get.localStorageId = await Request.localStorageId()
                get.location = window.location.href
                get.referer = document.referrer
                const res = await Request.middleware(get)

                if (res.status !== 200) {

                  Helper.reset(platformButtonList)
                  platformButtonList.style.position = "absolute"
                  platformButtonList.style.top = "0"
                  platformButtonList.style.left = "0"
                  platformButtonList.style.height = "89vh"
                  platformButtonList.style.width = "100%"
                  platformButtonList.style.display = "flex"
                  platformButtonList.style.justifyContent = "center"
                  platformButtonList.style.alignItems = "center"
                  platformButtonList.style.zIndex = "-1"
                  platformButtonList.style.color = "gray"
                  platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
                  throw new Error("platform not found")

                }

                if (res.status === 200) {
                  const platforms = JSON.parse(res.response)

                  if (platforms.length === 0) {

                    Helper.reset(platformButtonList)
                    platformButtonList.style.position = "absolute"
                    platformButtonList.style.top = "0"
                    platformButtonList.style.left = "0"
                    platformButtonList.style.height = "89vh"
                    platformButtonList.style.width = "100%"
                    platformButtonList.style.display = "flex"
                    platformButtonList.style.justifyContent = "center"
                    platformButtonList.style.alignItems = "center"
                    platformButtonList.style.zIndex = "-1"
                    platformButtonList.style.color = "gray"
                    platformButtonList.innerHTML = `<span style="margin: 21px 34px;">Schon bald werden hier Plattformen für dich zur Verfügung stehen.</span>`
                    throw new Error("platform not found")

                  }


                  Helper.reset(platformButtonList)
                  platformButtonList.style.overflowY = "auto"
                  platformButtonList.style.paddingBottom = "144px"
                  platformButtonList.style.overscrollBehavior = "none"

                  for (let i = 0; i < platforms.length; i++) {
                    const platform = platforms[i]

                    const button = document.createElement("div")
                    button.style.display = "flex"
                    button.style.flexWrap = "wrap"
                    button.style.justifyContent = "space-between"
                    button.style.alignItems = "center"
                    button.style.margin = "21px 34px"
                    button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                    button.style.borderRadius = "13px"
                    button.style.border = "0.3px solid black"
                    button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                    button.style.cursor = "pointer"

                    button.addEventListener("click", () => {

                      Helper.popup(async overlay => {

                        {
                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.zIndex = "1"
                          header.style.cursor = "pointer"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = platform.logo
                          logo.alt = platform.name
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = platform.name
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)
                        }

                        {
                          const buttons = document.createElement("div")
                          buttons.style.overflow = "auto"
                          buttons.style.paddingBottom = "144px"
                          buttons.style.overscrollBehavior = "none"

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {

                              Helper.popup(async overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = "Logo"
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = `Plattform`
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }

                                {
                                  const funnel = document.createElement("div")
                                  funnel.style.overflow = "auto"
                                  funnel.style.paddingBottom = "144px"
                                  funnel.style.overscrollBehavior = "none"

                                  const platformNameField = new TextField("platformName", funnel)
                                  platformNameField.value(() => platform.name)
                                  platformNameField.label.innerHTML = "Name"
                                  platformNameField.input.accept = "text/tag"
                                  platformNameField.input.maxLength = "21"
                                  platformNameField.input.required = true
                                  platformNameField.input.placeholder = "meine-plattform"
                                  platformNameField.input.addEventListener("input", (event) => {
                                    platformNameField.verifyValue()
                                  })
                                  platformNameField.verifyValue()

                                  const button = document.createElement("div")
                                  button.innerHTML = "Speichern"
                                  button.style.backgroundColor = "#f7aa20"
                                  button.style.cursor = "pointer"
                                  button.style.fontSize = "21px"
                                  button.style.borderRadius = "13px"
                                  button.style.margin = "13px 34px"
                                  button.style.display = "flex"
                                  button.style.justifyContent = "center"
                                  button.style.alignItems = "center"
                                  button.style.height = "89px"
                                  button.style.color = "#000"
                                  button.addEventListener("click", async () => {

                                    const platformName = platformNameField.validValue()

                                    const verify = {}
                                    verify.url = "/verify/platform/closed/3/"
                                    verify.platform = platformName
                                    verify.localStorageEmail = await Request.email()
                                    verify.localStorageId = await Request.localStorageId()
                                    verify.location = window.location.href
                                    verify.referer = document.referrer
                                    const res = await Request.middleware(verify)

                                    if (res.status === 200) {
                                      alert("Plattform existiert bereits.")
                                      Helper.setNotValidStyle(platformNameField.input)
                                      return
                                    }

                                    try {
                                      Helper.addOverlay()
                                      Helper.setWaitCursor()
                                      const register = {}
                                      register.url = "/register/platform/closed/3/"
                                      register.type = "name"
                                      register.newName = platformName
                                      register.oldName = platform.name
                                      register.localStorageEmail = await Request.email()
                                      register.localStorageId = await Request.localStorageId()
                                      register.location = window.location.href
                                      register.referer = document.referrer
                                      await Request.sequence(register)
                                      alert("Speichern erfolgreich..")
                                    } catch (error) {
                                      alert("Fehler.. Bitte wiederholen.")
                                    }
                                    window.location.reload()


                                  })
                                  funnel.append(button)

                                  overlay.append(funnel)
                                }

                              })
                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/platform.svg"
                            icon.alt = "Plattform"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Plattform"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {

                              Helper.popup(async overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = "Logo"
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = `Logo`
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }

                                {
                                  const funnel = document.createElement("div")
                                  funnel.style.overflow = "auto"
                                  funnel.style.paddingBottom = "144px"
                                  funnel.style.overscrollBehavior = "none"


                                  const logoSelectField = new SelectionField("logoSelect", funnel)
                                  logoSelectField.label.textContent = "Option"
                                  logoSelectField.options(["Datei hochladen", "login.svg"])
                                  logoSelectField.select.addEventListener("input", (event) => {
                                    const selected = logoSelectField.validValue()[0].value

                                    if (selected === "login.svg") {
                                      logoSelectField.icon.style.display = "block"
                                      logoSelectField.icon.src = "/public/login.svg"
                                    } else {
                                      logoSelectField.icon.style.display = "none"
                                    }

                                    if (selected !== "Datei hochladen") {
                                      platformLogoField.input.disabled = true
                                      platformLogoField.input.required = false
                                      platformLogoField.input.accept = undefined
                                      platformLogoField.verifyValue()
                                    }

                                    if (selected === "Datei hochladen") {
                                      platformLogoField.input.disabled = false
                                      platformLogoField.input.required = true
                                      platformLogoField.input.accept = "image/jpeg, image/png"
                                      platformLogoField.verifyValue()
                                    }

                                  })
                                  logoSelectField.verifyValue()

                                  const platformLogoField = new FileField("platformLogo", funnel)
                                  platformLogoField.label.innerHTML = "Logo"
                                  platformLogoField.input.accept = "image/jpeg, image/png"
                                  platformLogoField.input.required = true
                                  platformLogoField.input.addEventListener("input", async (event) => {
                                    await platformLogoField.validImage(event.target.files[0])
                                  })
                                  Helper.setNotValidStyle(platformLogoField.input)

                                  const button = document.createElement("div")
                                  button.innerHTML = "Speichern"
                                  button.style.backgroundColor = "#f7aa20"
                                  button.style.cursor = "pointer"
                                  button.style.fontSize = "21px"
                                  button.style.borderRadius = "13px"
                                  button.style.margin = "13px 34px"
                                  button.style.display = "flex"
                                  button.style.justifyContent = "center"
                                  button.style.alignItems = "center"
                                  button.style.height = "89px"
                                  button.style.color = "#000"
                                  button.addEventListener("click", async () => {
                                    const selected = logoSelectField.validValue()[0].value

                                    let platformLogo
                                    if (selected === "Datei hochladen") {
                                      platformLogo = await platformLogoField.validImage(platformLogoField.input.files[0])
                                    } else {
                                      platformLogo = new URL(logoSelectField.icon.src).pathname
                                    }
                                    if (platformLogo === undefined) throw new Error("logo is undefined")

                                    try {
                                      Helper.addOverlay()
                                      Helper.setWaitCursor()
                                      const register = {}
                                      register.url = "/register/platform/closed/3/"
                                      register.type = "logo"
                                      register.logo = platformLogo
                                      register.name = platform.name
                                      register.localStorageEmail = await Request.email()
                                      register.localStorageId = await Request.localStorageId()
                                      register.location = window.location.href
                                      register.referer = document.referrer
                                      await Request.sequence(register)
                                      alert("Speichern erfolgreich..")
                                    } catch (error) {
                                      alert("Fehler.. Bitte wiederholen.")
                                    }
                                    window.location.reload()


                                  })
                                  funnel.append(button)

                                  overlay.append(funnel)
                                }

                              })
                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/logo.svg"
                            icon.alt = "Logo"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Logo"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {

                              Helper.popup(async overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = "Logo"
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = `Sichtbarkeit`
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }

                                {
                                  const funnel = document.createElement("div")
                                  funnel.style.overflow = "auto"
                                  funnel.style.paddingBottom = "144px"
                                  funnel.style.overscrollBehavior = "none"

                                  const platformVisibilityField = new SelectionField("platformVisibility", funnel)
                                  platformVisibilityField.label.innerHTML = "Sichtbarkeit"
                                  let options
                                  if (platform.visibility === "open") {
                                    options = ["Für alle", "Nur für mich"]
                                  }
                                  if (platform.visibility === "closed") {
                                    options = ["Nur für mich", "Für alle"]
                                  }
                                  for (let i = 0; i < options.length; i++) {
                                    const option = document.createElement("option")
                                    option.value = options[i]
                                    option.text = options[i]
                                    platformVisibilityField.select.append(option)
                                  }
                                  Helper.setValidStyle(platformVisibilityField.select)

                                  const button = document.createElement("div")
                                  button.innerHTML = "Speichern"
                                  button.style.backgroundColor = "#f7aa20"
                                  button.style.cursor = "pointer"
                                  button.style.fontSize = "21px"
                                  button.style.borderRadius = "13px"
                                  button.style.margin = "13px 34px"
                                  button.style.display = "flex"
                                  button.style.justifyContent = "center"
                                  button.style.alignItems = "center"
                                  button.style.height = "89px"
                                  button.style.color = "#000"
                                  button.addEventListener("click", async () => {

                                    const platformVisibility = platformVisibilityField.validValue()[0].value

                                    let visibility
                                    if (platformVisibility === "Nur für mich") {
                                      visibility = "closed"
                                    }
                                    if (platformVisibility === "Für alle") {
                                      visibility = "open"
                                    }

                                    try {
                                      Helper.addOverlay()
                                      Helper.setWaitCursor()
                                      const register = {}
                                      register.url = "/register/platform/closed/3/"
                                      register.type = "visibility"
                                      register.visibility = visibility
                                      register.platform = platform.name
                                      register.localStorageEmail = await Request.email()
                                      register.localStorageId = await Request.localStorageId()
                                      register.location = window.location.href
                                      register.referer = document.referrer
                                      await Request.sequence(register)
                                      alert("Speichern erfolgreich..")
                                    } catch (error) {
                                      alert("Fehler.. Bitte wiederholen.")
                                    }
                                    window.location.reload()


                                  })
                                  funnel.append(button)

                                  overlay.append(funnel)
                                }

                              })
                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"

                            if (platform.visibility === "open") {
                              icon.src = "/public/open-dark.svg"
                            }
                            if (platform.visibility === "closed") {
                              icon.src = "/public/closed.svg"
                            }

                            icon.alt = "Sichtbarkeit"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Sichtbarkeit"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          // Angeobt button refactor
                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"
                            button.addEventListener("click", () => {

                              return alert("Bald verfügbar..")

                              Helper.popup(async overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = platform.name
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = "Angebote"
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }


                                const content = document.createElement("div")
                                content.style.paddingBottom = "144px"
                                content.style.overscrollBehavior = "none"

                                content.style.overflow = "auto"
                                content.style.display = "flex"
                                content.style.justifyContent = "center"
                                content.style.alignItems = "center"
                                content.style.height = "89%"
                                const loading = document.createElement("img")
                                loading.src = "/public/load.svg"
                                loading.alt = "Bitte warten.."
                                loading.style.width = "55px"
                                content.append(loading)
                                overlay.append(content)


                                {
                                  const get = {}
                                  get.url = "/get/offer/closed/3/"
                                  get.platformName = platform.name
                                  get.localStorageEmail = await Request.email()
                                  get.localStorageId = await Request.localStorageId()
                                  get.location = window.location.href
                                  get.referer = document.referrer
                                  const res = await Request.middleware(get)

                                  if (res.status !== 200) {
                                    alert("Im Moment gibt es keine Angebote zu prüfen.")
                                    Helper.removeOverlay(overlay)
                                    throw new Error("offer not found")
                                  }

                                  if (res.status === 200) {
                                    const offers = JSON.parse(res.response)
                                    console.log(offers);


                                    if (offers.length === 0) {
                                      alert("Im Moment gibt es keine Angebote zu prüfen.")
                                      Helper.removeOverlay(overlay)
                                      throw new Error("offer not found")
                                    }

                                    Helper.reset(content)
                                    content.style.overflowY = "auto"
                                    content.style.paddingBottom = "144px"
                                    content.style.overscrollBehavior = "none"

                                    for (let i = 0; i < offers.length; i++) {
                                      const get = offers[i]

                                      const box = document.createElement("div")
                                      box.style.backgroundColor = "white"
                                      box.style.borderRadius = "13px"
                                      box.style.margin = "34px"
                                      box.style.padding = "34px"
                                      box.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                      box.style.border = "0.3px solid black"

                                      const logo = document.createElement("img")
                                      logo.src = get.company.logo.dataUrl
                                      logo.alt = "Logo"
                                      logo.style.width = "55px"
                                      box.append(logo)

                                      const rightAlign = document.createElement("div")
                                      rightAlign.style.textAlign = "right"

                                      const companyName = document.createElement("div")
                                      companyName.innerHTML = get.company.name
                                      companyName.style.fontSize = "21px"
                                      rightAlign.append(companyName)

                                      const reputation = document.createElement("div")
                                      reputation.innerHTML = `Ruf: ${get.reputation}`
                                      reputation.style.fontSize = "13px"
                                      rightAlign.append(reputation)

                                      box.append(rightAlign)

                                      const website = document.createElement("div")
                                      website.style.display = "flex"
                                      website.style.alignItems = "center"

                                      const websiteIcon = document.createElement("img")
                                      websiteIcon.src = "/felix/shs/public/website-icon.svg"
                                      websiteIcon.alt = "Website Icon"

                                      const websiteText = document.createElement("a")
                                      websiteText.innerHTML = "Website"
                                      websiteText.href = get.company.website
                                      websiteText.target = "_blank"
                                      websiteText.style.textDecoration = "underline"
                                      websiteText.style.margin = "8px"
                                      websiteText.style.cursor = "pointer"
                                      website.append(websiteIcon, websiteText)
                                      box.append(website)

                                      const product = document.createElement("div")
                                      product.innerHTML = get.offer.title
                                      product.style.margin = "21px 0"
                                      product.style.fontSize = "21px"
                                      box.append(product)

                                      const description = document.createElement("div")
                                      description.innerHTML = get.offer.description
                                      description.style.marginTop = "13px"
                                      box.append(description)


                                      if (get.offer.productPdf !== undefined) {
                                        const button = document.createElement("div")
                                        button.style.display = "flex"
                                        button.style.margin = "21px 0"
                                        button.style.alignItems = "center"
                                        button.style.cursor = "pointer"
                                        button.addEventListener("click", () => {
                                          const a = document.createElement("a")
                                          a.href = get.offer.productPdf.dataUrl
                                          a.target = "_blank"
                                          a.dispatchEvent(new MouseEvent('click'))
                                        })

                                        const img = document.createElement("img")
                                        img.src = "/public/pdf.svg"
                                        img.alt = "PDF"
                                        img.style.marginRight = "13px"

                                        const title = document.createElement("div")
                                        title.innerHTML = "Produkt"

                                        button.append(img, title)
                                        box.append(button)
                                      }

                                      if (get.offer.companyPdf !== undefined) {
                                        const button = document.createElement("div")
                                        button.style.display = "flex"
                                        button.style.margin = "21px 0"
                                        button.style.alignItems = "center"
                                        button.style.cursor = "pointer"
                                        button.addEventListener("click", () => {
                                          const a = document.createElement("a")
                                          a.href = get.offer.companyPdf.dataUrl
                                          a.target = "_blank"
                                          a.dispatchEvent(new MouseEvent('click'))
                                        })

                                        const img = document.createElement("img")
                                        img.src = "/public/pdf.svg"
                                        img.alt = "PDF"
                                        img.style.marginRight = "13px"

                                        const title = document.createElement("div")
                                        title.innerHTML = "Unternehmen"

                                        button.append(img, title)
                                        box.append(button)
                                      }

                                      if (get.offer.termsPdf !== undefined) {
                                        const button = document.createElement("div")
                                        button.style.display = "flex"
                                        button.style.margin = "21px 0"
                                        button.style.alignItems = "center"
                                        button.style.cursor = "pointer"
                                        button.addEventListener("click", () => {
                                          const a = document.createElement("a")
                                          a.href = get.offer.termsPdf.dataUrl
                                          a.target = "_blank"
                                          a.dispatchEvent(new MouseEvent('click'))
                                        })

                                        const img = document.createElement("img")
                                        img.src = "/public/pdf.svg"
                                        img.alt = "PDF"
                                        img.style.marginRight = "13px"

                                        const title = document.createElement("div")
                                        title.innerHTML = "AGB"

                                        button.append(img, title)
                                        box.append(button)
                                      }

                                      const alignContainer = document.createElement("div")
                                      alignContainer.style.display = "flex"
                                      alignContainer.style.justifyContent = "flex-end"

                                      const priceContainer = document.createElement("div")
                                      priceContainer.style.width = "300px"
                                      priceContainer.style.marginTop = "21px"

                                      const priceTitle = document.createElement("div")
                                      priceTitle.innerHTML = "Preisübersicht"
                                      priceTitle.style.fontSize = "21px"
                                      priceTitle.style.margin = "21px 0"
                                      priceContainer.append(priceTitle)




                                      const netContainer = document.createElement("div")
                                      netContainer.style.display = "flex"
                                      netContainer.style.justifyContent = "space-between"
                                      netContainer.style.margin = "13px 0"

                                      const priceNetTitle = document.createElement("div")
                                      priceNetTitle.innerHTML = "Nettobetrag"

                                      const priceNetAmount = document.createElement("div")
                                      let netAmount = 0
                                      for (let i = 0; i < get.offer.services.length; i++) {
                                        const service = get.offer.services[i]
                                        if (service.selected === true) {
                                          netAmount = netAmount + Number(service.price)
                                        }
                                      }
                                      priceNetAmount.innerHTML = `${netAmount.toFixed(2).replace(".", ",")} €`

                                      netContainer.append(priceNetTitle, priceNetAmount)

                                      priceContainer.append(netContainer)

                                      const vatContainer = document.createElement("div")
                                      vatContainer.style.display = "flex"
                                      vatContainer.style.justifyContent = "space-between"
                                      vatContainer.style.margin = "13px 0"

                                      const priceVatTitle = document.createElement("div")
                                      priceVatTitle.innerHTML = `USt. ${Number(get.offer.vat).toFixed(2).replace(".", ",")} %`

                                      const priceVatAmount = document.createElement("div")
                                      priceVatAmount.innerHTML = `${(netAmount * (Number(get.offer.vat) / 100)).toFixed(2).replace(".", ",")} €`

                                      vatContainer.append(priceVatTitle, priceVatAmount)

                                      priceContainer.append(vatContainer)

                                      const line = document.createElement("hr")

                                      priceContainer.append(line)


                                      const grossContainer = document.createElement("div")
                                      grossContainer.style.display = "flex"
                                      grossContainer.style.justifyContent = "space-between"
                                      grossContainer.style.margin = "21px 0"

                                      const priceGrossTitle = document.createElement("div")
                                      priceGrossTitle.innerHTML = "Gesamt"

                                      const priceGrossAmount = document.createElement("div")
                                      priceGrossAmount.innerHTML = `${(netAmount * (1 + (Number(get.offer.vat) / 100))).toFixed(2).replace(".", ",")} €`

                                      grossContainer.append(priceGrossTitle, priceGrossAmount)

                                      priceContainer.append(grossContainer)


                                      const button = document.createElement("div")
                                      button.innerHTML = "Mehr"
                                      button.style.marginTop = "34px"
                                      button.style.height = "55px"
                                      button.style.backgroundColor = "#f7aa20"
                                      button.style.borderRadius = "13px"
                                      button.style.display = "flex"
                                      button.style.justifyContent = "center"
                                      button.style.alignItems = "center"
                                      button.style.cursor = "pointer"

                                      button.addEventListener("click", () => {

                                        Helper.popup(overlay => {
                                          {
                                            const header = document.createElement("div")
                                            header.style.position = "fixed"
                                            header.style.bottom = "0"
                                            header.style.left = "0"
                                            header.style.width = "100%"
                                            header.style.display = "flex"
                                            header.style.justifyContent = "flex-start"
                                            header.style.alignItems = "center"
                                            header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                            header.style.background = "white"
                                            header.style.zIndex = "1"
                                            header.style.cursor = "pointer"
                                            header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                            const logo = document.createElement("img")
                                            logo.src = platform.logo
                                            logo.alt = platform.name
                                            logo.style.width = "55px"
                                            logo.style.margin = "21px 34px"
                                            header.append(logo)
                                            const title = document.createElement("div")
                                            title.innerHTML = `Angebot von ${get.company.name}`
                                            title.style.fontWeight = "bold"
                                            title.style.fontSize = "21px"
                                            header.append(title)
                                            overlay.append(header)
                                          }

                                          const buttons = document.createElement("div")
                                          buttons.style.overflowY = "auto"
                                          buttons.style.paddingBottom = "144px"
                                          buttons.style.overscrollBehavior = "none"


                                          {
                                            const button = document.createElement("div")
                                            button.style.display = "flex"
                                            button.style.flexWrap = "wrap"
                                            button.style.justifyContent = "space-between"
                                            button.style.alignItems = "center"
                                            button.style.margin = "21px 34px"
                                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                            button.style.borderRadius = "13px"
                                            button.style.border = "0.3px solid black"
                                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                            button.style.cursor = "pointer"
                                            button.addEventListener("click", () => {
                                              const a = document.createElement("a")
                                              a.href = `tel:${get.owner.phone}`
                                              a.dispatchEvent(new MouseEvent('click'))
                                            })

                                            const icon = document.createElement("img")
                                            icon.style.margin = "13px 34px"
                                            icon.style.width = "34px"
                                            icon.src = "/public/phone-out.svg"
                                            icon.alt = "Anrufen"
                                            button.append(icon)

                                            const title = document.createElement("div")
                                            title.innerHTML = "Anrufen"
                                            title.style.margin = "21px 34px"
                                            title.style.fontSize = "21px"
                                            button.append(title)

                                            buttons.append(button)
                                          }

                                          {
                                            const button = document.createElement("div")
                                            button.style.display = "flex"
                                            button.style.flexWrap = "wrap"
                                            button.style.justifyContent = "space-between"
                                            button.style.alignItems = "center"
                                            button.style.margin = "21px 34px"
                                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                            button.style.borderRadius = "13px"
                                            button.style.border = "0.3px solid black"
                                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                            button.style.cursor = "pointer"
                                            button.addEventListener("click", () => {
                                              const a = document.createElement("a")
                                              a.href = `mailto:${get.email}`
                                              a.dispatchEvent(new MouseEvent('click'))
                                            })

                                            const icon = document.createElement("img")
                                            icon.style.margin = "13px 34px"
                                            icon.style.width = "34px"
                                            icon.src = "/public/email-out.svg"
                                            icon.alt = "Anrufen"
                                            button.append(icon)

                                            const title = document.createElement("div")
                                            title.innerHTML = "E-Mail senden"
                                            title.style.margin = "21px 34px"
                                            title.style.fontSize = "21px"
                                            button.append(title)

                                            buttons.append(button)
                                          }

                                          {
                                            const button = document.createElement("div")
                                            button.style.display = "flex"
                                            button.style.flexWrap = "wrap"
                                            button.style.justifyContent = "space-between"
                                            button.style.alignItems = "center"
                                            button.style.margin = "21px 34px"
                                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                            button.style.borderRadius = "13px"
                                            button.style.border = "0.3px solid black"
                                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                            button.style.cursor = "pointer"
                                            button.addEventListener("click", () => {

                                              Helper.popup(async overlay => {

                                                const header = document.createElement("div")
                                                header.style.position = "fixed"
                                                header.style.bottom = "0"
                                                header.style.left = "0"
                                                header.style.width = "100%"
                                                header.style.display = "flex"
                                                header.style.justifyContent = "flex-start"
                                                header.style.alignItems = "center"
                                                header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                header.style.background = "white"
                                                header.style.zIndex = "1"
                                                header.style.cursor = "pointer"
                                                header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                const logo = document.createElement("img")
                                                logo.src = platform.logo
                                                logo.alt = platform.name
                                                logo.style.width = "55px"
                                                logo.style.margin = "21px 34px"
                                                header.append(logo)
                                                const title = document.createElement("div")
                                                title.innerHTML = "Angebot prüfen"
                                                title.style.fontWeight = "bold"
                                                title.style.fontSize = "21px"
                                                header.append(title)
                                                overlay.append(header)


                                                const content = document.createElement("div")
                                                content.style.overflowY = "auto"
                                                content.style.paddingBottom = "144px"
                                                content.style.overscrollBehavior = "none"

                                                {
                                                  const title = document.createElement("div")
                                                  title.innerHTML = "Besitzerdaten"
                                                  title.style.margin = "21px 34px 0 34px"
                                                  title.style.fontSize = "21px"
                                                  content.append(title)
                                                }

                                                {
                                                  const hr = document.createElement("hr")
                                                  hr.style.margin = "0 34px"
                                                  content.append(hr)
                                                }

                                                {
                                                  const owner = document.createElement("div")
                                                  owner.style.margin = "21px 34px"
                                                  owner.innerHTML = `
                                                    ${get.owner.firstname} ${get.owner.lastname}<br/>
                                                    ${get.owner.street}<br/>
                                                    ${get.owner.zip}<br/>
                                                    ${get.owner.state}<br/>
                                                    ${get.owner.country}<br/>
                                                  `
                                                  content.append(owner)
                                                }

                                                {
                                                  const title = document.createElement("div")
                                                  title.innerHTML = "Unternehmensdaten"
                                                  title.style.margin = "21px 34px 0 34px"
                                                  title.style.fontSize = "21px"
                                                  content.append(title)
                                                }

                                                {
                                                  const hr = document.createElement("hr")
                                                  hr.style.margin = "0 34px"
                                                  content.append(hr)
                                                }

                                                {
                                                  const company = document.createElement("div")
                                                  company.style.margin = "21px 34px"
                                                  company.innerHTML = `
                                                    ${get.company.name}<br/>
                                                    ${get.company.sector}<br/>
                                                    <a href="${get.company.website}" target="_blank">${get.company.website}</a>
                                                  `
                                                  content.append(company)
                                                }

                                                {
                                                  const title = document.createElement("div")
                                                  title.innerHTML = "Angebotsdaten"
                                                  title.style.margin = "21px 34px 0 34px"
                                                  title.style.fontSize = "21px"
                                                  content.append(title)
                                                }

                                                {
                                                  const hr = document.createElement("hr")
                                                  hr.style.margin = "0 34px"
                                                  content.append(hr)
                                                }

                                                {
                                                  const offer = document.createElement("div")
                                                  offer.style.margin = "21px 34px"
                                                  offer.innerHTML = `
                                                    ${get.offer.tag}<br/>
                                                    Rabatt: ${get.offer.discount}<br/>
                                                    Steuer: ${Number(get.offer.vat)}<br/>
                                                    <a href="${get.offer.productPdf.dataUrl}" target="_blank">${get.offer.productPdf.name}</a><br/>
                                                    <a href="${get.offer.companyPdf.dataUrl}" target="_blank">${get.offer.companyPdf.name}</a><br/>
                                                    <a href="${get.offer.termsPdf.dataUrl}" target="_blank">${get.offer.termsPdf.name}</a><br/>
                                                    Bitte Beachten: ${get.offer.notes}<br/>
                                                  `
                                                  content.append(offer)
                                                }

                                                {
                                                  const title = document.createElement("div")
                                                  title.innerHTML = "Dienste"
                                                  title.style.margin = "21px 34px 0 34px"
                                                  title.style.fontSize = "21px"
                                                  content.append(title)
                                                }

                                                {
                                                  const hr = document.createElement("hr")
                                                  hr.style.margin = "0 34px"
                                                  content.append(hr)
                                                }

                                                for (let i = 0; i < get.offer.services.length; i++) {
                                                  const service = get.offer.services[i]

                                                  const item = document.createElement("div")
                                                  item.style.margin = "0 34px"
                                                  item.style.height = "34px"
                                                  item.style.display = "flex"
                                                  item.style.alignItems = "center"
                                                  item.style.justifyContent = "space-between"


                                                  const name = document.createElement("div")
                                                  name.innerHTML = service.name
                                                  item.append(name)

                                                  const price = document.createElement("div")
                                                  price.innerHTML = `${Number(service.price).toFixed(2).replace(".", ",")} €`
                                                  item.append(price)

                                                  const selected = document.createElement("input")
                                                  selected.type = "checkbox"
                                                  selected.checked = service.selected
                                                  selected.disabled = true
                                                  price.append(selected)

                                                  content.append(item)
                                                }

                                                {
                                                  const title = document.createElement("div")
                                                  title.innerHTML = "Status"
                                                  title.style.margin = "21px 34px 0 34px"
                                                  title.style.fontSize = "21px"
                                                  content.append(title)
                                                }

                                                {
                                                  const hr = document.createElement("hr")
                                                  hr.style.margin = "0 34px"
                                                  content.append(hr)
                                                }


                                                const status = document.createElement("div")
                                                if (get.offer.verified !== undefined) {
                                                  status.style.margin = "21px 34px"
                                                  status.innerHTML = `
                                                    Status: ${get.offer.verified.status}<br/>
                                                    Grund: ${get.offer.verified.reason}<br/>
                                                  `

                                                  if (get.offer.verified.reason === "offer changed") {
                                                    status.innerHTML = `
                                                      Status: ${get.offer.verified.status}<br/>
                                                      Grund: Angebot wurde verändert<br/>
                                                    `
                                                  }

                                                  content.append(status)
                                                } else {
                                                  status.style.margin = "21px 34px"
                                                  status.innerHTML = `
                                                    Status: 404<br/>
                                                    Grund: Experte muss das Angebot prüfen und freigeben.<br/>
                                                  `
                                                  content.append(status)
                                                }

                                                const options = ["Nicht OK", "OK"]
                                                const verifiedStatusField = new SelectionField("verifiedStatus", content)
                                                verifiedStatusField.label.innerHTML = "Status"
                                                for (let i = 0; i < options.length; i++) {
                                                  const option = document.createElement("option")
                                                  option.value = options[i]
                                                  option.text = options[i]
                                                  verifiedStatusField.select.append(option)
                                                }
                                                Helper.setValidStyle(verifiedStatusField.select)


                                                const verifiedReasonField = new TextAreaField("verifiedReason", content)
                                                verifiedReasonField.label.innerHTML = "Grund"
                                                verifiedReasonField.input.maxLength = "89"
                                                verifiedReasonField.input.style.height = "89px"
                                                verifiedReasonField.input.required = true
                                                verifiedReasonField.input.placeholder = "Es fehlen noch folgende Informationen.."
                                                verifiedReasonField.input.addEventListener("input", (event) => {
                                                  verifiedReasonField.withValidValue()
                                                })
                                                Helper.setNotValidStyle(verifiedReasonField.input)


                                                {
                                                  const button = document.createElement("div")
                                                  button.innerHTML = "Status senden"
                                                  button.style.backgroundColor = "#c02221"
                                                  button.style.cursor = "pointer"
                                                  button.style.fontSize = "21px"
                                                  button.style.borderRadius = "13px"
                                                  button.style.margin = "13px 34px"
                                                  button.style.display = "flex"
                                                  button.style.justifyContent = "center"
                                                  button.style.alignItems = "center"
                                                  button.style.height = "89px"
                                                  button.style.color = "#fff"

                                                  button.addEventListener("click", async () => {

                                                    let status
                                                    let reason
                                                    try {
                                                      status = (await verifiedStatusField.withValidValue())[0].value
                                                      if (status === "OK") {
                                                        status = 200
                                                      }
                                                      if (status === "Nicht OK") {
                                                        status = 500
                                                      }

                                                      reason = await verifiedReasonField.withValidValue()
                                                    } catch (error) {
                                                      alert(error.message)
                                                      error.field.scrollIntoView({behavior: 'smooth'})
                                                      throw error
                                                    }

                                                    try {
                                                      Helper.addOverlay()
                                                      Helper.setWaitCursor()
                                                      {
                                                        const register = {}
                                                        register.url = "/register/offer/closed/3/"
                                                        register.type = "verified"
                                                        register.email = get.email
                                                        register.status = status
                                                        register.reason = reason
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.localStorageEmail = await Request.email()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        const res = await Request.middleware(register)

                                                        if (res.status === 200) {
                                                          alert("Status erfolgreich gesendet..")
                                                        }
                                                      }
                                                    } catch (error) {
                                                      alert("Fehler.. Bitte wiederholen.")
                                                    }
                                                    window.location.reload()
                                                  })
                                                  content.append(button)
                                                }

                                                overlay.append(content)
                                              })
                                            })

                                            const icon = document.createElement("img")
                                            icon.style.margin = "13px 34px"
                                            icon.style.width = "34px"
                                            icon.src = "/public/verify.svg"
                                            icon.alt = "Prüfen"
                                            button.append(icon)

                                            const title = document.createElement("div")
                                            title.innerHTML = "Angebot prüfen"
                                            title.style.margin = "21px 34px"
                                            title.style.fontSize = "21px"
                                            button.append(title)

                                            buttons.append(button)
                                          }

                                          {
                                            const button = document.createElement("div")
                                            button.style.display = "flex"
                                            button.style.flexWrap = "wrap"
                                            button.style.justifyContent = "space-between"
                                            button.style.alignItems = "center"
                                            button.style.margin = "21px 34px"
                                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                            button.style.borderRadius = "13px"
                                            button.style.border = "0.3px solid black"
                                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                            button.style.cursor = "pointer"
                                            button.addEventListener("click", () => {

                                              Helper.popup(async overlay => {

                                                const header = document.createElement("div")
                                                header.style.position = "fixed"
                                                header.style.bottom = "0"
                                                header.style.left = "0"
                                                header.style.width = "100%"
                                                header.style.display = "flex"
                                                header.style.justifyContent = "space-between"
                                                header.style.alignItems = "center"
                                                header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                header.style.background = "white"
                                                header.style.zIndex = "1"

                                                const logo = document.createElement("img")
                                                logo.src = platform.logo
                                                logo.alt = platform.name
                                                logo.style.width = "55px"
                                                logo.style.margin = "21px 34px"
                                                logo.style.cursor = "pointer"
                                                logo.addEventListener("click", () => Helper.removeOverlay(overlay))
                                                header.append(logo)

                                                {
                                                  const form = document.createElement("div")
                                                  form.style.display = "flex"
                                                  form.style.justifyContent = "flex-end"
                                                  form.style.alignItems = "center"
                                                  form.style.marginRight = "34px"
                                                  form.style.width = "89%"

                                                  const input = document.createElement("input")
                                                  input.type = "text"
                                                  input.style.width = "100%"
                                                  input.style.height = "21px"
                                                  input.maxLength = "55"
                                                  input.placeholder = "Feedback zum Angebot.."
                                                  input.addEventListener("keyup", (event) => {
                                                    if (event.key === "Enter") {
                                                      document.querySelector(".submit-feedback").dispatchEvent(new MouseEvent("click"))
                                                    }
                                                  })
                                                  form.append(input)

                                                  const button = document.createElement("img")
                                                  button.classList.add("submit-feedback")
                                                  button.src = "/public/send.svg"
                                                  button.alt = "Senden"
                                                  button.style.width = "34px"
                                                  button.style.marginLeft = "13px"
                                                  button.style.cursor = "pointer"
                                                  button.addEventListener("click", async () => {

                                                    try {
                                                      const securityOverlay = Helper.addOverlay()
                                                      Helper.setWaitCursor()
                                                      const register = {}
                                                      register.url = "/register/feedback/closed/3/"
                                                      register.email = get.email
                                                      register.value = input.value
                                                      register.localStorageEmail = await Request.email()
                                                      register.localStorageId = await Request.localStorageId()
                                                      register.location = window.location.href
                                                      register.referer = document.referrer
                                                      await Request.sequence(register)


                                                      const getFeedback = {}
                                                      getFeedback.url = "/get/offer/closed/3/"
                                                      getFeedback.email = get.email
                                                      getFeedback.localStorageEmail = await Request.email()
                                                      getFeedback.localStorageId = await Request.localStorageId()
                                                      getFeedback.location = window.location.href
                                                      getFeedback.referer = document.referrer
                                                      const res = await Request.middleware(getFeedback)

                                                      if (res.status !== 200) {
                                                        const content = document.querySelector(".feedback-list")
                                                        content.removeAttribute("style")
                                                        content.innerHTML = ""
                                                        content.style.display = "flex"
                                                        content.style.justifyContent = "center"
                                                        content.style.alignItems = "center"
                                                        content.style.color = "gray"
                                                        content.style.height = "89vh"
                                                        content.innerHTML = "Feedbacks konnten nicht geladen werden."
                                                        overlay.append(content)
                                                        throw new Error("feedback not found")
                                                      }

                                                      if (res.status === 200) {
                                                        const feedbacks = JSON.parse(res.response)

                                                        if (feedbacks.length === 0) {
                                                          const content = document.querySelector(".feedback-list")
                                                          content.removeAttribute("style")
                                                          content.innerHTML = ""
                                                          content.style.display = "flex"
                                                          content.style.justifyContent = "center"
                                                          content.style.alignItems = "center"
                                                          content.style.color = "gray"
                                                          content.style.height = "89vh"
                                                          content.innerHTML = "Kein Feedback vorhanden."
                                                          overlay.append(content)
                                                          throw new Error("feedback is empty")
                                                        }

                                                        const content = document.querySelector(".feedback-list")
                                                        content.innerHTML = ""
                                                        for (let i = 0; i < feedbacks.length; i++) {
                                                          const feedback = feedbacks[i]
                                                          const p = document.createElement("p")
                                                          p.style.margin = "21px 34px"
                                                          if (feedback.owner === await Request.localStorageId()) {
                                                            p.innerHTML = `-> ${feedback.value}`
                                                          } else {
                                                            p.innerHTML = `<- ${feedback.value}`
                                                          }
                                                          content.append(p)
                                                        }
                                                        overlay.append(content)
                                                      }

                                                      Helper.removeOverlay(securityOverlay)

                                                    } catch (error) {
                                                      alert("Fehler.. Bitte wiederholen.")
                                                      window.location.reload()
                                                    }


                                                  })
                                                  form.append(button)

                                                  header.append(form)
                                                }


                                                overlay.append(header)

                                                const content = document.createElement("div")
                                                content.classList.add("feedback-list")
                                                content.style.paddingBottom = "144px"
                                                content.style.overscrollBehavior = "none"
                                                content.style.overflow = "auto"
                                                content.style.display = "flex"
                                                content.style.justifyContent = "center"
                                                content.style.alignItems = "center"
                                                content.style.height = "89%"
                                                const loading = document.createElement("img")
                                                loading.src = "/public/load.svg"
                                                loading.alt = "Bitte warten.."
                                                loading.style.width = "55px"
                                                content.append(loading)
                                                overlay.append(content)

                                                const getFeedback = {}
                                                getFeedback.url = "/get/offer/closed/3/"
                                                getFeedback.email = get.email
                                                getFeedback.localStorageEmail = await Request.email()
                                                getFeedback.localStorageId = await Request.localStorageId()
                                                getFeedback.location = window.location.href
                                                getFeedback.referer = document.referrer
                                                const res = await Request.middleware(getFeedback)

                                                if (res.status !== 200) {
                                                  const content = document.querySelector(".feedback-list")
                                                  content.removeAttribute("style")
                                                  content.innerHTML = ""

                                                  content.style.display = "flex"
                                                  content.style.justifyContent = "center"
                                                  content.style.alignItems = "center"
                                                  content.style.color = "gray"
                                                  content.style.height = "89vh"
                                                  content.innerHTML = "Feedbacks konnten nicht geladen werden."
                                                  throw new Error("feedback not found")
                                                }

                                                if (res.status === 200) {
                                                  const feedbacks = JSON.parse(res.response)

                                                  if (feedbacks.length === 0) {
                                                    const content = document.querySelector(".feedback-list")
                                                    content.removeAttribute("style")
                                                    content.innerHTML = ""

                                                    content.style.display = "flex"
                                                    content.style.justifyContent = "center"
                                                    content.style.alignItems = "center"
                                                    content.style.color = "gray"
                                                    content.style.height = "89vh"
                                                    content.innerHTML = "Kein Feedback vorhanden."
                                                    throw new Error("feedback is empty")
                                                  }

                                                  const content = document.querySelector(".feedback-list")
                                                  content.removeAttribute("style")
                                                  content.innerHTML = ""

                                                  content.style.overflowY = "auto"
                                                  content.style.paddingBottom = "144px"
                                                  content.style.overscrollBehavior = "none"

                                                  for (let i = 0; i < feedbacks.length; i++) {
                                                    const feedback = feedbacks[i]
                                                    const p = document.createElement("p")
                                                    p.style.margin = "21px 34px"
                                                    if (feedback.owner === await Request.localStorageId()) {
                                                      p.innerHTML = `-> ${feedback.value}`
                                                    } else {
                                                      p.innerHTML = `<- ${feedback.value}`
                                                    }
                                                    content.append(p)
                                                  }
                                                }


                                              })
                                            })

                                            const icon = document.createElement("img")
                                            icon.style.margin = "13px 34px"
                                            icon.style.width = "34px"
                                            icon.src = "/public/feedback.svg"
                                            icon.alt = "Feedback"
                                            button.append(icon)

                                            const title = document.createElement("div")
                                            title.innerHTML = "Feedback zum Angebot"
                                            title.style.margin = "21px 34px"
                                            title.style.fontSize = "21px"
                                            button.append(title)

                                            buttons.append(button)
                                          }


                                          overlay.append(buttons)
                                        })


                                      })


                                      priceContainer.append(button)
                                      alignContainer.append(priceContainer)
                                      box.append(alignContainer)
                                      content.append(box)


                                    }


                                  }



                                }


                              })

                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/offer.svg"
                            icon.alt = "Angebote"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Neue Angebote"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {

                              Helper.popup(overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = platform.name
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = "Neue Werteinheit"
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }

                                {
                                  const funnel = document.createElement("div")
                                  funnel.style.paddingBottom = "144px"
                                  funnel.style.overscrollBehavior = "none"
                                  funnel.style.overflowY = "auto"
                                  overlay.append(funnel)

                                  const valuePathField = new TextField("valuePath", funnel)
                                  valuePathField.label.innerHTML = "Pfad"
                                  valuePathField.input.accept = "text/tag"
                                  valuePathField.input.maxLength = "21"
                                  valuePathField.input.required = true
                                  valuePathField.input.placeholder = "meine-werteinheit"
                                  valuePathField.input.addEventListener("input", (event) => {
                                    valuePathField.verifyValue()
                                  })
                                  valuePathField.verifyValue()

                                  const valueAliasField = new TextField("valueAlias", funnel)
                                  valueAliasField.label.innerHTML = "Alias"
                                  valueAliasField.input.maxLength = "21"
                                  valueAliasField.input.required = true
                                  valueAliasField.input.placeholder = "Meine Werteinheit"
                                  valueAliasField.input.addEventListener("input", (event) => {
                                    valueAliasField.verifyValue()
                                  })
                                  valueAliasField.verifyValue()

                                  const logoSelectField = new SelectionField("logoSelect", funnel)
                                  logoSelectField.label.textContent = "Logo Option"
                                  logoSelectField.options(["Datei hochladen", "login.svg"])
                                  logoSelectField.select.addEventListener("input", (event) => {
                                    const selected = logoSelectField.validValue()[0].value

                                    if (selected === "login.svg") {
                                      logoSelectField.icon.style.display = "block"
                                      logoSelectField.icon.src = "/public/login.svg"
                                    } else {
                                      logoSelectField.icon.style.display = "none"
                                    }

                                    if (selected !== "Datei hochladen") {
                                      valueLogoField.input.disabled = true
                                      valueLogoField.input.required = false
                                      valueLogoField.input.accept = undefined
                                      valueLogoField.verifyValue()
                                    }

                                    if (selected === "Datei hochladen") {
                                      valueLogoField.input.disabled = false
                                      valueLogoField.input.required = true
                                      valueLogoField.input.accept = "image/jpeg, image/png"
                                      valueLogoField.verifyValue()
                                    }

                                  })
                                  logoSelectField.verifyValue()

                                  const valueLogoField = new FileField("platformLogo", funnel)
                                  valueLogoField.label.innerHTML = "Logo"
                                  valueLogoField.input.accept = "image/jpeg, image/png"
                                  valueLogoField.input.required = true
                                  valueLogoField.input.addEventListener("input", async (event) => {
                                    await valueLogoField.validImage(event.target.files[0])
                                  })
                                  Helper.setNotValidStyle(valueLogoField.input)

                                  const valueLangField = new SelectionField("valueLang", funnel)
                                  valueLangField.label.innerHTML = "Sprache"
                                  const options = ["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]
                                  for (let i = 0; i < options.length; i++) {
                                    const option = document.createElement("option")
                                    option.value = options[i]
                                    option.text = options[i]
                                    valueLangField.select.append(option)
                                  }
                                  valueLangField.select.value = "de"
                                  Helper.setValidStyle(valueLangField.select)

                                  const button = document.createElement("div")
                                  button.innerHTML = "Speichern"
                                  button.style.backgroundColor = "#f7aa20"
                                  button.style.cursor = "pointer"
                                  button.style.fontSize = "21px"
                                  button.style.borderRadius = "13px"
                                  button.style.margin = "13px 34px"
                                  button.style.display = "flex"
                                  button.style.justifyContent = "center"
                                  button.style.alignItems = "center"
                                  button.style.height = "89px"
                                  button.style.color = "#000"
                                  button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"

                                  button.addEventListener("click", async () => {
                                    const selected = logoSelectField.validValue()[0].value

                                    const valuePath = valuePathField.validValue()
                                    const valueAlias = valueAliasField.validValue()

                                    const verify = {}
                                    verify.url = "/verify/platform-value/closed/3/"
                                    verify.type = "path"
                                    verify.platform = platform.name
                                    verify.path = valuePath
                                    verify.localStorageEmail = await Request.email()
                                    verify.localStorageId = await Request.localStorageId()
                                    verify.location = window.location.href
                                    verify.referer = document.referrer
                                    const res = await Request.middleware(verify)

                                    if (res.status === 200) {
                                      alert("Werteinheit existiert bereits.")
                                      Helper.setNotValidStyle(valuePathField.input)
                                      valuePathField.field.scrollIntoView({behavior: "smooth"})
                                      throw new Error("path exist")
                                    }

                                    let valueLogo
                                    if (selected === "Datei hochladen") {
                                      valueLogo = await valueLogoField.validImage(valueLogoField.input.files[0])
                                    } else {
                                      valueLogo = new URL(logoSelectField.icon.src).pathname
                                    }
                                    if (valueLogo === undefined) throw new Error("logo is undefined")

                                    const valueLang = valueLangField.validValue()[0].value

                                    try {
                                      Helper.addOverlay()
                                      Helper.setWaitCursor()
                                      const register = {}
                                      register.url = "/register/platform-value/closed/3/"
                                      register.type = "new"
                                      register.logo = valueLogo
                                      register.platform = platform.name
                                      register.path = valuePath
                                      register.alias = valueAlias
                                      register.lang = valueLang
                                      register.localStorageEmail = await Request.email()
                                      register.localStorageId = await Request.localStorageId()
                                      register.location = window.location.href
                                      register.referer = document.referrer
                                      await Request.sequence(register)
                                      alert("Speichern erfolgreich..")
                                    } catch (error) {
                                      alert("Fehler.. Bitte wiederholen.")
                                    }
                                    window.location.reload()


                                  })
                                  funnel.append(button)

                                }

                              })

                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/add-icon.svg"
                            icon.alt = "Hinzufügen"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Neue Werteinheit"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)
                            buttons.append(button)
                          }

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"
                            button.addEventListener("click", () => {

                              Helper.popup(async overlay => {

                                {
                                  const header = document.createElement("div")
                                  header.style.position = "fixed"
                                  header.style.bottom = "0"
                                  header.style.left = "0"
                                  header.style.width = "100%"
                                  header.style.display = "flex"
                                  header.style.justifyContent = "flex-start"
                                  header.style.alignItems = "center"
                                  header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                  header.style.background = "white"
                                  header.style.zIndex = "1"
                                  header.style.cursor = "pointer"
                                  header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                  const logo = document.createElement("img")
                                  logo.src = platform.logo
                                  logo.alt = platform.name
                                  logo.style.width = "55px"
                                  logo.style.margin = "21px 34px"
                                  header.append(logo)
                                  const title = document.createElement("div")
                                  title.innerHTML = "Werteinheiten"
                                  title.style.fontWeight = "bold"
                                  title.style.fontSize = "21px"
                                  header.append(title)
                                  overlay.append(header)
                                }

                                {
                                  const units = document.createElement("div")
                                  units.style.display = "flex"
                                  units.style.justifyContent = "center"
                                  units.style.alignItems = "center"
                                  units.style.height = "55vh"
                                  const loading = document.createElement("img")
                                  loading.src = "/public/load.svg"
                                  loading.alt = "Bitte warten.."
                                  loading.style.width = "55px"
                                  units.append(loading)
                                  overlay.append(units)


                                  const get = {}
                                  get.url = "/get/platforms/closed/3/"
                                  get.type = "values"
                                  get.platform = platform.name
                                  get.location = window.location.href
                                  get.referer = document.referrer
                                  get.localStorageEmail = await Request.email()
                                  get.localStorageId = await Request.localStorageId()
                                  const res = await Request.middleware(get)

                                  if (res.status !== 200) {
                                    Helper.reset(units)
                                    units.style.position = "absolute"
                                    units.style.top = "0"
                                    units.style.left = "0"
                                    units.style.height = "89vh"
                                    units.style.width = "100%"
                                    units.style.display = "flex"
                                    units.style.justifyContent = "center"
                                    units.style.alignItems = "center"
                                    units.style.zIndex = "-1"
                                    units.style.color = "gray"
                                    units.innerHTML = `<span style="margin: 21px 34px;">Keine Werteinheiten vorhanden.</span>`
                                    throw new Error("platform values not found")
                                  }

                                  if (res.status === 200) {
                                    const values = JSON.parse(res.response)

                                    if (values.length === 0) {
                                      Helper.reset(units)
                                      units.style.position = "absolute"
                                      units.style.top = "0"
                                      units.style.left = "0"
                                      units.style.height = "89vh"
                                      units.style.width = "100%"
                                      units.style.display = "flex"
                                      units.style.justifyContent = "center"
                                      units.style.alignItems = "center"
                                      units.style.zIndex = "-1"
                                      units.style.color = "gray"
                                      units.innerHTML = `<span style="margin: 21px 34px;">Keine Werteinheiten vorhanden.</span>`
                                      throw new Error("platform values is empty")
                                    }

                                    Helper.reset(units)
                                    units.style.overflowY = "auto"
                                    units.style.paddingBottom = "144px"
                                    units.style.overscrollBehavior = "none"

                                    for (let i = 0; i < values.length; i++) {
                                      const value = values[i]

                                      const item = document.createElement("div")
                                      item.classList.add("checklist-item")
                                      item.style.margin = "34px"

                                      const itemHeader = document.createElement("div")
                                      itemHeader.classList.add("item-header")
                                      itemHeader.style.display = "flex"
                                      itemHeader.style.borderTopRightRadius = "21px"
                                      itemHeader.style.borderTopLeftRadius = "21px"
                                      itemHeader.style.borderBottomLeftRadius = "21px"
                                      itemHeader.style.backgroundColor = "#d1d0d0"
                                      itemHeader.style.cursor = "pointer"

                                      itemHeader.addEventListener("click", async () => {

                                        Helper.popup(overlay => {

                                          {
                                            const header = document.createElement("div")
                                            header.style.position = "fixed"
                                            header.style.bottom = "0"
                                            header.style.left = "0"
                                            header.style.width = "100%"
                                            header.style.display = "flex"
                                            header.style.justifyContent = "flex-start"
                                            header.style.alignItems = "center"
                                            header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                            header.style.background = "white"
                                            header.style.zIndex = "1"
                                            header.style.cursor = "pointer"
                                            header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                            const logo = document.createElement("img")
                                            logo.src = platform.logo
                                            logo.alt = "Logo"
                                            logo.style.width = "55px"
                                            logo.style.margin = "21px 34px"
                                            header.append(logo)
                                            const title = document.createElement("div")
                                            title.innerHTML = `${value.path}`
                                            title.style.fontWeight = "bold"
                                            title.style.fontSize = "21px"
                                            header.append(title)
                                            overlay.append(header)
                                          }

                                          {
                                            const buttons = document.createElement("div")
                                            buttons.style.overflowY = "auto"
                                            buttons.style.paddingBottom = "144px"
                                            buttons.style.overscrollBehavior = "none"

                                            overlay.append(buttons)

                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => window.location.assign(value.path))

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/tools-icon-1.svg"
                                              icon.alt = "Icon"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Toolbox"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }


                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => {

                                                Helper.popup(async overlay => {

                                                  {
                                                    const header = document.createElement("div")
                                                    header.style.position = "fixed"
                                                    header.style.bottom = "0"
                                                    header.style.left = "0"
                                                    header.style.width = "100%"
                                                    header.style.display = "flex"
                                                    header.style.justifyContent = "flex-start"
                                                    header.style.alignItems = "center"
                                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                    header.style.background = "white"
                                                    header.style.zIndex = "1"
                                                    header.style.cursor = "pointer"
                                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                    const logo = document.createElement("img")
                                                    logo.src = platform.logo
                                                    logo.alt = "Logo"
                                                    logo.style.width = "55px"
                                                    logo.style.margin = "21px 34px"
                                                    header.append(logo)
                                                    const title = document.createElement("div")
                                                    title.innerHTML = `Pfad`
                                                    title.style.fontWeight = "bold"
                                                    title.style.fontSize = "21px"
                                                    header.append(title)
                                                    overlay.append(header)
                                                  }

                                                  {
                                                    const funnel = document.createElement("div")
                                                    funnel.style.overflow = "auto"
                                                    funnel.style.paddingBottom = "144px"
                                                    funnel.style.overscrollBehavior = "none"

                                                    const valuePathField = new TextField("valuePath", funnel)
                                                    valuePathField.value(() => value.path.split("/")[3])
                                                    valuePathField.label.innerHTML = "Name"
                                                    valuePathField.input.accept = "text/tag"
                                                    valuePathField.input.maxLength = "21"
                                                    valuePathField.input.required = true
                                                    valuePathField.input.placeholder = "Meine Werteinheit"
                                                    valuePathField.input.addEventListener("input", (event) => {
                                                      valuePathField.verifyValue()
                                                    })
                                                    valuePathField.verifyValue()

                                                    const button = document.createElement("div")
                                                    button.innerHTML = "Speichern"
                                                    button.style.backgroundColor = "#f7aa20"
                                                    button.style.cursor = "pointer"
                                                    button.style.fontSize = "21px"
                                                    button.style.borderRadius = "13px"
                                                    button.style.margin = "13px 34px"
                                                    button.style.display = "flex"
                                                    button.style.justifyContent = "center"
                                                    button.style.alignItems = "center"
                                                    button.style.height = "89px"
                                                    button.style.color = "#000"
                                                    button.addEventListener("click", async () => {

                                                      const valuePath = valuePathField.validValue()

                                                      try {
                                                        Helper.addOverlay()
                                                        Helper.setWaitCursor()
                                                        const register = {}
                                                        register.url = "/register/platform-value/closed/3/"
                                                        register.type = "path"
                                                        register.platform = platform.name
                                                        register.oldPath = value.path
                                                        register.newPath = valuePath
                                                        register.localStorageEmail = await Request.email()
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        await Request.sequence(register)
                                                        alert("Speichern erfolgreich..")
                                                      } catch (error) {
                                                        alert("Fehler.. Bitte wiederholen.")
                                                      }
                                                      window.location.reload()


                                                    })
                                                    funnel.append(button)
                                                    overlay.append(funnel)
                                                  }

                                                })
                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/path.svg"
                                              icon.alt = "Pfad"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Pfad"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }

                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => {

                                                Helper.popup(async overlay => {

                                                  {
                                                    const header = document.createElement("div")
                                                    header.style.position = "fixed"
                                                    header.style.bottom = "0"
                                                    header.style.left = "0"
                                                    header.style.width = "100%"
                                                    header.style.display = "flex"
                                                    header.style.justifyContent = "flex-start"
                                                    header.style.alignItems = "center"
                                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                    header.style.background = "white"
                                                    header.style.zIndex = "1"
                                                    header.style.cursor = "pointer"
                                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                    const logo = document.createElement("img")
                                                    logo.src = platform.logo
                                                    logo.alt = "Logo"
                                                    logo.style.width = "55px"
                                                    logo.style.margin = "21px 34px"
                                                    header.append(logo)
                                                    const title = document.createElement("div")
                                                    title.innerHTML = `Alias`
                                                    title.style.fontWeight = "bold"
                                                    title.style.fontSize = "21px"
                                                    header.append(title)
                                                    overlay.append(header)
                                                  }

                                                  {
                                                    const funnel = document.createElement("div")
                                                    funnel.style.overflow = "auto"
                                                    funnel.style.paddingBottom = "144px"
                                                    funnel.style.overscrollBehavior = "none"

                                                    const valueAliasField = new TextField("valueAlias", funnel)
                                                    valueAliasField.value(() => value.alias)
                                                    valueAliasField.label.innerHTML = "Name"
                                                    valueAliasField.input.maxLength = "21"
                                                    valueAliasField.input.required = true
                                                    valueAliasField.input.placeholder = "Meine Werteinheit"
                                                    valueAliasField.input.addEventListener("input", (event) => {
                                                      valueAliasField.verifyValue()
                                                    })
                                                    valueAliasField.verifyValue()

                                                    const button = document.createElement("div")
                                                    button.innerHTML = "Speichern"
                                                    button.style.backgroundColor = "#f7aa20"
                                                    button.style.cursor = "pointer"
                                                    button.style.fontSize = "21px"
                                                    button.style.borderRadius = "13px"
                                                    button.style.margin = "13px 34px"
                                                    button.style.display = "flex"
                                                    button.style.justifyContent = "center"
                                                    button.style.alignItems = "center"
                                                    button.style.height = "89px"
                                                    button.style.color = "#000"
                                                    button.addEventListener("click", async () => {

                                                      const valueAlias = valueAliasField.validValue()

                                                      try {
                                                        Helper.addOverlay()
                                                        Helper.setWaitCursor()
                                                        const register = {}
                                                        register.url = "/register/platform-value/closed/3/"
                                                        register.type = "alias"
                                                        register.alias = valueAlias
                                                        register.platform = platform.name
                                                        register.path = value.path
                                                        register.localStorageEmail = await Request.email()
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        await Request.sequence(register)
                                                        alert("Speichern erfolgreich..")
                                                      } catch (error) {
                                                        alert("Fehler.. Bitte wiederholen.")
                                                      }
                                                      window.location.reload()


                                                    })
                                                    funnel.append(button)
                                                    overlay.append(funnel)
                                                  }

                                                })
                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/alias.svg"
                                              icon.alt = "Alias"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Alias"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }

                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => {

                                                Helper.popup(async overlay => {

                                                  {
                                                    const header = document.createElement("div")
                                                    header.style.position = "fixed"
                                                    header.style.bottom = "0"
                                                    header.style.left = "0"
                                                    header.style.width = "100%"
                                                    header.style.display = "flex"
                                                    header.style.justifyContent = "flex-start"
                                                    header.style.alignItems = "center"
                                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                    header.style.background = "white"
                                                    header.style.zIndex = "1"
                                                    header.style.cursor = "pointer"
                                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                    const logo = document.createElement("img")
                                                    logo.src = platform.logo
                                                    logo.alt = "Logo"
                                                    logo.style.width = "55px"
                                                    logo.style.margin = "21px 34px"
                                                    header.append(logo)
                                                    const title = document.createElement("div")
                                                    title.innerHTML = `Icon`
                                                    title.style.fontWeight = "bold"
                                                    title.style.fontSize = "21px"
                                                    header.append(title)
                                                    overlay.append(header)
                                                  }

                                                  {
                                                    const funnel = document.createElement("div")
                                                    funnel.style.overflow = "auto"
                                                    funnel.style.paddingBottom = "144px"
                                                    funnel.style.overscrollBehavior = "none"

                                                    const logoSelectField = new SelectionField("logoSelect", funnel)
                                                    logoSelectField.label.textContent = "Logo Option"
                                                    logoSelectField.options(["Datei hochladen", "login.svg"])
                                                    logoSelectField.select.addEventListener("input", (event) => {
                                                      const selected = logoSelectField.validValue()[0].value

                                                      if (selected === "login.svg") {
                                                        logoSelectField.icon.style.display = "block"
                                                        logoSelectField.icon.src = "/public/login.svg"
                                                      } else {
                                                        logoSelectField.icon.style.display = "none"
                                                      }

                                                      if (selected !== "Datei hochladen") {
                                                        valueLogoField.input.disabled = true
                                                        valueLogoField.input.required = false
                                                        valueLogoField.input.accept = undefined
                                                        valueLogoField.verifyValue()
                                                      }

                                                      if (selected === "Datei hochladen") {
                                                        valueLogoField.input.disabled = false
                                                        valueLogoField.input.required = true
                                                        valueLogoField.input.accept = "image/jpeg, image/png"
                                                        valueLogoField.verifyValue()
                                                      }

                                                    })
                                                    logoSelectField.verifyValue()

                                                    const valueLogoField = new FileField("platformLogo", funnel)
                                                    valueLogoField.label.innerHTML = "Logo"
                                                    valueLogoField.input.accept = "image/jpeg, image/png"
                                                    valueLogoField.input.required = true
                                                    valueLogoField.input.addEventListener("input", async (event) => {
                                                      await valueLogoField.validImage(event.target.files[0])
                                                    })
                                                    Helper.setNotValidStyle(valueLogoField.input)

                                                    const button = document.createElement("div")
                                                    button.innerHTML = "Speichern"
                                                    button.style.backgroundColor = "#f7aa20"
                                                    button.style.cursor = "pointer"
                                                    button.style.fontSize = "21px"
                                                    button.style.borderRadius = "13px"
                                                    button.style.margin = "13px 34px"
                                                    button.style.display = "flex"
                                                    button.style.justifyContent = "center"
                                                    button.style.alignItems = "center"
                                                    button.style.height = "89px"
                                                    button.style.color = "#000"
                                                    button.addEventListener("click", async () => {
                                                      const selected = logoSelectField.validValue()[0].value

                                                      let valueLogo
                                                      if (selected === "Datei hochladen") {
                                                        valueLogo = await valueLogoField.validImage(valueLogoField.input.files[0])
                                                      } else {
                                                        valueLogo = new URL(logoSelectField.icon.src).pathname
                                                      }
                                                      if (valueLogo === undefined) throw new Error("logo is undefined")

                                                      try {
                                                        Helper.addOverlay()
                                                        Helper.setWaitCursor()
                                                        const register = {}
                                                        register.url = "/register/platform-value/closed/3/"
                                                        register.type = "logo"
                                                        register.logo = valueLogo
                                                        register.name = platform.name
                                                        register.path = value.path
                                                        register.localStorageEmail = await Request.email()
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        await Request.sequence(register)
                                                        alert("Speichern erfolgreich..")
                                                      } catch (error) {
                                                        alert("Fehler.. Bitte wiederholen.")
                                                      }
                                                      window.location.reload()


                                                    })
                                                    funnel.append(button)

                                                    overlay.append(funnel)
                                                  }

                                                })
                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/logo.svg"
                                              icon.alt = "Logo"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Logo"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }


                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => {

                                                Helper.popup(async overlay => {

                                                  {
                                                    const header = document.createElement("div")
                                                    header.style.position = "fixed"
                                                    header.style.bottom = "0"
                                                    header.style.left = "0"
                                                    header.style.width = "100%"
                                                    header.style.display = "flex"
                                                    header.style.justifyContent = "flex-start"
                                                    header.style.alignItems = "center"
                                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                    header.style.background = "white"
                                                    header.style.zIndex = "1"
                                                    header.style.cursor = "pointer"
                                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                    const logo = document.createElement("img")
                                                    logo.src = platform.logo
                                                    logo.alt = "Logo"
                                                    logo.style.width = "55px"
                                                    logo.style.margin = "21px 34px"
                                                    header.append(logo)
                                                    const title = document.createElement("div")
                                                    title.innerHTML = `Sprache`
                                                    title.style.fontWeight = "bold"
                                                    title.style.fontSize = "21px"
                                                    header.append(title)
                                                    overlay.append(header)
                                                  }

                                                  {
                                                    const funnel = document.createElement("div")
                                                    funnel.style.overflow = "auto"
                                                    funnel.style.paddingBottom = "144px"
                                                    funnel.style.overscrollBehavior = "none"

                                                    const valueLangField = new SelectionField("valueLang", funnel)
                                                    valueLangField.label.innerHTML = "Sprache"
                                                    const options = ["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]
                                                    for (let i = 0; i < options.length; i++) {
                                                      const option = document.createElement("option")
                                                      option.value = options[i]
                                                      option.text = options[i]
                                                      valueLangField.select.append(option)
                                                    }
                                                    valueLangField.select.value = value.lang
                                                    Helper.setValidStyle(valueLangField.select)

                                                    const button = document.createElement("div")
                                                    button.innerHTML = "Speichern"
                                                    button.style.backgroundColor = "#f7aa20"
                                                    button.style.cursor = "pointer"
                                                    button.style.fontSize = "21px"
                                                    button.style.borderRadius = "13px"
                                                    button.style.margin = "13px 34px"
                                                    button.style.display = "flex"
                                                    button.style.justifyContent = "center"
                                                    button.style.alignItems = "center"
                                                    button.style.height = "89px"
                                                    button.style.color = "#000"
                                                    button.addEventListener("click", async () => {

                                                      const valueLang = valueLangField.validValue()[0].value

                                                      try {
                                                        Helper.addOverlay()
                                                        Helper.setWaitCursor()
                                                        const register = {}
                                                        register.url = "/register/platform-value/closed/3/"
                                                        register.type = "lang"
                                                        register.lang = valueLang
                                                        register.platform = platform.name
                                                        register.path = value.path
                                                        register.localStorageEmail = await Request.email()
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        await Request.sequence(register)
                                                        alert("Speichern erfolgreich..")
                                                      } catch (error) {
                                                        alert("Fehler.. Bitte wiederholen.")
                                                      }
                                                      window.location.reload()


                                                    })
                                                    funnel.append(button)

                                                    overlay.append(funnel)
                                                  }

                                                })
                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/lang.svg"
                                              icon.alt = "Sprache"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Sprache"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }


                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", () => {

                                                Helper.popup(async overlay => {

                                                  {
                                                    const header = document.createElement("div")
                                                    header.style.position = "fixed"
                                                    header.style.bottom = "0"
                                                    header.style.left = "0"
                                                    header.style.width = "100%"
                                                    header.style.display = "flex"
                                                    header.style.justifyContent = "flex-start"
                                                    header.style.alignItems = "center"
                                                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                                    header.style.background = "white"
                                                    header.style.zIndex = "1"
                                                    header.style.cursor = "pointer"
                                                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                                    const logo = document.createElement("img")
                                                    logo.src = platform.logo
                                                    logo.alt = "Logo"
                                                    logo.style.width = "55px"
                                                    logo.style.margin = "21px 34px"
                                                    header.append(logo)
                                                    const title = document.createElement("div")
                                                    title.innerHTML = `Sichtbarkeit`
                                                    title.style.fontWeight = "bold"
                                                    title.style.fontSize = "21px"
                                                    header.append(title)
                                                    overlay.append(header)
                                                  }

                                                  {
                                                    const funnel = document.createElement("div")
                                                    funnel.style.overflow = "auto"
                                                    funnel.style.paddingBottom = "144px"
                                                    funnel.style.overscrollBehavior = "none"

                                                    const valueVisibilityField = new SelectionField("valueVisibility", funnel)
                                                    valueVisibilityField.label.innerHTML = "Sichtbarkeit"
                                                    let options
                                                    if (value.visibility === "open") {
                                                      options = ["Für alle", "Nur für mich"]
                                                    }
                                                    if (value.visibility === "closed") {
                                                      options = ["Nur für mich", "Für alle"]
                                                    }
                                                    for (let i = 0; i < options.length; i++) {
                                                      const option = document.createElement("option")
                                                      option.value = options[i]
                                                      option.text = options[i]
                                                      valueVisibilityField.select.append(option)
                                                    }
                                                    Helper.setValidStyle(valueVisibilityField.select)

                                                    const button = document.createElement("div")
                                                    button.innerHTML = "Speichern"
                                                    button.style.backgroundColor = "#f7aa20"
                                                    button.style.cursor = "pointer"
                                                    button.style.fontSize = "21px"
                                                    button.style.borderRadius = "13px"
                                                    button.style.margin = "13px 34px"
                                                    button.style.display = "flex"
                                                    button.style.justifyContent = "center"
                                                    button.style.alignItems = "center"
                                                    button.style.height = "89px"
                                                    button.style.color = "#000"
                                                    button.addEventListener("click", async () => {

                                                      const valueVisibility = valueVisibilityField.validValue()[0].value

                                                      let visibility
                                                      if (valueVisibility === "Nur für mich") {
                                                        visibility = "closed"
                                                      }
                                                      if (valueVisibility === "Für alle") {
                                                        visibility = "open"
                                                      }

                                                      try {
                                                        Helper.addOverlay()
                                                        Helper.setWaitCursor()
                                                        const register = {}
                                                        register.url = "/register/platform-value/closed/3/"
                                                        register.type = "visibility"
                                                        register.visibility = visibility
                                                        register.name = platform.name
                                                        register.path = value.path
                                                        register.localStorageEmail = await Request.email()
                                                        register.localStorageId = await Request.localStorageId()
                                                        register.location = window.location.href
                                                        register.referer = document.referrer
                                                        await Request.sequence(register)
                                                        alert("Speichern erfolgreich..")
                                                      } catch (error) {
                                                        alert("Fehler.. Bitte wiederholen.")
                                                      }
                                                      window.location.reload()


                                                    })
                                                    funnel.append(button)

                                                    overlay.append(funnel)
                                                  }

                                                })
                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"

                                              if (value.visibility === "open") {
                                                icon.src = "/public/open-dark.svg"
                                              }
                                              if (value.visibility === "closed") {
                                                icon.src = "/public/closed.svg"
                                              }

                                              icon.alt = "Sichtbarkeit"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Sichtbarkeit"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }

                                            {
                                              const button = document.createElement("div")
                                              button.style.display = "flex"
                                              button.style.flexWrap = "wrap"
                                              button.style.justifyContent = "space-between"
                                              button.style.alignItems = "center"
                                              button.style.margin = "21px 34px"
                                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"

                                              button.style.borderRadius = "13px"
                                              button.style.border = "0.3px solid black"
                                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                              button.style.cursor = "pointer"

                                              button.addEventListener("click", async () => {

                                                let securityOverlay
                                                try {
                                                  const confirm = window.confirm("Möchtest du die Werteinheit wirklich löschen? Alle enthaltenen Daten werden ebenfalls gelöscht.")
                                                  if (confirm === true) {
                                                    securityOverlay = Helper.addOverlay()
                                                    Helper.setWaitCursor()
                                                    {
                                                      const del = {}
                                                      del.url = "/delete/platform-value/closed/3/"
                                                      del.platform = platform.name
                                                      del.path = value.path
                                                      del.localStorageId = await Request.localStorageId()
                                                      del.localStorageEmail = await Request.email()
                                                      del.location = window.location.href
                                                      del.referer = document.referrer
                                                      await Request.sequence(del)
                                                    }
                                                    alert("Werteinheit erfolgreich gelöscht.")
                                                    window.location.reload()
                                                  }
                                                } catch (error) {
                                                  alert("Fehler.. Bitte wiederholen.")
                                                  Helper.removeOverlay(securityOverlay)
                                                }

                                              })

                                              const icon = document.createElement("img")
                                              icon.style.margin = "13px 34px"
                                              icon.style.width = "34px"
                                              icon.src = "/public/delete.svg"
                                              icon.alt = "Löschen"
                                              button.append(icon)

                                              const title = document.createElement("div")
                                              title.innerHTML = "Löschen"
                                              title.style.margin = "21px 34px"
                                              title.style.fontSize = "21px"
                                              button.append(title)

                                              buttons.append(button)
                                            }

                                          }

                                        })
                                      })

                                      const itemState = document.createElement("div")
                                      itemState.classList.add("item-state")
                                      itemState.style.display = "flex"
                                      itemState.style.justifyContent = "center"
                                      itemState.style.alignItems = "center"
                                      itemState.style.width = "89px"
                                      itemState.style.height = "89px"
                                      itemState.style.backgroundColor = "#c6c6c6"
                                      itemState.style.fontSize = "34px"
                                      if (value.visibility === "closed") {
                                        if (value.roles.length === 0) {
                                          if (value.authorized.length === 0) {
                                            const stateIcon = document.createElement("img")
                                            stateIcon.src = "/public/closed.svg"
                                            stateIcon.alt = "Nur für mich"
                                            stateIcon.style.width = "34px"
                                            itemState.append(stateIcon)
                                          }
                                        }
                                      }
                                      if (value.visibility === "open") {
                                        itemState.style.backgroundColor = "#006f39"
                                        const stateIcon = document.createElement("img")
                                        stateIcon.src = "/public/open.svg"
                                        stateIcon.alt = "Für alle"
                                        stateIcon.style.width = "34px"
                                        itemState.append(stateIcon)
                                      }
                                      if (value.visibility === "closed") {
                                        if (value.roles.length !== 0 || value.authorized.length !== 0) {
                                          itemState.style.backgroundColor = "#eed202"
                                          const stateIcon = document.createElement("img")
                                          stateIcon.src = "/public/locked.svg"
                                          stateIcon.alt = "Nur für bestimmte"
                                          stateIcon.style.width = "34px"
                                          itemState.append(stateIcon)
                                        }
                                      }
                                      itemState.style.borderTopLeftRadius = "21px"
                                      itemState.style.borderBottomLeftRadius = "21px"

                                      const itemTitle = document.createElement("div")
                                      itemTitle.classList.add("item-title")
                                      itemTitle.style.alignSelf = "center"
                                      itemTitle.style.marginLeft = "13px"
                                      itemTitle.innerHTML = `${value.alias}`
                                      itemTitle.style.fontSize = "21px"

                                      {
                                        const path = document.createElement("div")
                                        path.innerHTML = `${value.path}`
                                        path.style.fontSize = "13px"
                                        itemTitle.append(path)
                                      }

                                      itemHeader.append(itemState, itemTitle)
                                      item.append(itemHeader)


                                      const itemBody = document.createElement("div")
                                      itemBody.classList.add("item-body")
                                      itemBody.style.marginLeft = "8%"
                                      itemBody.style.backgroundColor = "#dbdbdb"
                                      itemBody.style.borderBottomRightRadius = "21px"
                                      itemBody.style.borderBottomLeftRadius = "21px"
                                      itemBody.style.padding = "21px"
                                      itemBody.style.display = "flex"
                                      itemBody.style.flexDirection = "column"
                                      itemBody.style.boxShadow = "0 3px 5px rgba(0, 0, 0, 0.13)"

                                      const buttons = document.createElement("div")
                                      buttons.style.display = "flex"
                                      buttons.style.alignItems = "center"

                                      {
                                        const button = document.createElement("img")
                                        button.src = "/public/tools-icon-1.svg"
                                        button.alt = "Toolbox"
                                        button.style.width = "55px"
                                        button.style.padding = "13px"
                                        button.style.cursor = "pointer"
                                        button.addEventListener("click", () => window.location.assign(value.path))
                                        buttons.append(button)
                                      }

                                      itemBody.append(buttons)
                                      item.append(itemBody)
                                      units.append(item)
                                    }
                                  }

                                }

                              })
                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/value.svg"
                            icon.alt = "Werteinheit"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Werteinheiten"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"

                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", async () => {

                              let securityOverlay
                              try {
                                const confirm = window.confirm("Möchtest du die Plattform wirklich löschen? Alle enthaltenen Dokumente werden ebenfalls gelöscht.")
                                if (confirm === true) {
                                  securityOverlay = Helper.addOverlay()
                                  Helper.setWaitCursor()
                                  {
                                    const del = {}
                                    del.url = "/delete/platform/closed/3/"
                                    del.platform = platform.name
                                    del.localStorageId = await Request.localStorageId()
                                    del.localStorageEmail = await Request.email()
                                    del.location = window.location.href
                                    del.referer = document.referrer
                                    await Request.sequence(del)
                                  }
                                  alert("Plattform erfolgreich gelöscht.")
                                  window.location.reload()
                                }
                              } catch (error) {
                                alert("Fehler.. Bitte wiederholen.")
                                Helper.removeOverlay(securityOverlay)
                              }


                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/delete.svg"
                            icon.alt = "Löschen"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Löschen"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            buttons.append(button)
                          }

                          overlay.append(buttons)
                        }


                      })

                    })

                    const icon = document.createElement("img")
                    icon.style.margin = "13px 34px"
                    icon.style.width = "55px"
                    icon.src = platform.logo
                    icon.alt = platform.name
                    button.append(icon)

                    const title = document.createElement("h2")
                    title.style.margin = "13px 34px"
                    title.style.fontWeight = "normal"
                    title.innerHTML = platform.name
                    button.append(title)

                    platformButtonList.append(button)
                  }

                }

              }

            }

          }
        }



      }

    </script>

  </body>
</html>
