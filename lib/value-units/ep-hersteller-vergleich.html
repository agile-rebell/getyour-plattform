<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Energie Portal Hersteller Vergleich</title>

    <style>

      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
        background-color: #ebebeb;
        padding-bottom: 144px;
      }

    </style>

  </head>

  <body>



    <header></header>

    <h1 class="title"></h1>

    <div class="info"></div>

    <div class="offer-list"></div>



    <script type="module">
      import { DivField } from "/js/DivField.js"
      import { Helper } from "/js/Helper.js"
      import { Request } from "/js/Request.js"
      import { HeaderField } from "/js/HeaderField.js"
      import { InfoField } from "/js/InfoField.js"
      import { TextField } from "/js/TextField.js"
      import { SelectionField } from "/js/SelectionField.js"
      import { TelField } from "/js/TelField.js"
      import { EmailField } from "/js/EmailField.js"


      const storageName = "epFunnel"
      let funnel = JSON.parse(window.sessionStorage.getItem(storageName))
      {
        const get = {}
        get.url = "/get/funnel/closed/4/"
        get.tag = storageName
        get.urlId = urlId
        get.localStorageId = await Request.localStorageId()
        get.localStorageEmail = await Request.email()
        get.location = window.location.href
        get.referer = document.referrer
        const res = await Request.middleware(get)

        if (res.status === 200) {
          funnel = JSON.parse(res.response)
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        }
      }
      if (funnel === null) {
        window.location.assign(`/felix/ep/qualifizierung/${urlId}/4/`)
        throw new Error("funnel not found")
      }


      const header = document.querySelector("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.zIndex = "1"
      header.style.justifyContent = "space-between"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/felix/shs/public/ep-logo.svg"
      logo.alt = "Energie Portal"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Energie Portal"
      name.style.padding = "21px 34px"
      name.style.fontSize = "21px"
      // name.style.color = "#7bc043"
      name.style.cursor = "pointer"
      name.addEventListener("click", () => {



        Helper.popup(async overlay => {

          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Portal"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Energie Portal"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)



          const buttons = document.createElement("div")
          buttons.style.overflow = "auto"
          buttons.style.paddingBottom = "144px"

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/ep/qualifizierung/${urlId}/4/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Neustart"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/ep/abfrage-haus/${urlId}/4/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zum Haus"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/ep/abfrage-heizung/${urlId}/4/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zur Heizung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {

            async function callback(event) {
              window.location.assign(`/felix/ep/abfrage-strom/${urlId}/4/`)
            }



            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", callback)

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zum Strom"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }


          {

            async function callback(event) {
              window.location.assign(`/felix/ep/abfrage-technisches/${urlId}/4/`)
            }

            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", callback)

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zur technischen Ausstattung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }




          // {

          //   async function callback(event) {




          //     Helper.popup(overlay => {

          //       const header = document.createElement("div")
          //       header.style.position = "fixed"
          //       header.style.bottom = "0"
          //       header.style.left = "0"
          //       header.style.width = "100%"
          //       header.style.display = "flex"
          //       header.style.justifyContent = "flex-start"
          //       header.style.alignItems = "center"
          //       header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          //       header.style.background = "white"
          //       header.style.cursor = "pointer"
          //       header.style.zIndex = "1"
          //       header.addEventListener("click", () => Helper.removeOverlay(overlay))

          //       const logo = document.createElement("img")
          //       logo.src = "/felix/shs/public/ep-logo.svg"
          //       logo.alt = "Energie Portal"
          //       logo.style.width = "55px"
          //       logo.style.margin = "21px 34px"
          //       header.append(logo)
          //       const title = document.createElement("div")
          //       title.innerHTML = "Bewerben"
          //       title.style.fontWeight = "bold"
          //       title.style.fontSize = "21px"
          //       header.append(title)
          //       overlay.append(header)


          //       const funnel = document.createElement("div")
          //       funnel.style.overflow = "auto"
          //       funnel.style.paddingBottom = "144px"

          //       const promoter = document.createElement("div")
          //       promoter.classList.add("promoter")
          //       funnel.append(promoter)
          //       overlay.append(funnel)

          //       const preference = document.createElement("div")
          //       preference.classList.add("preference")
          //       funnel.append(preference)
          //       overlay.append(funnel)


          //       const firstname = document.createElement("div")
          //       firstname.classList.add("firstname")
          //       funnel.append(firstname)
          //       overlay.append(funnel)


          //       const lastname = document.createElement("div")
          //       lastname.classList.add("lastname")
          //       funnel.append(lastname)
          //       overlay.append(funnel)


          //       const street = document.createElement("div")
          //       street.classList.add("street")
          //       funnel.append(street)
          //       overlay.append(funnel)


          //       const zip = document.createElement("div")
          //       zip.classList.add("zip")
          //       funnel.append(zip)
          //       overlay.append(funnel)


          //       const country = document.createElement("div")
          //       country.classList.add("country")
          //       funnel.append(country)
          //       overlay.append(funnel)

          //       const state = document.createElement("div")
          //       state.classList.add("state")
          //       funnel.append(state)
          //       overlay.append(funnel)

          //       const phone = document.createElement("div")
          //       phone.classList.add("phone")
          //       funnel.append(phone)
          //       overlay.append(funnel)


          //       const email = document.createElement("div")
          //       email.classList.add("email")
          //       funnel.append(email)
          //       overlay.append(funnel)


          //       const checkAndProceed = document.createElement("div")
          //       checkAndProceed.classList.add("check-and-proceed")
          //       funnel.append(checkAndProceed)
          //       overlay.append(funnel)

          //       })


          //       const promoterField = new SelectionField("promoter")
          //       .withLabel(label => label.innerHTML = "Von welchem Unternehmen möchtest du Angebote erhalten?")
          //       .onInput(async() => {
          //       promoterField.withStorage(value => {
          //         window.localStorage.setItem(promoterField.name, value[0])
          //       })
          //       })
          //       .fromStorage((name) => [window.localStorage.getItem(name)])
          //       promoterField.withStorage(value => {
          //       window.localStorage.setItem(promoterField.name, value[0])
          //       })


          //       {
          //         const get = {}
          //         get.url = "/get/promoter/closed/4/"
          //         get.localStorageEmail = await Request.email()
          //         get.localStorageId = await Request.localStorageId()
          //         get.referer = document.referrer
          //         get.location = window.location.href
          //         const res = await Request.middleware(get)

          //         if (res.status === 200) {
          //           const promoter = JSON.parse(res.response)
          //           if (promoter.length === 0) {
          //             Helper.setNotValidStyle(document.querySelector(promoterField.inputSelector))
          //           }
          //           promoterField.withOptions(promoter)
          //         }
          //       }



          //       const preferenceField = new SelectionField("preference")
          //       .withLabel(label => label.innerHTML = "Wie möchtest du kontaktiert werden?")
          //       .withOptions(["Telefon", "E-Mail", "Webcall", "Persönlich"])
          //       .onInput(async() => {
          //       preferenceField.withStorage(value => {
          //         window.localStorage.setItem(preferenceField.name, value[0])
          //       })
          //       })
          //       .fromStorage((name) => [window.localStorage.getItem(name)])
          //       preferenceField.withStorage(value => {
          //       window.localStorage.setItem(preferenceField.name, value[0])
          //       })


          //       const firstnameField = new TextField("firstname")
          //       .withLabel(label => label.innerHTML = "Vorname")
          //       .withType(text => {
          //       text.placeholder = "Max"
          //       text.required = true
          //       })
          //       .onInput(async() => {
          //       firstnameField.withStorage(value => {
          //         window.localStorage.setItem(firstnameField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       firstnameField.withStorage(value => {
          //       window.localStorage.setItem(firstnameField.name, value)
          //       })


          //       const lastnameField = new TextField("lastname")
          //       .withLabel(label => label.innerHTML = "Nachname")
          //       .withType(text => {
          //       text.placeholder = "Muster"
          //       text.required = true
          //       })
          //       .onInput(async() => {
          //       lastnameField.withStorage(value => {
          //         window.localStorage.setItem(lastnameField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       lastnameField.withStorage(value => {
          //       window.localStorage.setItem(lastnameField.name, value)
          //       })


          //       const streetField = new TextField("street")
          //       .withLabel(label => label.innerHTML = "Straße und Hausnummer")
          //       .withType(text => {
          //       text.placeholder = "Wiesentalstr. 43"
          //       text.required = true
          //       })
          //       .onInput(async() => {
          //       streetField.withStorage(value => {
          //         window.localStorage.setItem(streetField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       streetField.withStorage(value => {
          //       window.localStorage.setItem(streetField.name, value)
          //       })


          //       const zipField = new TextField("zip")
          //       .withLabel(label => label.innerHTML = "Postleitzahl und Stadt")
          //       .withType(text => {
          //       text.placeholder = "70190 Stuttgart"
          //       text.required = true
          //       })
          //       .onInput(async() => {
          //       zipField.withStorage(value => {
          //         window.localStorage.setItem(zipField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       zipField.withStorage(value => {
          //       window.localStorage.setItem(zipField.name, value)
          //       })


          //       const stateField = new SelectionField("state")
          //       .withLabel(label => label.innerHTML = "Bundesland oder Kanton")
          //       .withOptions(["Baden-Württemberg", "Bayern", "Berlin", "Brandenburg", "Bremen", "Hamburg", "Hessen", "Mecklenburg-Vorpommern", "Niedersachsen", "Nordrhein Westfalen", "Rheinland-Pfalz", "Saarland", "Sachsen", "Sachsen-Anhalt", "Schleswig-Holstein", "Thüringen", "Burgenland", "Kärnten", "Niederösterreich", "Oberösterreich", "Salzburg", "Steiermark", "Tirol", "Vorarlberg", "Wien", "Aargau", "Appenzell Ausserrhoden", "Appenzell Innerrhoden", "Basel-Land", "Basel-Stadt", "Bern", "Fribourg Freiburg", "Genève Geneva", "Glarus", "Graubünden Grischuns Grigioni", "Jura", "Luzern Lucerne", "Neuchâtel", "Nidwalden", "Obwalden", "St.Gallen", "Schaffhausen", "Schwyz", "Solothurn", "Thurgau", "Ticino", "Uri", "Vaud", "Valais Wallis", "Zug", "Zürich"])
          //       .onInput(async() => {
          //       stateField.withStorage(value => {
          //         window.localStorage.setItem(stateField.name, value[0])
          //       })
          //       })
          //       .fromStorage((name) => [window.localStorage.getItem(name)])
          //       stateField.withStorage(value => {
          //       window.localStorage.setItem(stateField.name, value[0])
          //       })



          //       const countryField = new SelectionField("country")
          //       .withLabel(label => label.innerHTML = "Land")
          //       .withOptions(["Deutschland", "Österreich", "Schweiz"])
          //       .onWindowLoad(async event => await changeState())
          //       .onChange(async event => await changeState())
          //       .onInput(async() => {
          //       countryField.withStorage(value => {
          //         window.localStorage.setItem(countryField.name, value[0])
          //       })
          //       })
          //       .fromStorage((name) => [window.localStorage.getItem(name)])
          //       countryField.withStorage(value => {
          //       window.localStorage.setItem(countryField.name, value[0])
          //       })

          //       const phoneField = new TelField("phone")
          //       .withLabel(label => label.innerHTML = "Telefon")
          //       .withType(tel => {
          //       tel.placeholder = "+49 153 1223 1111"
          //       tel.required = true
          //       })
          //       .onInput(async() => {
          //       phoneField.withStorage(value => {
          //         window.localStorage.setItem(phoneField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       phoneField.withStorage(value => {
          //       window.localStorage.setItem(phoneField.name, value)
          //       })


          //       const emailField = new EmailField("email")
          //       .withLabel(label => label.innerHTML = "E-Mail Adresse")
          //       .withType(email => {
          //       email.placeholder = "max.mustermann@web.de"
          //       email.required = true
          //       })
          //       .onInput(async() => {
          //       emailField.withStorage(value => {
          //         window.localStorage.setItem(emailField.name, value)
          //       })
          //       })
          //       .fromStorage((name) => window.localStorage.getItem(name))
          //       emailField.withStorage(value => {
          //       window.localStorage.setItem(emailField.name, value)
          //       })


          //       const checkAndProceedField = new DivField("check-and-proceed")
          //       .withType(div => {
          //       div.innerHTML = "Jetzt bewerben"
          //       div.style.fontSize = "21px"
          //       div.style.margin = "144px 34px 0 34px"
          //       div.style.backgroundColor = "#f7aa20"
          //       div.style.borderRadius = "13px"
          //       div.style.height = "89px"
          //       div.style.display = "flex"
          //       div.style.justifyContent = "center"
          //       div.style.alignItems = "center"
          //       div.addEventListener("mouseover", () => div.style.backgroundColor = "#f19d08")
          //       div.addEventListener("mouseout", () => div.style.backgroundColor = "#f7aa20")
          //       })
          //       .onClick(async () => {

          //         try {
          //           const promoter = (await promoterField.withValidValue())[0].value
          //         } catch (error) {
          //           alert("Im Moment sind keine Unternehmen verfügbar. Bitte versuche es später nochmal.")
          //           Helper.setNotValidStyle(document.querySelector(promoterField.inputSelector))
          //           return
          //         }

          //         try {
          //           const email = await emailField.withValidValue()
          //           const preference = (await preferenceField.withValidValue())[0].value
          //           const firstname = await firstnameField.withValidValue()
          //           const lastname = await lastnameField.withValidValue()
          //           const street = await streetField.withValidValue()
          //           const zip = await zipField.withValidValue()
          //           const state = (await stateField.withValidValue())[0].value
          //           const country = (await countryField.withValidValue())[0].value
          //           const phone = await phoneField.withValidValue()
          //         } catch (error) {
          //           alert(`Feld '${error.fieldName}' ist notwendig.`)
          //           document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
          //           return
          //         }

          //         await Request.withVerifiedEmail(email, async () => {

          //           {
          //             const register = {}
          //             register.url = "/register/lead/closed/4/"
          //             register.promoter = promoter
          //             register.preference = preference
          //             register.quality = "unqualified"
          //             register.role = "4"
          //             register.type = "application"
          //             register.location = window.location.href
          //             register.referer = document.referrer
          //             register.localStorageEmail = await Request.email()
          //             register.localStorageId = await Request.localStorageId()
          //             await Request.sequence(register)
          //           }

          //           {
          //             const register = {}
          //             register.url = "/register/owner/closed/4/"
          //             register.firstname = firstname
          //             register.lastname = lastname
          //             register.street = street
          //             register.zip = zip
          //             register.country = country
          //             register.state = state
          //             register.phone = phone
          //             register.location = window.location.href
          //             register.referer = document.referrer
          //             register.localStorageEmail = await Request.email()
          //             register.localStorageId = await Request.localStorageId()
          //             await Request.sequence(register)
          //           }


          //           alert("Sie erhalten eine E-Mail, sobald Sie freigeschaltet sind.")
          //           window.location.reload()
          //         })


          //       })






          //       async function changeState() {
          //       const options = await countryField.withValidValue()
          //       if (options[0].value === "Deutschland") {
          //         stateField.withOptions(["Baden-Württemberg", "Bayern", "Berlin", "Brandenburg", "Bremen", "Hamburg", "Hessen", "Mecklenburg-Vorpommern", "Niedersachsen", "Nordrhein Westfalen", "Rheinland-Pfalz", "Saarland", "Sachsen", "Sachsen-Anhalt", "Schleswig-Holstein", "Thüringen"])
          //       }
          //       if (options[0].value === "Österreich") {
          //         stateField.withOptions(["Burgenland", "Kärnten", "Niederösterreich", "Oberösterreich", "Salzburg", "Steiermark", "Tirol", "Vorarlberg", "Wien"])
          //       }
          //       if (options[0].value === "Schweiz") {
          //         stateField.withOptions(["Aargau", "Appenzell Ausserrhoden", "Appenzell Innerrhoden", "Basel-Land", "Basel-Stadt", "Bern", "Fribourg Freiburg", "Genève Geneva", "Glarus", "Graubünden Grischuns Grigioni", "Jura", "Luzern Lucerne", "Neuchâtel", "Nidwalden", "Obwalden", "St.Gallen", "Schaffhausen", "Schwyz", "Solothurn", "Thurgau", "Ticino", "Uri", "Vaud", "Valais Wallis", "Zug", "Zürich"])
          //       }
          //       stateField.withStorage(options => {
          //         window.localStorage.setItem(stateField.name, options[0])
          //       })
          //     }



          //   }

          //   const button = document.createElement("div")
          //   button.style.display = "flex"
          //   button.style.flexWrap = "wrap"
          //   button.style.justifyContent = "space-between"
          //   button.style.alignItems = "center"
          //   button.style.margin = "21px 34px"
          //   button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
          //   button.style.borderRadius = "13px"
          //   button.style.border = "0.3px solid black"
          //   button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
          //   button.style.cursor = "pointer"
          //   button.addEventListener("click", callback)

          //   const icon = document.createElement("img")
          //   icon.style.margin = "13px 34px"
          //   icon.style.width = "34px"
          //   icon.src = "/public/promote.svg"
          //   icon.alt = "Bewerben"
          //   button.append(icon)

          //   const title = document.createElement("div")
          //   title.innerHTML = "Bewerben"
          //   title.style.margin = "21px 34px"
          //   title.style.fontSize = "21px"
          //   button.append(title)

          //   buttons.append(button)
          // }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/nutzervereinbarung/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/handshake.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Nutzervereinbarung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/datenschutz/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/security.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Datenschutz Richtilinien"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }
          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/impressum/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/company.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Impressum"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          overlay.append(buttons)

        })


      })
      leftContainer.append(name)
      header.append(leftContainer)



      document.querySelectorAll(".title").forEach(title => {
        title.innerHTML = "Angebotsübersicht:"
        title.style.margin = "21px 34px"
        title.style.fontWeight = "normal"
      })


      const getOffers = {}
      getOffers.url = "/consumer/open/"
      getOffers.method = "create"
      getOffers.type = "offer"
      getOffers.name = "bestprime"
      getOffers.funnel = funnel
      getOffers.email = await Request.email()
      getOffers.referer = document.referrer
      getOffers.localStorageId = await Request.localStorageId()
      const res = await Request.middleware(getOffers)


      if (res.status !== 200) {
        document.querySelectorAll("div[class*='herstelleritem']").forEach(div => div.remove())
        throw new Error("offer not found")
      }

      const offers = []
      const offer = JSON.parse(res.response)
      offers.push(offer)

      const offerList = new DivField("offer-list")
      .withType(div => {
        for (let i = 0; i < offers.length; i++) {

          const offer = document.createElement("div")
          offer.style.backgroundColor = "white"
          offer.style.borderRadius = "13px"
          offer.style.margin = "34px"
          offer.style.padding = "34px"
          offer.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"

          const alignLogo = document.createElement("div")
          alignLogo.style.display = "flex"
          alignLogo.style.justifyContent = "flex-end"

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/bestprimelogo.png"
          logo.alt = "Bestprime Logo"
          logo.style.width = "55vw"
          logo.style.maxWidth = "377px"

          alignLogo.append(logo)

          offer.append(alignLogo)

          const company = document.createElement("div")
          company.innerHTML = offers[i].producer.company
          company.style.margin = "21px 0"
          company.style.fontSize = "21px"

          offer.append(company)

          const website = document.createElement("div")
          website.style.display = "flex"
          website.style.alignItems = "center"

          const websiteIcon = document.createElement("img")
          websiteIcon.src = "/felix/shs/public/website-icon.svg"
          websiteIcon.alt = "Website Icon"

          const websiteText = document.createElement("a")
          websiteText.innerHTML = "Website"
          websiteText.href = offers[i].producer.website
          websiteText.target = "_blank"
          websiteText.style.textDecoration = "underline"
          websiteText.style.margin = "8px"
          websiteText.style.cursor = "pointer"

          website.append(websiteIcon, websiteText)

          offer.append(website)


          const product = document.createElement("div")
          product.innerHTML = offers[i].producer.product
          product.style.marginTop = "34px"
          product.style.fontSize = "21px"


          offer.append(product)


          const description = document.createElement("div")
          description.innerHTML = offers[i].producer.description
          description.style.marginTop = "13px"

          offer.append(description)


          const alignContainer = document.createElement("div")
          alignContainer.style.display = "flex"
          alignContainer.style.justifyContent = "flex-end"

          const priceContainer = document.createElement("div")
          priceContainer.style.width = "300px"
          priceContainer.style.marginTop = "21px"

          const priceTitle = document.createElement("div")
          priceTitle.innerHTML = "Preisübersicht"
          priceTitle.style.fontSize = "21px"
          priceTitle.style.margin = "21px 0"


          priceContainer.append(priceTitle)

          const netContainer = document.createElement("div")
          netContainer.style.display = "flex"
          netContainer.style.justifyContent = "space-between"
          netContainer.style.margin = "13px 0"

          const priceNetTitle = document.createElement("div")
          priceNetTitle.innerHTML = "Nettobetrag"

          const priceNetAmount = document.createElement("div")
          priceNetAmount.innerHTML = `${offers[i].grossAmount.toFixed(2).replace(".", ",")} €`

          netContainer.append(priceNetTitle, priceNetAmount)

          priceContainer.append(netContainer)



          const vatContainer = document.createElement("div")
          vatContainer.style.display = "flex"
          vatContainer.style.justifyContent = "space-between"
          vatContainer.style.margin = "13px 0"


          const priceVatTitle = document.createElement("div")
          priceVatTitle.innerHTML = `USt. ${(offers[i].vat * 100).toFixed(2).replace(".", ",")} %`

          const priceVatAmount = document.createElement("div")
          priceVatAmount.innerHTML = `${(offers[i].grossAmount * 0.19).toFixed(2).replace(".", ",")} €`

          vatContainer.append(priceVatTitle, priceVatAmount)

          priceContainer.append(vatContainer)

          const line = document.createElement("hr")

          priceContainer.append(line)


          const grossContainer = document.createElement("div")
          grossContainer.style.display = "flex"
          grossContainer.style.justifyContent = "space-between"
          grossContainer.style.margin = "21px 0"

          const priceGrossTitle = document.createElement("div")
          priceGrossTitle.innerHTML = "Gesamt"

          const priceGrossAmount = document.createElement("div")
          priceGrossAmount.innerHTML = `${(offers[i].grossAmount * 1.19).toFixed(2).replace(".", ",")} €`

          grossContainer.append(priceGrossTitle, priceGrossAmount)

          priceContainer.append(grossContainer)


          const button = document.createElement("div")
          button.innerHTML = "Weiter zum Angebot"
          button.style.marginTop = "34px"
          button.style.height = "55px"
          button.style.backgroundColor = "#f7aa20"
          button.style.borderRadius = "13px"
          button.style.display = "flex"
          button.style.justifyContent = "center"
          button.style.alignItems = "center"
          button.style.cursor = "pointer"
          button.addEventListener("mouseover", () => button.style.backgroundColor = "#f19d08")
          button.addEventListener("mouseout", () => button.style.backgroundColor = "#f7aa20")

          button.addEventListener("click", () => {

            for (let i = 0; i < offers.length; i++) {
              offers[i].selected = false
            }

            offers[i].selected = true
            window.sessionStorage.setItem("offers", JSON.stringify(offers))
            window.location.assign("/felix/ep/abfrage-persoenliches/")
          })

          priceContainer.append(button)
          alignContainer.append(priceContainer)
          offer.append(alignContainer)
          div.append(offer)
        }
      })


    </script>


  </body>
</html>
