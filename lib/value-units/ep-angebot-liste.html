<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Energie Plattform Angebotsliste</title>

    <style>

      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
        background-color: #ebebeb;
        padding-bottom: 144px;
      }

    </style>

  </head>

  <body>


    <script type="module">
      import { DivField } from "/js/DivField.js"
      import { Helper } from "/js/Helper.js"
      import { Request } from "/js/Request.js"
      import { HeaderField } from "/js/HeaderField.js"
      import { InfoField } from "/js/InfoField.js"
      import { TextField } from "/js/TextField.js"
      import { SelectionField } from "/js/SelectionField.js"
      import { TelField } from "/js/TelField.js"
      import { EmailField } from "/js/EmailField.js"



      const header = document.createElement("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.zIndex = "1"
      header.style.justifyContent = "space-between"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/felix/shs/public/ep-logo.svg"
      logo.alt = "Energie Plattform"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Energie Plattform"
      name.style.padding = "21px 34px"
      name.style.fontSize = "21px"
      // name.style.color = "#7bc043"
      name.style.cursor = "pointer"
      name.addEventListener("click", () => {



        Helper.popup(async overlay => {

          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Energie Plattform"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)

          {
            const buttons = document.createElement("div")
            buttons.style.overflow = "auto"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => window.location.assign("/getyour/pana/nutzervereinbarung/"))

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/handshake.svg"
              icon.alt = "Nutzervereinbarung"
              button.append(icon)

              const title = document.createElement("div")
              title.innerHTML = "Nutzervereinbarung"
              title.style.margin = "21px 34px"
              title.style.fontSize = "21px"
              button.append(title)

              buttons.append(button)
            }

            {
              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => window.location.assign("/getyour/pana/datenschutz/"))

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/security.svg"
              icon.alt = "Sicherheit"
              button.append(icon)

              const title = document.createElement("div")
              title.innerHTML = "Datenschutz Richtilinien"
              title.style.margin = "21px 34px"
              title.style.fontSize = "21px"
              button.append(title)

              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/company.svg"
              icon.alt = "Unternehmen"
              button.append(icon)

              const title = document.createElement("div")
              title.innerHTML = "Impressum"
              title.style.margin = "21px 34px"
              title.style.fontSize = "21px"
              button.append(title)

              buttons.append(button)
            }

            {
              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"

              button.addEventListener("click", () => window.location.assign("/"))

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/entry.svg"
              icon.alt = "Zugang"
              button.append(icon)

              const title = document.createElement("div")
              title.style.margin = "13px 34px"
              title.style.fontSize = "21px"
              title.innerHTML = "Plattform Zugänge"
              button.append(title)

              buttons.append(button)
            }



            overlay.append(buttons)
          }



        })


      })
      leftContainer.append(name)
      header.append(leftContainer)
      document.body.append(header)




      {
        const title = document.createElement("h1")
        title.innerHTML = "Angebotsliste"
        title.style.margin = "21px 34px"
        title.style.fontWeight = "normal"
        document.body.append(title)
      }



      {

        const get = {}
        get.url = "/get/offer/open/"
        get.location = window.location.href
        get.referer = document.referrer
        const res = await Request.middleware(get)


        if (res.status !== 200) {
          const div = document.createElement("div")
          div.innerHTML = "Es sind noch keine Angebote erstellt worden. Versuchen Sie es später nochmal."
          div.style.margin = "21px 34px"
          document.body.append(div)
          throw new Error("offer not found")
        }

        if (res.status === 200) {
          const offers = JSON.parse(res.response)

          if (offers.length === 0) {
            const div = document.createElement("div")
            div.innerHTML = "Es sind noch keine Angebote erstellt worden. Versuchen Sie es später nochmal."
            div.style.margin = "21px 34px"
            document.body.append(div)
            throw new Error("offer not found")
          }


          for (let i = 0; i < offers.length; i++) {
            const offer = offers[i]

            const offerBox = document.createElement("div")
            offerBox.style.backgroundColor = "white"
            offerBox.style.borderRadius = "13px"
            offerBox.style.margin = "34px"
            offerBox.style.padding = "34px"
            offerBox.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"

            const alignLogo = document.createElement("div")
            alignLogo.style.display = "flex"
            alignLogo.style.justifyContent = "flex-end"

            const logo = document.createElement("img")
            logo.src = offer.logo
            logo.alt = "Logo"
            logo.style.width = "55px"
            logo.style.maxWidth = "377px"

            alignLogo.append(logo)

            offerBox.append(alignLogo)

            const company = document.createElement("div")
            company.innerHTML = offer.company
            company.style.margin = "21px 0"
            company.style.fontSize = "21px"

            offerBox.append(company)

            const website = document.createElement("div")
            website.style.display = "flex"
            website.style.alignItems = "center"

            const websiteIcon = document.createElement("img")
            websiteIcon.src = "/felix/shs/public/website-icon.svg"
            websiteIcon.alt = "Website Icon"

            const websiteText = document.createElement("a")
            websiteText.innerHTML = "Website"
            websiteText.href = offer.website
            websiteText.target = "_blank"
            websiteText.style.textDecoration = "underline"
            websiteText.style.margin = "8px"
            websiteText.style.cursor = "pointer"

            website.append(websiteIcon, websiteText)

            offerBox.append(website)


            const product = document.createElement("div")
            product.innerHTML = offer.title
            product.style.marginTop = "34px"
            product.style.fontSize = "21px"


            offerBox.append(product)


            const description = document.createElement("div")
            description.innerHTML = offer.description
            description.style.marginTop = "13px"

            offerBox.append(description)


            const alignContainer = document.createElement("div")
            alignContainer.style.display = "flex"
            alignContainer.style.justifyContent = "flex-end"

            const priceContainer = document.createElement("div")
            priceContainer.style.width = "300px"
            priceContainer.style.marginTop = "21px"

            // const priceTitle = document.createElement("div")
            // priceTitle.innerHTML = "Preisübersicht"
            // priceTitle.style.fontSize = "21px"
            // priceTitle.style.margin = "21px 0"


            // priceContainer.append(priceTitle)

            // const netContainer = document.createElement("div")
            // netContainer.style.display = "flex"
            // netContainer.style.justifyContent = "space-between"
            // netContainer.style.margin = "13px 0"

            // const priceNetTitle = document.createElement("div")
            // priceNetTitle.innerHTML = "Nettobetrag"

            // const priceNetAmount = document.createElement("div")
            // priceNetAmount.innerHTML = `${offerBoxs[i].grossAmount.toFixed(2).replace(".", ",")} €`

            // netContainer.append(priceNetTitle, priceNetAmount)

            // priceContainer.append(netContainer)



            // const vatContainer = document.createElement("div")
            // vatContainer.style.display = "flex"
            // vatContainer.style.justifyContent = "space-between"
            // vatContainer.style.margin = "13px 0"


            // const priceVatTitle = document.createElement("div")
            // priceVatTitle.innerHTML = `USt. ${(offerBoxs[i].vat * 100).toFixed(2).replace(".", ",")} %`

            // const priceVatAmount = document.createElement("div")
            // priceVatAmount.innerHTML = `${(offerBoxs[i].grossAmount * 0.19).toFixed(2).replace(".", ",")} €`

            // vatContainer.append(priceVatTitle, priceVatAmount)

            // priceContainer.append(vatContainer)

            // const line = document.createElement("hr")

            // priceContainer.append(line)


            // const grossContainer = document.createElement("div")
            // grossContainer.style.display = "flex"
            // grossContainer.style.justifyContent = "space-between"
            // grossContainer.style.margin = "21px 0"

            // const priceGrossTitle = document.createElement("div")
            // priceGrossTitle.innerHTML = "Gesamt"

            // const priceGrossAmount = document.createElement("div")
            // priceGrossAmount.innerHTML = `${(offerBoxs[i].grossAmount * 1.19).toFixed(2).replace(".", ",")} €`

            // grossContainer.append(priceGrossTitle, priceGrossAmount)

            // priceContainer.append(grossContainer)


            const button = document.createElement("div")
            button.innerHTML = "Weiter zum Angebot"
            button.style.marginTop = "34px"
            button.style.height = "55px"
            button.style.backgroundColor = "#f7aa20"
            button.style.borderRadius = "13px"
            button.style.display = "flex"
            button.style.justifyContent = "center"
            button.style.alignItems = "center"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/felix/energie-plattform/anlagenbetreiber-zugang/"))
            // button.addEventListener("mouseover", () => button.style.backgroundColor = "#f19d08")
            // button.addEventListener("mouseout", () => button.style.backgroundColor = "#f7aa20")

            // button.addEventListener("click", () => {

            //   for (let i = 0; i < offerBoxs.length; i++) {
            //     offerBoxs[i].selected = false
            //   }

            //   offerBoxs[i].selected = true
            //   window.sessionStorage.setItem("offerBoxs", JSON.stringify(offerBoxs))
            //   window.location.assign("/felix/ep/abfrage-persoenliches/")
            // })

            priceContainer.append(button)
            alignContainer.append(priceContainer)
            offerBox.append(alignContainer)
            // div.append(offerBox)
            document.body.append(offerBox)
          }


        }


      }




    </script>


  </body>
</html>
