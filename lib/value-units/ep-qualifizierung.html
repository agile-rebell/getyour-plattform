<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Energie Portal Anlagenbetreiber Qualifizierung</title>

    <style>
      body {
        font-family: sans-serif;
        line-height: 1.2;
        margin-bottom: 144px;
        background-image: url('/felix/shs/public/qualifizierung-bg.png');
        background-repeat: no-repeat;
        background-size: cover;
      }
    </style>



  </head>
  <body>
    <header></header>

    <div class="info"></div>

    <div class="funnel-placeholder"></div>

    <footer></footer>

    <script type="module">
      import { HeaderField } from "/js/HeaderField.js"
      import { InfoField } from "/js/InfoField.js"
      import { FunnelField } from "/js/FunnelField.js"
      import { Helper } from "/js/Helper.js"
      import { Request } from "/js/Request.js"
      import { DivField } from "/js/DivField.js"

      const urlId = window.location.pathname.split("/")[4]

      {
        const get = {}
        get.url = "/get/funnel/closed/4/"
        get.tag = "epFunnel"
        get.urlId = urlId
        get.localStorageId = await Request.localStorageId()
        get.localStorageEmail = await Request.email()
        get.location = window.location.href
        get.referer = document.referrer
        const res = await Request.middleware(get)

        if (res.status === 200) {

          const confirm = window.confirm("Dieser Kunde hat bereits gespeicherte Daten über diesen Funnel.\n\nMöchten Sie mit den gespeicherten Daten fortfahren?")

          if (confirm === true) {
            const funnel = JSON.parse(res.response)
            window.sessionStorage.setItem("epFunnel", JSON.stringify(funnel))
            window.location.assign(`/felix/ep/abfrage-haus/${urlId}/4/`)
            throw new Error("funnel exist")
          }
        }
      }


      const header = document.querySelector("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.justifyContent = "space-between"
      header.style.zIndex = "1"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/felix/shs/public/ep-logo.svg"
      logo.alt = "Energie Portal"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Energie Portal"
      name.style.margin = "0 34px"
      name.style.fontSize = "21px"
      name.style.color = "#7bc043"
      name.style.cursor = "pointer"
      name.addEventListener("click", () => {



      Helper.popup(overlay => {

        const header = document.createElement("div")
        header.style.position = "fixed"
        header.style.bottom = "0"
        header.style.left = "0"
        header.style.width = "100%"
        header.style.display = "flex"
        header.style.justifyContent = "flex-start"
        header.style.alignItems = "center"
        header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
        header.style.background = "white"
        header.style.cursor = "pointer"
        header.addEventListener("click", () => Helper.removeOverlay(overlay))

        const logo = document.createElement("img")
        logo.src = "/felix/shs/public/ep-logo.svg"
        logo.alt = "Energie Portal"
        logo.style.width = "55px"
        logo.style.margin = "34px"
        header.append(logo)
        const title = document.createElement("div")
        title.innerHTML = "Energie Portal"
        title.style.fontWeight = "bold"
        title.style.fontSize = "21px"
        header.append(title)
        overlay.append(header)



        const buttons = document.createElement("div")

        {
          const button = document.createElement("div")
          button.style.display = "flex"
          button.style.flexWrap = "wrap"
          button.style.justifyContent = "space-between"
          button.style.alignItems = "center"
          button.style.margin = "21px 34px"
          button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
          button.style.borderRadius = "13px"
          button.style.border = "0.3px solid black"
          button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
          button.style.cursor = "pointer"
          button.addEventListener("click", () => window.location.reload())

          const icon = document.createElement("img")
          icon.style.margin = "13px 34px"
          icon.style.width = "34px"
          icon.src = "/public/refresh.svg"
          icon.alt = "Neustart"
          button.append(icon)

          const title = document.createElement("div")
          title.innerHTML = "Neustart"
          title.style.margin = "21px 34px"
          title.style.fontSize = "21px"
          button.append(title)

          buttons.append(button)
        }


        {
          const button = document.createElement("div")
          button.style.display = "flex"
          button.style.flexWrap = "wrap"
          button.style.justifyContent = "space-between"
          button.style.alignItems = "center"
          button.style.margin = "21px 34px"
          button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
          button.style.borderRadius = "13px"
          button.style.border = "0.3px solid black"
          button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
          button.style.cursor = "pointer"
          button.addEventListener("click", () => window.location.assign("/nutzervereinbarung/"))

          const icon = document.createElement("img")
          icon.style.margin = "13px 34px"
          icon.style.width = "34px"
          icon.src = "/public/handshake.svg"
          icon.alt = "Nutzervereinbarung"
          button.append(icon)

          const title = document.createElement("div")
          title.innerHTML = "Nutzervereinbarung"
          title.style.margin = "21px 34px"
          title.style.fontSize = "21px"
          button.append(title)

          buttons.append(button)
        }

        {
          const button = document.createElement("div")
          button.style.display = "flex"
          button.style.flexWrap = "wrap"
          button.style.justifyContent = "space-between"
          button.style.alignItems = "center"
          button.style.margin = "21px 34px"
          button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
          button.style.borderRadius = "13px"
          button.style.border = "0.3px solid black"
          button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
          button.style.cursor = "pointer"
          button.addEventListener("click", () => window.location.assign("/datenschutz/"))

          const icon = document.createElement("img")
          icon.style.margin = "13px 34px"
          icon.style.width = "34px"
          icon.src = "/public/security.svg"
          icon.alt = "Nutzervereinbarung"
          button.append(icon)

          const title = document.createElement("div")
          title.innerHTML = "Datenschutz Richtilinien"
          title.style.margin = "21px 34px"
          title.style.fontSize = "21px"
          button.append(title)

          buttons.append(button)
        }
        {
          const button = document.createElement("div")
          button.style.display = "flex"
          button.style.flexWrap = "wrap"
          button.style.justifyContent = "space-between"
          button.style.alignItems = "center"
          button.style.margin = "21px 34px"
          button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
          button.style.borderRadius = "13px"
          button.style.border = "0.3px solid black"
          button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
          button.style.cursor = "pointer"
          button.addEventListener("click", () => window.location.assign("/impressum/"))

          const icon = document.createElement("img")
          icon.style.margin = "13px 34px"
          icon.style.width = "34px"
          icon.src = "/public/company.svg"
          icon.alt = "Nutzervereinbarung"
          button.append(icon)

          const title = document.createElement("div")
          title.innerHTML = "Impressum"
          title.style.margin = "21px 34px"
          title.style.fontSize = "21px"
          button.append(title)

          buttons.append(button)
        }

        overlay.append(buttons)

        })


      })
      leftContainer.append(name)
      header.append(leftContainer)






      const infoField = new InfoField("info")
      .withSuccess(/*html*/`
        <div style="font-size: 21px; margin-bottom: 34px"> Jetzt <span style="color: #f27f2a;">Unabhängig</span> von öffentlichen Energieversorgern werden!</div>
        <div style="margin-bottom: 21px">Erstellen Sie sich einfach ihr maßgeschneidertes Energiekonzept.</div>
        <div>Kostenlos & unverbindlich.</div>
      `)
      .build()


      const pathToAssets = "/felix/shs/public/"
      const questions = [
      { question: "Um ein individuelles Angebot erstellen zu können, schenken Sie uns bitte vorab 10 Minuten Ihrer wertvollen Zeit für die Beantwortung der Fragen. Damit wir herausfinden können, ob unser Konzept auch etwas für Sie ist und um Ihre Bedürfnisse noch besser verstehen zu können. <br/><br/>Einverstanden und bereit?", answers: [
        { answer: "JA! Ich bin bereit!", image: `${pathToAssets}ja.svg`},
        { answer: "Nein, das ist mir zu aufwendig.", image: `${pathToAssets}nein.svg`}
      ]},
      { question: "Wo möchten Sie die Photovoltaik installieren?", answers: [
        { answer: "Ein-Zweifamilienhaus", image: `${pathToAssets}einfamilienhaus.svg`},
        { answer: "Mehrfamilienhaus", image: `${pathToAssets}mehrfamilien.svg`},
        { answer: "Firmengebäude", image: `${pathToAssets}firmen.svg`},
        { answer: "Freilandfläche", image: `${pathToAssets}freiland.svg`},
        { answer: "Sonstiges", image: `${pathToAssets}sonstige.svg`}
      ]},
      { question: "Um welchen Gebäudetyp handelt es sich?", answers: [
        { answer: "freistehendes Haus", image: `${pathToAssets}freistehend.svg`},
        { answer: "Doppelhaushälfte", image: `${pathToAssets}doppelhaus.svg`},
        { answer: "Reihenhaus", image: `${pathToAssets}reihenhaus.svg`}
      ]},
      { question: "Bewohnen Sie die Immobilie selbst?", answers: [
        { answer: "Ja", image: `${pathToAssets}bewohnen.svg`},
        { answer: "Nein", image: `${pathToAssets}nichtbewohnen.svg`}
      ]},
      { question: "Sind Sie Eigentümer der Immobilie?", answers: [
        { answer: "Ja", image: `${pathToAssets}eigentuemer.svg`},
        { answer: "Nein", image: `${pathToAssets}nichteigentuemer.svg`}
      ]},
      { question: "Welche Dachform hat das Haus?", answers: [
        { answer: "Satteldach", image: `${pathToAssets}satteldach.svg`},
        { answer: "Pultdach", image: `${pathToAssets}pultdach.svg`},
        { answer: "Flachdach", image: `${pathToAssets}flachdach.svg`},
        { answer: "Walmdach", image: `${pathToAssets}walmdach.svg`},
        { answer: "Sonstiges", image: `${pathToAssets}sonstige.svg`}
      ]},
      { question: "Die Dacheindeckung ist..", answers: [
        { answer: "Steineindeckung", image: `${pathToAssets}steineindeckung.svg`},
        { answer: "Faserzement", image: `${pathToAssets}faserzement.svg`},
        { answer: "Blechdach", image: `${pathToAssets}blechdach.svg`},
        { answer: "Schiefer", image: `${pathToAssets}schiefer.svg`},
        { answer: "Dachpfannen", image: `${pathToAssets}dachpfannen.svg`},
        { answer: "Bieberschwanz", image: `${pathToAssets}bieberschwanz.svg`},
        { answer: "Sonstiges", image: `${pathToAssets}sonstige.svg`},
      ]},
      { question: "Möchten Sie Ihr Energiekonzept durch eine Photovoltaikanlage ergänzen?", answers: [
        { answer: "Ja", image: `${pathToAssets}photovoltaik.svg`},
        { answer: "Nein", image: `${pathToAssets}keinphotovoltaik.svg`}
      ]},
      { question: "Möchten Sie Ihr Energiekonzept durch einen Stromspeicher ergänzen?", answers: [
        { answer: "Ja", image: `${pathToAssets}speicher.svg`},
        { answer: "Nein", image: `${pathToAssets}keinspeicher.svg`}
      ]},
      { question: "Möchten Sie Ihr Energiekonzept durch einen Wärmepumpe ergänzen?", answers: [
        { answer: "Ja", image: `${pathToAssets}waermepumpe.svg`},
        { answer: "Nein", image: `${pathToAssets}keinewaermepumpe.svg`}
      ]},
      { question: "Möchten Sie Ihr Energiekonzept durch eine Solarthermie ergänzen?", answers: [
        { answer: "Ja", image: `${pathToAssets}solar.svg`},
        { answer: "Nein", image: `${pathToAssets}keinsolar.svg`}
      ]},
      { question: "Möchten Sie die Anlage mieten oder kaufen?", answers: [
        { answer: "Kaufen", image: `${pathToAssets}kaufen.svg`},
        { answer: "Mieten", image: `${pathToAssets}mieten.svg`}
      ]},
      { question: "Wollen Sie Bar bezahlen oder finanzieren?", answers: [
        { answer: "Bar bezahlen", image: `${pathToAssets}bar.svg`},
        { answer: "Ich möchte finanzieren", image: `${pathToAssets}finanzieren.svg`}
      ]},
      { question: "Wie alt sind Sie?", answers: [
        { answer: "20 - 40 Jahre", image: `${pathToAssets}20jahre.svg`},
        { answer: "41 - 50 Jahre", image: `${pathToAssets}41jahre.svg`},
        { answer: "51 - 70 Jahre", image: `${pathToAssets}51jahre.svg`},
        { answer: "über 70 Jahre", image: `${pathToAssets}ueber70.svg`},
      ]},
      { question: "Wann soll die Photovoltaik installiert werden?", answers: [
        { answer: "so schnell wie möglich", image: `${pathToAssets}sofort.svg`},
        { answer: "in 1-3 Monate", image: `${pathToAssets}ab1.svg`},
        { answer: "in 4-6 Monate", image: `${pathToAssets}ab4.svg`},
        { answer: "mehr als 6 Monate", image: `${pathToAssets}mehrals6.svg`},
      ]},
    ]



      const result = {}
      const funnelField = new FunnelField("funnel-placeholder")
      .withQuestions(questions)
      .withClickOnAnswerEventListener((questionIndex, answerIndex) => {


        result[`q${questionIndex}`] = answerIndex
        window.sessionStorage.setItem("epFunnel", JSON.stringify(result))

        if (questionIndex > questions.length - 1) {
          // after last question click
        }


        if (questionIndex === 0 && answerIndex === 1) {
          alert("Unter diesen Bedingungen können wir Ihnen leider kein Angebot machen.")
          window.location.assign("/felix/ep/")
          return
        }

        if (questionIndex === 1 && answerIndex === 1) {
          alert("Unter diesen Bedingungen können wir Ihnen leider kein Angebot machen.")
          window.location.assign("/felix/ep/")
          return
        }

        if (questionIndex === 1 && answerIndex === 3) {
          alert("Unter diesen Bedingungen können wir Ihnen leider kein Angebot machen.")
          window.location.assign("/felix/ep/")
          return
        }

        if (questionIndex === 10 && answerIndex === 1) {
          const funnel = JSON.parse(window.sessionStorage.getItem("epFunnel"))
          const q7 = funnel.q7
          const q8 = funnel.q8
          const q9 = funnel.q9
          if (q7 === 1 && q8 === 1 && q9 === 1) {
            alert("Unter diesen Bedingungen können wir Ihnen leider kein Angebot machen.")
            window.location.assign("/felix/ep/")
            return
          }
        }

        if (questionIndex === 11 && answerIndex === 1) {
          alert("Unter diesen Bedingungen können wir Ihnen leider kein Angebot machen.")
          window.location.assign("/felix/ep/")
          return
        }

      })
      .withFunnelCompleted(() => window.location.assign(`/felix/ep/abfrage-haus/${urlId}/4/`))
      .build()

    </script>

  </body>
</html>
