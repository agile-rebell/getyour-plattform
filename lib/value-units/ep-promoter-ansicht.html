<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />


    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Energie Plattform Promoter Ansicht</title>



    <style>
      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
      }
    </style>

  </head>
  <body>


  <script type="module">

    import { HeaderField } from "/js/HeaderField.js"
    import { Helper } from "/js/Helper.js"
    import { Request } from "/js/Request.js"
    import { DivField } from "/js/DivField.js"
    import { InfoField } from "/js/InfoField.js"
    import { TextField } from "/js/TextField.js"
    import { TextAreaField } from "/js/TextAreaField.js"
    import { UrlField } from "/js/UrlField.js"
    import { TelField } from "/js/TelField.js"
    import { FileField } from "/js/FileField.js"
    import { EmailField } from "/js/EmailField.js"
    import { SelectionField } from "/js/SelectionField.js"
    import { CheckboxField } from "/js/CheckboxField.js"
    import { NumberField } from "/js/NumberField.js"


    {
      const header = document.createElement("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.justifyContent = "space-between"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/felix/shs/public/ep-logo.svg"
      logo.alt = "Energie Plattform"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Energie Plattform"
      name.style.padding = "21px 34px"
      name.style.fontSize = "21px"
      name.style.cursor = "pointer"
      name.addEventListener("click", () => {


        Helper.popup(async overlay => {

          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = `/ ${window.location.pathname.split("/")[3]} /`
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)

          const buttons = document.createElement("div")



          {
            const verify = {}
            verify.url = "/verify/roles/closed/5/"
            verify.state = "exist"
            verify.localStorageEmail = await Request.email()
            verify.location = window.location.href
            verify.referer = document.referrer
            verify.localStorageId = await Request.localStorageId()
            const res = await Request.middleware(verify)

            if (res.status === 200) {

              {
                const button = document.createElement("div")
                button.style.display = "flex"
                button.style.flexWrap = "wrap"
                button.style.justifyContent = "space-between"
                button.style.alignItems = "center"
                button.style.margin = "21px 34px"
                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                button.style.borderRadius = "13px"
                button.style.border = "0.3px solid black"
                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                button.style.cursor = "pointer"

                button.addEventListener("click", async () => {

                  Helper.popup(overlay => {
                    const header = document.createElement("div")
                    header.style.position = "fixed"
                    header.style.bottom = "0"
                    header.style.left = "0"
                    header.style.width = "100%"
                    header.style.display = "flex"
                    header.style.justifyContent = "flex-start"
                    header.style.alignItems = "center"
                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                    header.style.background = "white"
                    header.style.cursor = "pointer"
                    header.style.zIndex = "1"
                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                    const logo = document.createElement("img")
                    logo.src = "/felix/shs/public/ep-logo.svg"
                    logo.alt = "Energie Plattform"
                    logo.style.width = "55px"
                    logo.style.margin = "21px 34px"
                    header.append(logo)
                    const title = document.createElement("div")
                    title.innerHTML = "Angebot erstellen"
                    title.style.fontWeight = "bold"
                    title.style.fontSize = "21px"
                    header.append(title)
                    overlay.append(header)

                    const buttons = document.createElement("div")
                    buttons.style.overflow = "auto"
                    buttons.style.paddingBottom = "144px"


                    {
                      const button = document.createElement("div")
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"


                      button.addEventListener("click", () => {

                        Helper.popup(overlay => {

                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.style.zIndex = "1"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/felix/shs/public/ep-logo.svg"
                          logo.alt = "Energie Plattform"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = "Besitzerdaten"
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)


                          const funnel = document.createElement("div")
                          funnel.style.overflow = "auto"
                          funnel.style.paddingBottom = "144px"

                          const firstname = document.createElement("div")
                          firstname.classList.add("firstname")
                          funnel.append(firstname)

                          const lastname = document.createElement("div")
                          lastname.classList.add("lastname")
                          funnel.append(lastname)

                          const street = document.createElement("div")
                          street.classList.add("street")
                          funnel.append(street)

                          const zip = document.createElement("div")
                          zip.classList.add("zip")
                          funnel.append(zip)

                          const country = document.createElement("div")
                          country.classList.add("country")
                          funnel.append(country)

                          const state = document.createElement("div")
                          state.classList.add("state")
                          funnel.append(state)

                          const phone = document.createElement("div")
                          phone.classList.add("phone")
                          funnel.append(phone)

                          const checkAndProceed = document.createElement("div")
                          checkAndProceed.classList.add("check-and-proceed")
                          funnel.append(checkAndProceed)

                          overlay.append(funnel)
                        })

                        const firstnameField = new TextField("firstname")
                        .withLabel(label => label.innerHTML = "Vorname")
                        .withType(text => {
                          text.placeholder = "Max"
                          text.required = true
                        })
                        .onInput(async() => {
                          firstnameField.withStorage(value => {
                            window.localStorage.setItem(firstnameField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        firstnameField.withStorage(value => {
                          window.localStorage.setItem(firstnameField.name, value)
                        })


                        const lastnameField = new TextField("lastname")
                        .withLabel(label => label.innerHTML = "Nachname")
                        .withType(text => {
                          text.placeholder = "Muster"
                          text.required = true
                        })
                        .onInput(async() => {
                          lastnameField.withStorage(value => {
                            window.localStorage.setItem(lastnameField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        lastnameField.withStorage(value => {
                          window.localStorage.setItem(lastnameField.name, value)
                        })


                        const streetField = new TextField("street")
                        .withLabel(label => label.innerHTML = "Straße und Hausnummer")
                        .withType(text => {
                          text.placeholder = "Wiesentalstr. 43"
                          text.required = true
                        })
                        .onInput(async() => {
                          streetField.withStorage(value => {
                            window.localStorage.setItem(streetField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        streetField.withStorage(value => {
                          window.localStorage.setItem(streetField.name, value)
                        })


                        const zipField = new TextField("zip")
                        .withLabel(label => label.innerHTML = "Postleitzahl und Stadt")
                        .withType(text => {
                          text.placeholder = "70190 Stuttgart"
                          text.required = true
                        })
                        .onInput(async() => {
                          zipField.withStorage(value => {
                            window.localStorage.setItem(zipField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        zipField.withStorage(value => {
                          window.localStorage.setItem(zipField.name, value)
                        })


                        const stateField = new SelectionField("state")
                        .withLabel(label => label.innerHTML = "Bundesland oder Kanton")
                        .withOptions(["Baden-Württemberg", "Bayern", "Berlin", "Brandenburg", "Bremen", "Hamburg", "Hessen", "Mecklenburg-Vorpommern", "Niedersachsen", "Nordrhein Westfalen", "Rheinland-Pfalz", "Saarland", "Sachsen", "Sachsen-Anhalt", "Schleswig-Holstein", "Thüringen", "Burgenland", "Kärnten", "Niederösterreich", "Oberösterreich", "Salzburg", "Steiermark", "Tirol", "Vorarlberg", "Wien", "Aargau", "Appenzell Ausserrhoden", "Appenzell Innerrhoden", "Basel-Land", "Basel-Stadt", "Bern", "Fribourg Freiburg", "Genève Geneva", "Glarus", "Graubünden Grischuns Grigioni", "Jura", "Luzern Lucerne", "Neuchâtel", "Nidwalden", "Obwalden", "St.Gallen", "Schaffhausen", "Schwyz", "Solothurn", "Thurgau", "Ticino", "Uri", "Vaud", "Valais Wallis", "Zug", "Zürich"])
                        .onInput(async() => {
                          stateField.withStorage(value => {
                            window.localStorage.setItem(stateField.name, value[0])
                          })
                        })
                        .fromStorage((name) => [window.localStorage.getItem(name)])
                        stateField.withStorage(value => {
                          window.localStorage.setItem(stateField.name, value[0])
                        })



                        const countryField = new SelectionField("country")
                        .withLabel(label => label.innerHTML = "Land")
                        .withOptions(["Deutschland", "Österreich", "Schweiz"])
                        .onWindowLoad(async event => await changeState())
                        .onChange(async event => await changeState())
                        .onInput(async() => {
                          countryField.withStorage(value => {
                            window.localStorage.setItem(countryField.name, value[0])
                          })
                        })
                        .fromStorage((name) => [window.localStorage.getItem(name)])
                        countryField.withStorage(value => {
                          window.localStorage.setItem(countryField.name, value[0])
                        })

                        const phoneField = new TelField("phone")
                        .withLabel(label => label.innerHTML = "Telefon")
                        .withType(tel => {
                          tel.placeholder = "+49 153 1223 1111"
                          tel.required = true
                        })
                        .onInput(async() => {
                          phoneField.withStorage(value => {
                            window.localStorage.setItem(phoneField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        phoneField.withStorage(value => {
                          window.localStorage.setItem(phoneField.name, value)
                        })


                        const checkAndProceedField = new DivField("check-and-proceed")
                        .withType(div => {
                          div.innerHTML = "Jetzt speichern"
                          div.style.fontSize = "21px"
                          div.style.margin = "144px 34px 0 34px"
                          div.style.backgroundColor = "#f7aa20"
                          div.style.borderRadius = "13px"
                          div.style.height = "89px"
                          div.style.display = "flex"
                          div.style.justifyContent = "center"
                          div.style.alignItems = "center"
                          div.addEventListener("mouseover", () => div.style.backgroundColor = "#f19d08")
                          div.addEventListener("mouseout", () => div.style.backgroundColor = "#f7aa20")
                        })
                        .onClick(async () => {


                          let firstname
                          let lastname
                          let street
                          let zip
                          let state
                          let country
                          let phone
                          try {
                            firstname = await firstnameField.withValidValue()
                            lastname = await lastnameField.withValidValue()
                            street = await streetField.withValidValue()
                            zip = await zipField.withValidValue()
                            state = (await stateField.withValidValue())[0].value
                            country = (await countryField.withValidValue())[0].value
                            phone = await phoneField.withValidValue()
                          } catch (error) {
                            alert(`Feld '${error.fieldName}' ist notwendig.`)
                            document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                            return
                          }


                          try {
                            Helper.addOverlay()
                            Helper.setWaitCursor()
                            {
                              const register = {}
                              register.url = "/register/owner/closed/5/"
                              register.firstname = firstname
                              register.lastname = lastname
                              register.street = street
                              register.zip = zip
                              register.country = country
                              register.state = state
                              register.phone = phone
                              register.location = window.location.href
                              register.referer = document.referrer
                              register.localStorageEmail = await Request.email()
                              register.localStorageId = await Request.localStorageId()
                              await Request.sequence(register)
                            }

                            alert("Speichern erfolgreich..")
                          } catch (error) {
                            alert("Fehler.. Bitte wiederholen.")
                          }
                          window.location.reload()
                        })






                        async function changeState() {
                          const options = await countryField.withValidValue()
                          if (options[0].value === "Deutschland") {
                            stateField.withOptions(["Baden-Württemberg", "Bayern", "Berlin", "Brandenburg", "Bremen", "Hamburg", "Hessen", "Mecklenburg-Vorpommern", "Niedersachsen", "Nordrhein Westfalen", "Rheinland-Pfalz", "Saarland", "Sachsen", "Sachsen-Anhalt", "Schleswig-Holstein", "Thüringen"])
                          }
                          if (options[0].value === "Österreich") {
                            stateField.withOptions(["Burgenland", "Kärnten", "Niederösterreich", "Oberösterreich", "Salzburg", "Steiermark", "Tirol", "Vorarlberg", "Wien"])
                          }
                          if (options[0].value === "Schweiz") {
                            stateField.withOptions(["Aargau", "Appenzell Ausserrhoden", "Appenzell Innerrhoden", "Basel-Land", "Basel-Stadt", "Bern", "Fribourg Freiburg", "Genève Geneva", "Glarus", "Graubünden Grischuns Grigioni", "Jura", "Luzern Lucerne", "Neuchâtel", "Nidwalden", "Obwalden", "St.Gallen", "Schaffhausen", "Schwyz", "Solothurn", "Thurgau", "Ticino", "Uri", "Vaud", "Valais Wallis", "Zug", "Zürich"])
                          }
                          stateField.withStorage(options => {
                            window.localStorage.setItem(stateField.name, options[0])
                          })
                        }





                      })


                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/owner.svg"
                      icon.alt = "Besitzerdaten"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Besitzerdaten"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)

                      buttons.append(button)
                    }

                    {
                      const button = document.createElement("div")
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"


                      button.addEventListener("click", () => {

                        Helper.popup(overlay => {

                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.style.zIndex = "1"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/felix/shs/public/ep-logo.svg"
                          logo.alt = "Energie Plattform"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = "Unternehmensdaten"
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)


                          const funnel = document.createElement("div")
                          funnel.style.overflow = "auto"
                          funnel.style.paddingBottom = "144px"

                          {
                            const company = document.createElement("div")
                            company.classList.add("companyName")
                            funnel.append(company)
                          }

                          {
                            const company = document.createElement("div")
                            company.classList.add("companyWebsite")
                            funnel.append(company)
                          }


                          {
                            const company = document.createElement("div")
                            company.classList.add("companySector")
                            funnel.append(company)
                          }

                          {
                            const company = document.createElement("div")
                            company.classList.add("companyLogo")
                            funnel.append(company)
                          }

                          const checkAndProceed = document.createElement("div")
                          checkAndProceed.classList.add("check-and-proceed")
                          funnel.append(checkAndProceed)

                          overlay.append(funnel)
                        })


                        const companyNameField = new TextField("companyName")
                        .withLabel(label => label.innerHTML = "Firma")
                        .withType(text => {
                          text.placeholder = "Mein Unternehmen GmbH"
                          text.maxLength = "34"
                          text.required = true
                        })
                        .onInput(async() => {
                          companyNameField.withStorage(value => {
                            window.localStorage.setItem(companyNameField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        companyNameField.withStorage(value => {
                          window.localStorage.setItem(companyNameField.name, value)
                        })

                        const companyWebsiteField = new UrlField("companyWebsite")
                        .withLabel(label => label.innerHTML = "Webseite")
                        .withType(url => {
                          url.placeholder = "https://meine-webseite.de/"
                          url.maxLength = "34"
                          url.pattern = "https://.*/"
                          url.required = true
                        })
                        .onInput(async() => {
                          companyWebsiteField.withStorage(value => {
                            window.localStorage.setItem(companyWebsiteField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        companyWebsiteField.withStorage(value => {
                          window.localStorage.setItem(companyWebsiteField.name, value)
                        })

                        const companySectorField = new TextField("companySector")
                        .withLabel(label => label.innerHTML = "Branche")
                        .withType(text => {
                          text.placeholder = "Energie"
                          text.maxLength = "21"
                          text.required = true
                        })
                        .onInput(async() => {
                          companySectorField.withStorage(value => {
                            window.localStorage.setItem(companySectorField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        companySectorField.withStorage(value => {
                          window.localStorage.setItem(companySectorField.name, value)
                        })

                        const companyLogoField = new FileField("companyLogo")
                        .withLabel(label => label.innerHTML = "Logo")
                        .withType(file => {
                          file.accept = "image/jpeg, image/png"
                        })
                        .onInput((event) => {
                          companyLogoField.withValidImage(event.target.files[0])
                        })
                        companyLogoField.withValidValue()


                        const checkAndProceedField = new DivField("check-and-proceed")
                        .withType(div => {
                          div.innerHTML = "Jetzt speichern"
                          div.style.fontSize = "21px"
                          div.style.margin = "144px 34px 0 34px"
                          div.style.backgroundColor = "#f7aa20"
                          div.style.borderRadius = "13px"
                          div.style.height = "89px"
                          div.style.display = "flex"
                          div.style.justifyContent = "center"
                          div.style.alignItems = "center"
                        })
                        .onClick(async () => {

                          let companyName
                          let companyWebsite
                          let companySector
                          let companyLogoFile
                          let companyLogoImage
                          try {
                            companyName = await companyNameField.withValidValue()
                            companyWebsite = await companyWebsiteField.withValidValue()
                            companySector = await companySectorField.withValidValue()
                            companyLogoFile = (await companyLogoField.withValidValue())[0]
                          } catch (error) {
                            alert(`Feld '${error.fieldName}' ist notwendig.`)
                            document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                            return
                          }

                          if (companyLogoFile !== undefined) {
                            companyLogoImage = await companyLogoField.withValidImage(companyLogoFile)
                          }


                          try {
                            Helper.addOverlay()
                            Helper.setWaitCursor()
                            {
                              const company = {}
                              company.url = "/register/company/closed/5/"
                              company.name = companyName
                              company.website = companyWebsite
                              company.sector = companySector
                              company.logo = companyLogoImage
                              company.location = window.location.href
                              company.referer = document.referrer
                              company.localStorageEmail = await Request.email()
                              company.localStorageId = await Request.localStorageId()
                              await Request.sequence(company)
                            }

                            alert("Speichern erfolgreich..")
                          } catch (error) {
                            alert("Fehler.. Bitte wiederholen.")
                          }
                          window.location.reload()

                        })
                      })


                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/company.svg"
                      icon.alt = "Unternehmensdaten"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Unternehmensdaten"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)

                      buttons.append(button)
                    }

                    {
                      const button = document.createElement("div")
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"


                      button.addEventListener("click", () => {

                        Helper.popup(overlay => {

                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.style.zIndex = "1"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))
                          const logo = document.createElement("img")
                          logo.src = "/felix/shs/public/ep-logo.svg"
                          logo.alt = "Energie Plattform"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = "Angebotsdaten"
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)


                          const funnel = document.createElement("div")
                          funnel.style.overflow = "auto"
                          funnel.style.paddingBottom = "144px"

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerTag")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerTitle")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerDescription")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerMessage")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerNotes")
                            funnel.append(offer)
                          }


                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerTermsPdf")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerCompanyPdf")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerProductPdf")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerDiscount")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerVat")
                            funnel.append(offer)
                          }

                          {
                            const offer = document.createElement("div")
                            offer.classList.add("offerVisibility")
                            funnel.append(offer)
                          }


                          const checkAndProceed = document.createElement("div")
                          checkAndProceed.classList.add("check-and-proceed")
                          funnel.append(checkAndProceed)

                          overlay.append(funnel)
                        })

                        const offerTagField = new TextField("offerTag")
                        .withLabel(label => label.innerHTML = "Angebot ID")
                        .withType(text => {
                          text.placeholder = "mein-angebot"
                          text.maxLength = "13"
                          text.required = true
                          text.accept = "text/tag"
                        })
                        .onInput(async() => {
                          offerTagField.withStorage(value => {
                            window.localStorage.setItem(offerTagField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerTagField.withStorage(value => {
                          window.localStorage.setItem(offerTagField.name, value)
                        })


                        const offerTitleField = new TextField("offerTitle")
                        .withLabel(label => label.innerHTML = "Titel")
                        .withType(text => {
                          text.placeholder = "Energie Konzept 33VO"
                          text.maxLength = "55"
                          text.required = true
                        })
                        .onInput(async() => {
                          offerTitleField.withStorage(value => {
                            window.localStorage.setItem(offerTitleField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerTitleField.withStorage(value => {
                          window.localStorage.setItem(offerTitleField.name, value)
                        })


                        const offerDescriptionField = new TextAreaField("offerDescription")
                        .withLabel(label => label.innerHTML = "Beschreibung")
                        .withType(text => {
                          text.placeholder = "Mit dem Energie Konzept nutzen Sie die Vorteile von.."
                          text.maxlength = "987"
                          text.style.height = "144px"
                          text.required = true
                        })
                        .onInput(async() => {
                          offerDescriptionField.withStorage(value => {
                            window.localStorage.setItem(offerDescriptionField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerDescriptionField.withStorage(value => {
                          window.localStorage.setItem(offerDescriptionField.name, value)
                        })


                        const offerMessageField = new TextAreaField("offerMessage")
                        .withLabel(label => label.innerHTML = "Willkommensnachricht an den Endverbraucher")
                        .withType(text => {
                          text.placeholder = "Wir sind Ihnen schon jetzt für Ihr Vertrauen und Ihr Interesse dankbar.."
                          text.maxlength = "987"
                          text.style.height = "144px"
                          text.required = true
                        })
                        .onInput(async() => {
                          offerMessageField.withStorage(value => {
                            window.localStorage.setItem(offerMessageField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerMessageField.withStorage(value => {
                          window.localStorage.setItem(offerMessageField.name, value)
                        })


                        const offerNotesField = new TextAreaField("offerNotes")
                        .withLabel(label => label.innerHTML = "Warnhinweise für den Endverbraucher")
                        .withType(text => {
                          text.placeholder = "Befindet sich die Stellfläche des Gerüsts auf einem öffentlichen Gehweg, muss.."
                          text.maxlength = "987"
                          text.style.height = "144px"
                          text.required = true
                        })
                        .onInput(async() => {
                          offerNotesField.withStorage(value => {
                            window.localStorage.setItem(offerNotesField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerNotesField.withStorage(value => {
                          window.localStorage.setItem(offerNotesField.name, value)
                        })

                        const offerTermsPdfField = new FileField("offerTermsPdf")
                        .withLabel(label => label.innerHTML = "AGBs als PDF Datei hochladen")
                        .withType(file => {
                          file.accept = "application/pdf"
                        })
                        .onInput((event) => {
                          offerTermsPdfField.withValidPdf(event.target.files[0])
                        })
                        offerTermsPdfField.withValidValue()


                        const offerCompanyPdfField = new FileField("offerCompanyPdf")
                        .withLabel(label => label.innerHTML = "Unternehmensbrochüre als PDF Datei hochladen")
                        .withType(file => {
                          file.accept = "application/pdf"
                        })
                        .onInput((event) => {
                          offerCompanyPdfField.withValidPdf(event.target.files[0])
                        })
                        offerCompanyPdfField.withValidValue()


                        const offerProductPdfField = new FileField("offerProductPdf")
                        .withLabel(label => label.innerHTML = "Produktbrochüre als PDF Datei hochladen")
                        .withType(file => {
                          file.accept = "application/pdf"
                        })
                        .onInput((event) => {
                          offerProductPdfField.withValidPdf(event.target.files[0])
                        })
                        offerProductPdfField.withValidValue()

                        const offerDiscountField = new NumberField("offerDiscount")
                        .withLabel(label => label.innerHTML = "Rabatt in %")
                        .withType(number => {
                          number.placeholder = "5"
                          number.required = true
                        })
                        .onInput(async() => {
                          offerDiscountField.withStorage(value => {
                            window.localStorage.setItem(offerDiscountField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerDiscountField.withStorage(value => {
                          window.localStorage.setItem(offerDiscountField.name, value)
                        })

                        const offerVatField = new NumberField("offerVat")
                        .withLabel(label => label.innerHTML = "Mehrwertsteuer in %")
                        .withType(number => {
                          number.placeholder = "19"
                          number.required = true
                        })
                        .onInput(async() => {
                          offerVatField.withStorage(value => {
                            window.localStorage.setItem(offerVatField.name, value)
                          })
                        })
                        .fromStorage((name) => window.localStorage.getItem(name))
                        offerVatField.withStorage(value => {
                          window.localStorage.setItem(offerVatField.name, value)
                        })

                        const offerVisibilityField = new SelectionField("offerVisibility")
                        .withOptions(["Sichtbar nur für mich", "Sichtbar für alle"])
                        .withLabel(label => label.innerHTML = "Sichtbarkeit")
                        .onInput(async() => {
                          offerVisibilityField.withStorage(value => {
                            window.localStorage.setItem(offerVisibilityField.name, value[0])
                          })
                        })
                        .fromStorage((name) => [window.localStorage.getItem(name)])
                        offerVisibilityField.withStorage(value => {
                          window.localStorage.setItem(offerVisibilityField.name, value[0])
                        })




                        const checkAndProceedField = new DivField("check-and-proceed")
                        .withType(div => {
                          div.innerHTML = "Jetzt speichern"
                          div.style.fontSize = "21px"
                          div.style.margin = "144px 34px 0 34px"
                          div.style.backgroundColor = "#f7aa20"
                          div.style.borderRadius = "13px"
                          div.style.height = "89px"
                          div.style.display = "flex"
                          div.style.justifyContent = "center"
                          div.style.alignItems = "center"
                        })
                        .onClick(async () => {
                          let offerTag
                          let offerTitle
                          let offerDescription
                          let offerMessage
                          let offerNotes
                          let offerTermsFile
                          let offerTermsPdf
                          let offerCompanyFile
                          let offerCompanyPdf
                          let offerProductFile
                          let offerProductPdf
                          let discount
                          let vat
                          let offerVisibility

                          try {
                            offerTag = await offerTagField.withValidValue()
                            offerTitle = await offerTitleField.withValidValue()
                            offerDescription = await offerDescriptionField.withValidValue()
                            offerMessage = await offerMessageField.withValidValue()
                            offerNotes = await offerNotesField.withValidValue()

                            offerTermsFile = (await offerTermsPdfField.withValidValue())[0]
                            if (offerTermsFile !== undefined) {
                              offerTermsPdf = await offerTermsPdfField.withValidPdf(offerTermsFile)
                            }

                            offerCompanyFile = (await offerCompanyPdfField.withValidValue())[0]
                            if (offerCompanyFile !== undefined) {
                              offerCompanyPdf = await offerCompanyPdfField.withValidPdf(offerCompanyFile)
                            }
                            offerProductFile = (await offerProductPdfField.withValidValue())[0]
                            if (offerProductFile !== undefined) {
                              offerProductPdf = await offerProductPdfField.withValidPdf(offerProductFile)
                            }
                            discount = await offerDiscountField.withValidValue()
                            vat = await offerVatField.withValidValue()
                            offerVisibility = (await offerVisibilityField.withValidValue())[0].value

                            if (offerVisibility === "Sichtbar nur für mich") {
                              offerVisibility = "closed"
                            }
                            if (offerVisibility === "Sichtbar für alle") {
                              offerVisibility = "open"
                            }

                          } catch (error) {
                            alert(`Feld '${error.fieldName}' ist notwendig.`)
                            document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                            return
                          }

                          try {
                            Helper.addOverlay()
                            Helper.setWaitCursor()
                            {
                              const register = {}
                              register.url = "/register/offer/closed/5/"
                              register.type = "offer"
                              register.tag = offerTag
                              register.title = offerTitle
                              register.description = offerDescription
                              register.message = offerMessage
                              register.notes = offerNotes
                              register.termsPdf = offerTermsPdf
                              register.companyPdf = offerCompanyPdf
                              register.productPdf = offerProductPdf
                              register.discount = discount
                              register.vat = vat
                              register.visibility = offerVisibility
                              register.location = window.location.href
                              register.referer = document.referrer
                              register.localStorageEmail = await Request.email()
                              register.localStorageId = await Request.localStorageId()
                              await Request.sequence(register)
                            }

                            if (offerVisibility === "closed") {
                              alert("Speichern erfolgreich..")
                            }
                            if (offerVisibility === "open") {
                              alert("Gratuliere, Sie haben soeben ein Angebot eingereicht! Nach erfolgreicher Prüfung wird ihr Angebot auf der Energie Plattform erscheinen.")
                            }
                          } catch (error) {
                            alert("Fehler.. Bitte wiederholen.")
                          }
                          window.location.reload()
                        })

                      })


                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/offer.svg"
                      icon.alt = "Angebotsdaten"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Angebotsdaten"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)

                      buttons.append(button)
                    }

                    {
                      const button = document.createElement("div")
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"


                      button.addEventListener("click", () => {

                        Helper.popup(async overlay => {

                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.style.zIndex = "1"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/felix/shs/public/ep-logo.svg"
                          logo.alt = "Energie Plattform"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = "Dienste"
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)


                          const div = document.createElement("div")
                          div.style.overflow = "auto"
                          div.style.paddingBottom = "144px"

                          const serviceContainer = document.createElement("div")
                          div.append(serviceContainer)


                          // let services = JSON.parse(window.sessionStorage.getItem("services")) || []
                          {
                            const get = {}
                            get.url = "/get/services/closed/5/"
                            get.localStorageId = await Request.localStorageId()
                            get.localStorageEmail = await Request.email()
                            get.location = window.location.href
                            get.referer = document.referrer
                            const res = await Request.middleware(get)

                            if (res.status === 200) {
                              const services = JSON.parse(res.response)
                              // window.sessionStorage.setItem("services", JSON.stringify(services))

                              for (let i = 0; i < services.length; i++) {
                                const serviceButton = Helper.createButton("service", services[i])
                                serviceContainer.append(serviceButton)
                              }

                            }
                          }




                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {


                              const popup = Helper.popup(overlay => {

                                const header = document.createElement("div")
                                header.style.position = "fixed"
                                header.style.bottom = "0"
                                header.style.left = "0"
                                header.style.width = "100%"
                                header.style.display = "flex"
                                header.style.justifyContent = "flex-start"
                                header.style.alignItems = "center"
                                header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                header.style.background = "white"
                                header.style.cursor = "pointer"
                                header.style.zIndex = "1"
                                header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                const logo = document.createElement("img")
                                logo.src = "/felix/shs/public/ep-logo.svg"
                                logo.alt = "Energie Plattform"
                                logo.style.width = "55px"
                                logo.style.margin = "21px 34px"
                                header.append(logo)
                                const title = document.createElement("div")
                                title.innerHTML = "Dienst hinzufügen"
                                title.style.fontWeight = "bold"
                                title.style.fontSize = "21px"
                                header.append(title)
                                overlay.append(header)

                                const funnel = document.createElement("div")
                                funnel.style.overflow = "auto"
                                funnel.style.paddingBottom = "144px"

                                {
                                  const offer = document.createElement("div")
                                  offer.classList.add("serviceName")
                                  funnel.append(offer)
                                }
                                {
                                  const offer = document.createElement("div")
                                  offer.classList.add("serviceUnits")
                                  funnel.append(offer)
                                }
                                {
                                  const offer = document.createElement("div")
                                  offer.classList.add("servicePrice")
                                  funnel.append(offer)
                                }
                                {
                                  const offer = document.createElement("div")
                                  offer.classList.add("serviceSelected")
                                  funnel.append(offer)
                                }

                                {
                                  const button = document.createElement("div")
                                  button.classList.add("checkAndProceed")
                                  funnel.append(button)
                                }

                                overlay.append(funnel)
                              })



                              const serviceNameField = new TextField("serviceName")
                              .withLabel(label => label.innerHTML = "Dienst")
                              .withType(text => {
                                text.placeholder = "Lieferung Speichermodul 3H12"
                                text.required = true
                              })
                              .onInput(async() => {
                                serviceNameField.withStorage(value => {
                                  // window.sessionStorage.setItem(serviceNameField.name, value)
                                })
                              })
                              .fromStorage((name) => window.sessionStorage.getItem(name))
                              serviceNameField.withStorage(value => {
                                // window.sessionStorage.setItem(serviceNameField.name, value)
                              })

                              const serviceUnitsField = new TelField("serviceUnits")
                              .withLabel(label => label.innerHTML = "Einheiten")
                              .withType(text => {
                                text.placeholder = "1"
                                text.pattern = "\\d*"
                                text.maxLength = "3"
                                text.required = true
                              })
                              .onInput(async() => {
                                serviceUnitsField.withStorage(value => {
                                  // window.sessionStorage.setItem(serviceUnitsField.name, value)
                                })
                              })
                              .fromStorage((name) => window.sessionStorage.getItem(name))
                              serviceUnitsField.withStorage(value => {
                                // window.sessionStorage.setItem(serviceUnitsField.name, value)
                              })


                              const servicePriceField = new TelField("servicePrice")
                              .withLabel(label => label.innerHTML = "Preis")
                              .withType(text => {
                                text.placeholder = "1499.95"
                                text.pattern = "[0-9]+(\\.[0-9][0-9]?)?"
                                text.required = true
                              })
                              .onInput(async() => {
                                servicePriceField.withStorage(value => {
                                  // window.sessionStorage.setItem(servicePriceField.name, value)
                                })
                              })
                              .fromStorage((name) => window.sessionStorage.getItem(name))
                              servicePriceField.withStorage(value => {
                                // window.sessionStorage.setItem(servicePriceField.name, value)
                              })

                              const serviceSelectedField = new CheckboxField("serviceSelected")
                              .withLabel(label => label.innerHTML = "Aktivieren")
                              .onInput(async() => {
                                serviceSelectedField.withStorage(value => {
                                  // window.sessionStorage.setItem(serviceSelectedField.name, value)
                                })
                              })
                              .fromStorage((name) => window.sessionStorage.getItem(name))
                              serviceSelectedField.withStorage(value => {
                                // window.sessionStorage.setItem(serviceSelectedField.name, value)
                              })

                              const checkAndProceedField = new DivField("checkAndProceed")
                              .withType(div => {
                                div.innerHTML = "Jetzt hinzufügen"
                                div.style.fontSize = "21px"
                                div.style.margin = "144px 34px 0 34px"
                                div.style.backgroundColor = "#f7aa20"
                                div.style.borderRadius = "13px"
                                div.style.height = "89px"
                                div.style.display = "flex"
                                div.style.justifyContent = "center"
                                div.style.alignItems = "center"
                                div.addEventListener("mouseover", () => div.style.backgroundColor = "#f19d08")
                                div.addEventListener("mouseout", () => div.style.backgroundColor = "#f7aa20")
                              })
                              .onClick(async () => {

                                let serviceName
                                let serviceUnits
                                let servicePrice
                                let serviceSelected
                                try {
                                  serviceName = await serviceNameField.withValidValue()
                                  serviceUnits= await serviceUnitsField.withValidValue()
                                  servicePrice= await servicePriceField.withValidValue()
                                  serviceSelected = await serviceSelectedField.withValidValue()
                                } catch (error) {
                                  alert(`Feld '${error.fieldName}' ist notwendig.`)
                                  document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                                  return
                                }


                                try {
                                  const securityOverlay = Helper.addOverlay()
                                  Helper.setWaitCursor()

                                  const service = {}
                                  service.name = serviceName
                                  service.units = serviceUnits
                                  service.price = servicePrice
                                  service.selected = serviceSelected

                                  // const services = JSON.parse(window.sessionStorage.getItem("services")) || []
                                  // services.push(service)
                                  // window.sessionStorage.setItem("services", JSON.stringify(services))

                                  // serviceContainer.innerHTML = ""
                                  // for (let i = 0; i < services.length; i++) {
                                  //   const serviceButton = Helper.createButton("service", services[i])
                                  //   serviceContainer.append(serviceButton)
                                  // }

                                  {
                                    const register = {}
                                    register.url = "/register/offer/closed/5/"
                                    register.type = "service"
                                    register.name = serviceName
                                    register.units = serviceUnits
                                    register.price = servicePrice
                                    register.selected = serviceSelected
                                    register.localStorageId = await Request.localStorageId()
                                    register.localStorageEmail = await Request.email()
                                    register.location = window.location.href
                                    register.referer = document.referrer
                                    await Request.sequence(register)
                                  }

                                  {
                                    const get = {}
                                    get.url = "/get/services/closed/5/"
                                    get.localStorageId = await Request.localStorageId()
                                    get.localStorageEmail = await Request.email()
                                    get.location = window.location.href
                                    get.referer = document.referrer
                                    const res = await Request.middleware(get)

                                    if (res.status === 200) {
                                      const services = JSON.parse(res.response)
                                      // window.sessionStorage.setItem("services", JSON.stringify(services))

                                      serviceContainer.innerHTML = ""
                                      for (let i = 0; i < services.length; i++) {
                                        const serviceButton = Helper.createButton("service", services[i])
                                        serviceContainer.append(serviceButton)
                                      }

                                    }
                                  }

                                  alert("Speichern erfolgreich..")
                                  Helper.removeOverlay(securityOverlay)
                                  Helper.removeOverlay(popup)

                                } catch (error) {
                                  alert("Fehler.. Bitte wiederholen.")
                                  window.location.reload()
                                }



                              })
                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/add-icon.svg"
                            icon.alt = "Dienst hinzufügen"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Dienst hinzufügen"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            div.append(button)
                          }

                          // {
                          //   const button = document.createElement("div")
                          //   button.innerHTML = "Speichern"
                          //   button.style.fontSize = "21px"
                          //   button.style.margin = "21px 34px"
                          //   button.style.backgroundColor = "#f7aa20"
                          //   button.style.borderRadius = "13px"
                          //   button.style.height = "89px"
                          //   button.style.display = "flex"
                          //   button.style.justifyContent = "center"
                          //   button.style.alignItems = "center"
                          //   button.style.cursor = "pointer"
                          //   button.addEventListener("mouseover", () => button.style.backgroundColor = "#f19d08")
                          //   button.addEventListener("mouseout", () => button.style.backgroundColor = "#f7aa20")
                          //   button.addEventListener("click", async () => {


                          //     try {
                          //       Helper.addOverlay()
                          //       Helper.setWaitCursor()
                          //       const services = JSON.parse(window.sessionStorage.getItem("services"))
                          //       if (services !== null) {
                          //         if (services.length > 0) {
                          //           {
                          //             const register = {}
                          //             register.url = "/register/services/closed/5/"
                          //             register.services = services
                          //             register.location = window.location.href
                          //             register.referer = document.referrer
                          //             register.localStorageEmail = await Request.email()
                          //             register.localStorageId = await Request.localStorageId()
                          //             await Request.sequence(register)
                          //           }

                          //           alert("Speichern erfolgreich..")
                          //         }
                          //       }
                          //     } catch (error) {
                          //       alert("Fehler.. Bitte wiederholen.")

                          //     }
                          //     window.location.reload()

                          //   })
                          //   div.append(button)
                          // }

                          overlay.append(div)
                        })


                      })


                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/services.svg"
                      icon.alt = "Dienste"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Dienste"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)

                      buttons.append(button)
                    }

                    {
                      const button = document.createElement("div")
                      button.style.display = "flex"
                      button.style.flexWrap = "wrap"
                      button.style.justifyContent = "space-between"
                      button.style.alignItems = "center"
                      button.style.margin = "21px 34px"
                      button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                      button.style.borderRadius = "13px"
                      button.style.border = "0.3px solid black"
                      button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                      button.style.cursor = "pointer"


                      button.addEventListener("click", () => {

                        Helper.popup(async overlay => {

                          const header = document.createElement("div")
                          header.style.position = "fixed"
                          header.style.bottom = "0"
                          header.style.left = "0"
                          header.style.width = "100%"
                          header.style.display = "flex"
                          header.style.justifyContent = "flex-start"
                          header.style.alignItems = "center"
                          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                          header.style.background = "white"
                          header.style.cursor = "pointer"
                          header.style.zIndex = "1"
                          header.addEventListener("click", () => Helper.removeOverlay(overlay))

                          const logo = document.createElement("img")
                          logo.src = "/felix/shs/public/ep-logo.svg"
                          logo.alt = "Energie Plattform"
                          logo.style.width = "55px"
                          logo.style.margin = "21px 34px"
                          header.append(logo)
                          const title = document.createElement("div")
                          title.innerHTML = "Dienste filtern"
                          title.style.fontWeight = "bold"
                          title.style.fontSize = "21px"
                          header.append(title)
                          overlay.append(header)




                          const div = document.createElement("div")
                          div.style.overflow = "auto"
                          div.style.paddingBottom = "144px"

                          const filterContainer = document.createElement("div")
                          div.append(filterContainer)

                          {
                            const get = {}
                            get.url = "/get/filter/closed/5/"
                            get.localStorageId = await Request.localStorageId()
                            get.localStorageEmail = await Request.email()
                            get.location = window.location.href
                            get.referer = document.referrer
                            const res = await Request.middleware(get)

                            if (res.status === 200) {
                              const filter = JSON.parse(res.response)

                              for (let i = 0; i < filter.length; i++) {

                                const button = document.createElement("div")
                                button.style.display = "flex"
                                button.style.flexWrap = "wrap"
                                button.style.justifyContent = "space-between"
                                button.style.alignItems = "center"
                                button.style.margin = "21px 34px"
                                button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                                button.style.borderRadius = "13px"
                                button.style.border = "0.3px solid black"
                                button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                                button.style.cursor = "pointer"


                                // register filter first then get it

                                // const filterButton = Helper.createButton("filter", filter[i])
                                filterContainer.append(button)
                              }

                            }
                          }




                          {
                            const button = document.createElement("div")
                            button.style.display = "flex"
                            button.style.flexWrap = "wrap"
                            button.style.justifyContent = "space-between"
                            button.style.alignItems = "center"
                            button.style.margin = "21px 34px"
                            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                            button.style.borderRadius = "13px"
                            button.style.border = "0.3px solid black"
                            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                            button.style.cursor = "pointer"

                            button.addEventListener("click", () => {


                              const popup = Helper.popup(async overlay => {

                                const header = document.createElement("div")
                                header.style.position = "fixed"
                                header.style.bottom = "0"
                                header.style.left = "0"
                                header.style.width = "100%"
                                header.style.display = "flex"
                                header.style.justifyContent = "flex-start"
                                header.style.alignItems = "center"
                                header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                                header.style.background = "white"
                                header.style.cursor = "pointer"
                                header.style.zIndex = "1"
                                header.addEventListener("click", () => Helper.removeOverlay(overlay))

                                const logo = document.createElement("img")
                                logo.src = "/felix/shs/public/ep-logo.svg"
                                logo.alt = "Energie Plattform"
                                logo.style.width = "55px"
                                logo.style.margin = "21px 34px"
                                header.append(logo)
                                const title = document.createElement("div")
                                title.innerHTML = "Filter hinzufügen"
                                title.style.fontWeight = "bold"
                                title.style.fontSize = "21px"
                                header.append(title)
                                overlay.append(header)

                                const funnel = document.createElement("div")
                                funnel.style.overflow = "auto"
                                funnel.style.paddingBottom = "144px"

                                {
                                  const title = document.createElement("h2")
                                  title.innerHTML = "Wenn.."
                                  title.style.margin = "21px 34px"
                                  funnel.append(title)
                                }


                                {
                                  const get = {}
                                  get.url = "/get/funnel/closed/5/"
                                  get.state = "keys"
                                  get.localStorageId = await Request.localStorageId()
                                  get.localStorageEmail = await Request.email()
                                  get.location = window.location.href
                                  get.referer = document.referrer
                                  const res = await Request.middleware(get)


                                  const operandField = new SelectionField("operand", funnel)
                                  operandField.label.innerHTML = "Operand"
                                  if (res.status !== 200) {
                                    alert("Es wurde kein Funnel zum filtern gefunden. Bitte versuchen Sie es später nochmal.")
                                    Helper.setNotValidStyle(operandField.select)
                                    return
                                  }

                                  if (res.status === 200) {
                                    const keys = JSON.parse(res.response)

                                    for (let i = 0; i < keys.length; i++) {
                                      const key = keys[i]

                                      const option = document.createElement("option")
                                      option.value = key
                                      option.text = key
                                      operandField.select.append(option)
                                      Helper.setValidStyle(operandField.select)
                                    }
                                  }
                                }

                                const operatorField = new SelectionField("operator", funnel)
                                {
                                  operatorField.label.innerHTML = "Operator"
                                  const options = ["echt kleiner", "kleiner oder gleich", "gleich", "größer oder gleich", "echt größer"]
                                  for (let i = 0; i < options.length; i++) {
                                    const key = options[i]
                                    const option = document.createElement("option")
                                    option.value = key
                                    option.text = key
                                    operatorField.select.append(option)
                                    Helper.setValidStyle(operatorField.select)
                                  }
                                }

                                const comparatorField = new TextField("comparator", funnel)
                                comparatorField.label.innerHTML = "Vergleichswert"
                                comparatorField.input.required = true
                                comparatorField.input.addEventListener("input", () => comparatorField.withValidValue())
                                Helper.setNotValidStyle(comparatorField.input)


                                {
                                  const title = document.createElement("h2")
                                  title.innerHTML = "Dann.."
                                  title.style.margin = "21px 34px"
                                  funnel.append(title)
                                }


                                const serviceNameField = new SelectionField("serviceName", funnel)
                                serviceNameField.label.innerHTML = "Dienst"
                                {
                                  const get = {}
                                  get.url = "/get/services/closed/5/"
                                  get.localStorageId = await Request.localStorageId()
                                  get.localStorageEmail = await Request.email()
                                  get.location = window.location.href
                                  get.referer = document.referrer
                                  const res = await Request.middleware(get)

                                  if (res.status !== 200) {
                                    alert("Sie müssen erst Dienste anlegen..")
                                    Helper.removeOverlay(overlay)
                                  }

                                  if (res.status === 200) {
                                    const services = JSON.parse(res.response)
                                    // console.log(services);

                                    if (services.length === 0) {
                                      alert("Sie müssen erst Dienste anlegen..")
                                      Helper.removeOverlay(overlay)
                                    }

                                    for (let i = 0; i < services.length; i++) {
                                      const service = services[i]

                                      const option = document.createElement("option")
                                      option.value = service.name
                                      option.text = service.name
                                      serviceNameField.select.append(option)
                                      Helper.setValidStyle(serviceNameField.select)
                                    }


                                  }

                                }


                                {
                                  const button = document.createElement("div")
                                  button.classList.add("checkAndProceed")
                                  funnel.append(button)
                                }

                                overlay.append(funnel)
                              })


                              const checkAndProceedField = new DivField("checkAndProceed")
                              .withType(div => {
                                div.innerHTML = "Jetzt hinzufügen"
                                div.style.fontSize = "21px"
                                div.style.margin = "144px 34px 0 34px"
                                div.style.backgroundColor = "#f7aa20"
                                div.style.borderRadius = "13px"
                                div.style.height = "89px"
                                div.style.display = "flex"
                                div.style.justifyContent = "center"
                                div.style.alignItems = "center"
                                div.addEventListener("mouseover", () => div.style.backgroundColor = "#f19d08")
                                div.addEventListener("mouseout", () => div.style.backgroundColor = "#f7aa20")
                              })
                              .onClick(async () => {


                                // register filter here

                                const serviceName = await serviceNameField.withValidValue()
                                const serviceUnits= await serviceUnitsField.withValidValue()
                                const servicePrice= await servicePriceField.withValidValue()
                                const serviceSelected = await serviceSelectedField.withValidValue()

                                // const service = {}
                                // service.name = serviceName
                                // service.units = serviceUnits
                                // service.price = servicePrice
                                // service.selected = serviceSelected

                                // services.push(service)
                                // window.sessionStorage.setItem("services", JSON.stringify(services))

                                filterContainer.innerHTML = ""
                                for (let i = 0; i < services.length; i++) {

                                  const button = document.createElement("div")

                                  // const serviceButton = Helper.createButton("service", services[i])
                                  filterContainer.append(button)
                                }

                                Helper.removeOverlay(popup)
                                {
                                  const register = {}
                                  register.url = "/register/service/closed/5/"
                                  register.name = serviceName
                                  register.units = serviceUnits
                                  register.price = servicePrice
                                  register.selected = serviceSelected
                                  register.location = window.location.href
                                  register.referer = document.referrer
                                  register.localStorageEmail = await Request.email()
                                  register.localStorageId = await Request.localStorageId()
                                  await Request.sequence(register)
                                }


                                alert("Speichern erfolgreich..")
                                window.location.reload()

                                // get after register
                              })



                            })

                            const icon = document.createElement("img")
                            icon.style.margin = "13px 34px"
                            icon.style.width = "34px"
                            icon.src = "/public/add-icon.svg"
                            icon.alt = "Hinzufügen"
                            button.append(icon)

                            const title = document.createElement("div")
                            title.innerHTML = "Filter hinzufügen"
                            title.style.margin = "21px 34px"
                            title.style.fontSize = "21px"
                            button.append(title)

                            div.append(button)
                          }

                          // {
                          //   const button = document.createElement("div")
                          //   button.innerHTML = "Speichern"
                          //   button.style.fontSize = "21px"
                          //   button.style.margin = "21px 34px"
                          //   button.style.backgroundColor = "#f7aa20"
                          //   button.style.borderRadius = "13px"
                          //   button.style.height = "89px"
                          //   button.style.display = "flex"
                          //   button.style.justifyContent = "center"
                          //   button.style.alignItems = "center"
                          //   button.style.cursor = "pointer"
                          //   button.addEventListener("mouseover", () => button.style.backgroundColor = "#f19d08")
                          //   button.addEventListener("mouseout", () => button.style.backgroundColor = "#f7aa20")
                          //   button.addEventListener("click", async () => {

                          //     const services = JSON.parse(window.sessionStorage.getItem("services"))

                          //     if (services !== null) {
                          //       if (services.length > 0) {
                          //         await Request.withVerifiedEmail(await Request.email(), async () => {

                          //           {
                          //             const register = {}
                          //             register.url = "/register/services/closed/5/"
                          //             register.services = services
                          //             register.location = window.location.href
                          //             register.referer = document.referrer
                          //             register.localStorageEmail = await Request.email()
                          //             register.localStorageId = await Request.localStorageId()
                          //             await Request.sequence(register)
                          //           }

                          //           alert("Speichern erfolgreich..")
                          //           window.location.reload()
                          //           return
                          //         })
                          //       }
                          //     }

                          //     // alert("Keine Dienste gefunden.")


                          //   })
                          //   div.append(button)
                          // }

                          overlay.append(div)
                        })


                      })


                      const icon = document.createElement("img")
                      icon.style.margin = "13px 34px"
                      icon.style.width = "34px"
                      icon.src = "/public/filter.svg"
                      icon.alt = "Filter"
                      button.append(icon)

                      const title = document.createElement("div")
                      title.innerHTML = "Filter"
                      title.style.margin = "21px 34px"
                      title.style.fontSize = "21px"
                      button.append(title)

                      buttons.append(button)
                    }

                    overlay.append(buttons)

                  })
                })

                const icon = document.createElement("img")
                icon.style.margin = "13px 34px"
                icon.style.width = "34px"
                icon.src = "/public/add-icon.svg"
                icon.alt = "Angebot erstellen"
                button.append(icon)

                const title = document.createElement("div")
                title.innerHTML = "Angebot erstellen"
                title.style.margin = "21px 34px"
                title.style.fontSize = "21px"
                button.append(title)

                buttons.append(button)
              }

            }

          }


          {
            const verify = {}
            verify.url = "/verify/offer/closed/5/"
            verify.state = "complete"
            verify.localStorageEmail = await Request.email()
            verify.location = window.location.href
            verify.referer = document.referrer
            verify.localStorageId = await Request.localStorageId()
            const res = await Request.middleware(verify)


            if (res.status === 200) {
              const button = document.createElement("div")
              button.style.display = "flex"
              button.style.flexWrap = "wrap"
              button.style.justifyContent = "space-between"
              button.style.alignItems = "center"
              button.style.margin = "21px 34px"
              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
              button.style.borderRadius = "13px"
              button.style.border = "0.3px solid black"
              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => {

                Helper.popup(async overlay => {

                  {
                    const header = document.createElement("div")
                    header.style.position = "fixed"
                    header.style.bottom = "0"
                    header.style.left = "0"
                    header.style.width = "100%"
                    header.style.display = "flex"
                    header.style.justifyContent = "flex-start"
                    header.style.alignItems = "center"
                    header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                    header.style.background = "white"
                    header.style.cursor = "pointer"
                    header.addEventListener("click", () => Helper.removeOverlay(overlay))

                    const logo = document.createElement("img")
                    logo.src = "/felix/shs/public/ep-logo.svg"
                    logo.alt = "Energie Plattform"
                    logo.style.width = "55px"
                    logo.style.margin = "21px 34px"
                    header.append(logo)

                    const title = document.createElement("div")
                    title.innerHTML = "Bewerber ansehen"
                    title.style.fontWeight = "bold"
                    title.style.fontSize = "21px"
                    header.append(title)

                    overlay.append(header)
                  }


                  {
                    const get = {}
                    get.url =  "/get/lead/closed/5/"
                    get.localStorageEmail = await Request.email()
                    get.location = window.location.href
                    get.referer = document.referrer
                    get.localStorageId = await Request.localStorageId()
                    const res = await Request.middleware(get)

                    if (res.status === 200) {
                      const leads = JSON.parse(res.response)

                      const list = document.createElement("div")
                      list.style.paddingBottom = "144px"
                      list.style.overflow = "auto"

                      for (let i = 0; i < leads.length; i++) {
                        const lead = leads[i]

                        const item = document.createElement("div")
                        item.classList.add("checklist-item")
                        item.style.margin = "34px"

                        const itemHeader = document.createElement("div")
                        itemHeader.classList.add("item-header")
                        itemHeader.style.display = "flex"
                        itemHeader.style.borderTopRightRadius = "21px"
                        itemHeader.style.borderTopLeftRadius = "21px"
                        itemHeader.style.borderBottomLeftRadius = "21px"
                        itemHeader.style.backgroundColor = "#d1d0d0"
                        itemHeader.style.cursor = "pointer"
                        itemHeader.addEventListener("click", () => {
                          Helper.popup(overlay => {

                            const header = document.createElement("div")
                            header.style.position = "fixed"
                            header.style.bottom = "0"
                            header.style.left = "0"
                            header.style.width = "100%"
                            header.style.display = "flex"
                            header.style.justifyContent = "flex-start"
                            header.style.alignItems = "center"
                            header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
                            header.style.background = "white"
                            header.style.cursor = "pointer"
                            header.addEventListener("click", () => Helper.removeOverlay(overlay))

                            const logo = document.createElement("img")
                            logo.src = "/felix/shs/public/ep-logo.svg"
                            logo.alt = "Energie Plattform"
                            logo.style.width = "55px"
                            logo.style.margin = "21px 34px"
                            header.append(logo)
                            const title = document.createElement("div")
                            title.innerHTML = `${lead.firstname} ${lead.lastname}`
                            title.style.fontWeight = "bold"
                            title.style.fontSize = "21px"
                            header.append(title)
                            overlay.append(header)



                            const buttons = document.createElement("div")
                            buttons.style.overflow = "auto"

                            {
                              const button = document.createElement("div")
                              button.style.display = "flex"
                              button.style.flexWrap = "wrap"
                              button.style.justifyContent = "space-between"
                              button.style.alignItems = "center"
                              button.style.margin = "21px 34px"
                              button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
                              button.style.borderRadius = "13px"
                              button.style.border = "0.3px solid black"
                              button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
                              button.style.cursor = "pointer"
                              button.addEventListener("click", async () => {

                                Helper.addOverlay()
                                Helper.setWaitCursor()

                                try {
                                  {
                                    const register = {}
                                    register.url = "/register/seller/closed/5/"
                                    register.id = lead.id
                                    register.localStorageEmail = await Request.email()
                                    register.localStorageId = await Request.localStorageId()
                                    register.location = window.location.href
                                    register.referer = document.referrer
                                    await Request.sequence(register)
                                  }

                                  {
                                    const send = {}
                                    send.url = "/send/email/closed/5/"
                                    send.email = lead.email
                                    send.event = "/register/seller/"
                                    send.localStorageEmail = await Request.email()
                                    send.localStorageId = await Request.localStorageId()
                                    send.location = window.location.href
                                    send.referer = document.referrer
                                    await Request.sequence(send)
                                  }

                                  {
                                    const register = {}
                                    register.url = "/register/lead/closed/5/"
                                    register.state = "closed"
                                    register.email = lead.email
                                    register.localStorageEmail = await Request.email()
                                    register.localStorageId = await Request.localStorageId()
                                    register.location = window.location.href
                                    register.referer = document.referrer
                                    await Request.sequence(register)
                                  }

                                  alert("Dieser Verkäufer kann ab sofort Ihr Angebot promoten.")
                                } catch (error) {
                                  alert("Fehler.. Bitte wiederholen.")
                                }
                                window.location.reload()
                              })

                              const icon = document.createElement("img")
                              icon.style.margin = "13px 34px"
                              icon.style.width = "34px"
                              icon.src = "/public/add-icon.svg"
                              icon.alt = "Add"
                              button.append(icon)

                              const title = document.createElement("div")
                              title.innerHTML = "Hinzufügen"
                              title.style.margin = "21px 34px"
                              title.style.fontSize = "21px"
                              button.append(title)

                              buttons.append(button)
                            }




                            overlay.append(buttons)



                          })
                        })

                        const itemState = document.createElement("div")
                        itemState.classList.add("item-state")
                        itemState.style.display = "flex"
                        itemState.style.justifyContent = "center"
                        itemState.style.alignItems = "center"
                        itemState.style.width = "89px"
                        itemState.style.height = "89px"
                        itemState.style.backgroundColor = "#c6c6c6"
                        itemState.style.fontSize = "34px"
                        itemState.style.borderTopLeftRadius = "21px"
                        itemState.style.borderBottomLeftRadius = "21px"

                        const itemIndex = document.createElement("div")
                        itemIndex.classList.add("item-index")
                        itemIndex.innerHTML = lead.reputation
                        itemIndex.style.fontSize = "21px"

                        itemState.append(itemIndex)
                        itemHeader.append(itemState)


                        {
                          const div = document.createElement("div")
                          div.style.alignSelf = "center"
                          div.style.marginLeft = "13px"

                          {
                            const title = document.createElement("div")
                            title.innerHTML = `${lead.firstname} ${lead.lastname}`
                            title.style.fontSize = "21px"
                            div.append(title)
                          }

                          {
                            const title = document.createElement("div")
                            title.innerHTML = lead.role.name
                            title.style.fontSize = "13px"
                            div.append(title)
                          }

                          itemHeader.append(div)
                        }






                        item.append(itemHeader)





                        const itemBody = document.createElement("div")
                        itemBody.classList.add("item-body")
                        itemBody.style.marginLeft = "8%"
                        itemBody.style.backgroundColor = "#dbdbdb"
                        itemBody.style.borderBottomRightRadius = "21px"
                        itemBody.style.borderBottomLeftRadius = "21px"
                        itemBody.style.padding = "21px"
                        itemBody.style.display = "flex"
                        itemBody.style.flexDirection = "column"
                        itemBody.style.boxShadow = "0 3px 5px rgba(0, 0, 0, 0.13)"

                        const buttons = document.createElement("div")
                        buttons.style.display = "flex"
                        buttons.style.alignItems = "center"

                        {
                          if (lead.phone !== undefined) {
                            const button = document.createElement("img")
                            button.src = "/public/phone-out.svg"
                            button.alt = "Anrufen"
                            button.style.width = "55px"
                            button.style.padding = "13px"
                            button.style.cursor = "pointer"
                            button.addEventListener("click", () => {
                              const a = document.createElement("a")
                              a.href = `tel:${lead.phone}`
                              a.click()
                            })
                            buttons.append(button)
                          }
                        }

                        {
                          if (lead.email !== undefined) {
                            const button = document.createElement("img")
                            button.src = "/public/mailto.svg"
                            button.alt = "E-Mail schreiben"
                            button.style.width = "55px"
                            button.style.padding = "13px"
                            button.style.cursor = "pointer"
                            button.addEventListener("click", () => {
                              const a = document.createElement("a")
                              a.href = `mailto:${lead.email}`
                              a.click()
                            })
                            buttons.append(button)
                          }
                        }

                        {
                          if (lead.street !== undefined && lead.zip !== undefined) {
                            const button = document.createElement("img")
                            button.src = "/public/maps.svg"
                            button.alt = "Navigieren"
                            button.style.width = "55px"
                            button.style.padding = "13px"
                            button.style.cursor = "pointer"
                            button.addEventListener("click", () => {
                              const a = document.createElement("a")
                              a.target = "_blank"
                              a.href = `https://maps.google.com/?q=${lead.zip}, ${lead.street}`
                              a.click()
                            })
                            buttons.append(button)
                          }

                        }



                        itemBody.append(buttons)

                        item.append(itemBody)
                        list.append(item)


                      }


                      overlay.append(list)


                    }

                  }





                })

              })

              const icon = document.createElement("img")
              icon.style.margin = "13px 34px"
              icon.style.width = "34px"
              icon.src = "/public/promote.svg"
              icon.alt = "Bewerber"
              button.append(icon)

              const title = document.createElement("div")
              title.innerHTML = "Bewerber ansehen"
              title.style.margin = "21px 34px"
              title.style.fontSize = "21px"
              button.append(title)

              buttons.append(button)

            }

          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/getyour/pana/nutzervereinbarung/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/handshake.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Nutzervereinbarung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/getyour/pana/datenschutz/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/security.svg"
            icon.alt = "Sicherheit"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Datenschutz Richtilinien"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/getyour/pana/impressum/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/company.svg"
            icon.alt = "Unternehmen"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Impressum"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          overlay.append(buttons)
        })
      })
      leftContainer.append(name)
      header.append(leftContainer)
      document.body.append(header)
    }

    {
      const title = document.createElement("h1")
      title.innerHTML = "Unternehmensübersicht"
      title.style.margin = "21px 34px"
      title.style.fontWeight = "normal"
      document.body.append(title)
    }

    {
      const verify = {}
      verify.url = "/verify/offer/closed/5/"
      verify.state = "complete"
      verify.localStorageEmail = await Request.email()
      verify.location = window.location.href
      verify.referer = document.referrer
      verify.localStorageId = await Request.localStorageId()
      const res = await Request.middleware(verify)


      if (res.status !== 200) {
        const div = document.createElement("div")
        div.style.position = "absolute"
        div.style.top = "0"
        div.style.left = "0"
        div.style.height = "89vh"
        div.style.width = "100%"
        div.style.display = "flex"
        div.style.justifyContent = "center"
        div.style.alignItems = "center"
        div.style.zIndex = "-1"
        div.style.color = "gray"
        div.innerHTML = `<span style="margin: 21px 34px;">Um Verkäufer anzuwerben, müssen Sie erst ein Angebot erstellen.</span>`
        document.body.append(div)
        throw new Error("offer not verified")
      }

      if (res.status === 200) {

        const get = {}
          get.url = `/get/seller/closed/5/`
          get.location = window.location.href
          get.referer = document.referrer
          get.localStorageEmail = await Request.email()
          get.localStorageId = await Request.localStorageId()
          const res = await Request.middleware(get)

          if (res.status !== 200) {

            const div = document.createElement("div")
            div.style.position = "absolute"
            div.style.top = "0"
            div.style.left = "0"
            div.style.height = "89vh"
            div.style.width = "100%"
            div.style.display = "flex"
            div.style.justifyContent = "center"
            div.style.alignItems = "center"
            div.style.zIndex = "-1"
            div.style.color = "gray"
            div.innerHTML = `<span style="margin: 21px 34px;">Ihr Angebot ist vollständig. Sie können jetzt unter 'Bewerber ansehen' Ihre Anfragen bearbeiten.</span>`
            document.body.append(div)
            throw new Error("seller not found")

          }


          if (res.status === 200) {
          const list = document.createElement("div")
          list.style.paddingBottom = "144px"

          const array = JSON.parse(res.response)

          if (array.length === 0) {
            const div = document.createElement("div")
            div.style.position = "absolute"
            div.style.top = "0"
            div.style.left = "0"
            div.style.height = "89vh"
            div.style.width = "100%"
            div.style.display = "flex"
            div.style.justifyContent = "center"
            div.style.alignItems = "center"
            div.style.zIndex = "-1"
            div.style.color = "gray"
            div.innerHTML = `<span style="margin: 21px 34px;">Ihr Angebot ist vollständig. Sie können jetzt unter 'Bewerber ansehen' Ihre Anfragen bearbeiten.</span>`
            document.body.append(div)
            throw new Error("seller not found")
          }

          for (let i = 0; i < array.length; i++) {
            const seller = array[i]

            const item = document.createElement("div")
            item.classList.add("checklist-item")
            item.style.margin = "34px"

            const itemHeader = document.createElement("div")
            itemHeader.classList.add("item-header")
            itemHeader.style.display = "flex"
            itemHeader.style.borderTopRightRadius = "21px"
            itemHeader.style.borderTopLeftRadius = "21px"
            itemHeader.style.borderBottomLeftRadius = "21px"
            itemHeader.style.backgroundColor = "#d1d0d0"
            itemHeader.style.cursor = "pointer"

            itemHeader.addEventListener("click", () => alert("Bald verfügbar.."))


            const itemState = document.createElement("div")
            itemState.classList.add("item-state")
            itemState.style.display = "flex"
            itemState.style.justifyContent = "center"
            itemState.style.alignItems = "center"
            itemState.style.width = "89px"
            itemState.style.height = "89px"
            itemState.style.backgroundColor = "#c6c6c6"
            itemState.style.fontSize = "34px"

            // if (seller.state === "offen") {
            //   itemState.style.backgroundColor = "#006f39"
            //   itemState.style.color = "#ffffff"
            // }
            itemState.style.borderTopLeftRadius = "21px"
            itemState.style.borderBottomLeftRadius = "21px"

            const itemIndex = document.createElement("div")
            itemIndex.classList.add("item-index")
            itemIndex.innerHTML = seller.reputation
            itemIndex.style.fontSize = "21px"

            itemState.append(itemIndex)


            const itemTitle = document.createElement("div")
            itemTitle.classList.add("item-title")
            itemTitle.style.alignSelf = "center"
            itemTitle.style.marginLeft = "13px"
            itemTitle.innerHTML = `${seller.firstname} ${seller.lastname}`
            itemTitle.style.fontSize = "21px"

            itemHeader.append(itemState, itemTitle)
            item.append(itemHeader)


            const itemBody = document.createElement("div")
            itemBody.classList.add("item-body")
            itemBody.style.marginLeft = "8%"
            itemBody.style.backgroundColor = "#dbdbdb"
            itemBody.style.borderBottomRightRadius = "21px"
            itemBody.style.borderBottomLeftRadius = "21px"
            itemBody.style.padding = "21px"
            itemBody.style.display = "flex"
            itemBody.style.flexDirection = "column"
            itemBody.style.boxShadow = "0 3px 5px rgba(0, 0, 0, 0.13)"

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.alignItems = "center"

            {
              if (seller.phone !== undefined) {
                const button = document.createElement("img")
                button.src = "/public/phone-out.svg"
                button.alt = "Anrufen"
                button.style.width = "55px"
                button.style.padding = "13px"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => {
                  const a = document.createElement("a")
                  a.href = `tel:${seller.phone}`
                  a.click()
                })
                buttons.append(button)
              }
            }

            {
              if (seller.email !== undefined) {
                const button = document.createElement("img")
                button.src = "/public/mailto.svg"
                button.alt = "E-Mail schreiben"
                button.style.width = "55px"
                button.style.padding = "13px"
                button.style.cursor = "pointer"
                button.addEventListener("click", () => {
                  const a = document.createElement("a")
                  a.href = `mailto:${seller.email}`
                  a.click()
                })
                buttons.append(button)
              }
            }

            itemBody.append(buttons)

            item.append(itemBody)
            list.append(item)


          }
          document.body.append(list)
        }
      }
    }



  </script>
</body>


</html>
